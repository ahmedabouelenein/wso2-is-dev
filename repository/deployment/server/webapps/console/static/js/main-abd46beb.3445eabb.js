"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[8518],{66054:function(e,t,n){n.d(t,{Rv:function(){return p},Hk:function(){return g},Dx:function(){return m},Wi:function(){return f},KD:function(){return d}});var o=n(19486),r=n(82817),a=n(88742),i=n(79949),l=n(26072),s=n(5984),c=n(11126),u=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),d=function(e,t){var n={headers:{Accept:"application/json","Content-Type":"application/json"},method:a.HttpMethods.GET,url:l.h.getState().config.endpoints.oidcScopes},o=(0,i.Z)(n),r=o.data,c=o.error,u=o.isValidating,d=o.mutate,m=e&&t?(0,s.fS)(r,e,"ASC"===t):r;return{data:m,error:c,isLoading:!c&&!m,isValidating:u,mutate:d}},m=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:l.h.getState().config.endpoints.oidcScopes+"/"+e};return u(t).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_DETAILS_FETCH_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_DETAILS_FETCH_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},p=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.POST,url:l.h.getState().config.endpoints.oidcScopes};return u(t).then((function(e){if(201!==e.status)throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_CREATE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_CREATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},f=function(e,t){var n={data:t,headers:{Accept:"application/json","Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.PUT,url:l.h.getState().config.endpoints.oidcScopes+"/"+e};return u(n).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_UPDATE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},g=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.DELETE,url:l.h.getState().config.endpoints.oidcScopes+"/"+e};return u(t).then((function(e){if(204!==e.status)throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_DELETE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.IdentityAppsApiException(c.K.OIDC_SCOPE_DELETE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},25054:function(e,t,n){n.d(t,{P:function(){return A},mA:function(){return z},AZ:function(){return y}});var o=n(69883),r=n(8890),a=n(88742),i=n(26278),l=n(96462),s=n(68905),c=n(64805),u=n(83913),d=n(82791),m=n(70515),p=n(90862),f=n(12847),g=n(66054),v=n(11126);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var y=function(e){var t=e.advancedSearch,n=e.defaultListItemLimit,E=e.featureConfig,y=e.isLoading,S=e.list,C=e.searchResult,R=e.getOIDCScopesList,A=e.onScopeDelete,b=e.onListItemClick,O=e.onEmptyListPlaceholderActionClick,I=e.selection,T=e.showListItemActions,N=e["data-testid"],_=(0,c.$G)().t,w=(0,u.I0)(),P=h((0,s.useState)(!1),2),L=P[0],D=P[1],Z=h((0,s.useState)(void 0),2),F=Z[0],k=Z[1],z=(0,u.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),x=function(e){f.m8.push(f.$x.getPaths().get("OIDC_SCOPES_EDIT").replace(":id",e))},U=function(){return 0===C?s.createElement(l.EmptyPlaceholder,{action:s.createElement(l.LinkButton,{onClick:R},_("console:manage.features.oidcScopes.placeholders.emptySearch.action")),image:(0,f.jF)().emptySearch,imageSize:"tiny",title:_("console:manage.features.oidcScopes.placeholders.emptySearch.title"),subtitle:[_("console:manage.features.oidcScopes.placeholders.emptySearch.subtitles.0"),_("console:manage.features.oidcScopes.placeholders.emptySearch.subtitles.1")],"data-testid":"".concat(N,"-empty-search-placeholder")}):y||0!==(null===S||void 0===S?void 0:S.length)?null:s.createElement(l.EmptyPlaceholder,{action:O&&s.createElement(o.di,{when:o.TA.SCOPE_WRITE},s.createElement(l.PrimaryButton,{onClick:O},s.createElement(m.Z,{name:"add"}),_("console:manage.features.oidcScopes.placeholders.emptyList.action"))),image:null===(e=(0,f.jF)())||void 0===e?void 0:e.newList,imageSize:"tiny",title:_("console:manage.features.oidcScopes.placeholders.emptyList.title"),subtitle:[_("console:manage.features.oidcScopes.placeholders.emptyList.subtitles.0"),_("console:manage.features.oidcScopes.placeholders.emptyList.subtitles.1"),_("console:manage.features.oidcScopes.placeholders.emptyList.subtitles.2")],"data-testid":"".concat(N,"-empty-placeholder")});var e};return s.createElement(s.Fragment,null,s.createElement(l.GridLayout,{isLoading:y,showTopActionPanel:!1},s.createElement(l.DataTable,{className:"oidc-scopes-table",externalSearch:t,isLoading:y,loadingStateOptions:{count:n,imageType:"square"},actions:function(){if(T){var e=[{hidden:function(){return!(0,r.isFeatureEnabled)(null===E||void 0===E?void 0:E.applications,p.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))},icon:function(){var e,t;return(0,r.hasRequiredScopes)(null===E||void 0===E?void 0:E.oidcScopes,null===E||void 0===E||null===(e=E.oidcScopes)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,z)?"pencil alternate":"eye"},onClick:function(e,t){return x(null===t||void 0===t?void 0:t.name)},popupText:function(){var e,t;return(0,r.hasRequiredScopes)(null===E||void 0===E?void 0:E.oidcScopes,null===E||void 0===E||null===(e=E.oidcScopes)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,z)?_("common:edit"):_("common:view")},renderer:"semantic-icon"}];return e.push({hidden:function(e){var t,n;return!(0,r.hasRequiredScopes)(null===E||void 0===E?void 0:E.applications,null===E||void 0===E||null===(t=E.applications)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.delete,z)||e.name===v.K.OPEN_ID_SCOPE},icon:function(){return"trash alternate"},onClick:function(e,t){D(!0),k(t)},popupText:function(){return _("common:delete")},renderer:"semantic-icon"}),e}}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t;return s.createElement(d.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(N,"-item-heading")},s.createElement(l.AppAvatar,{image:s.createElement(l.AnimatedAvatar,{name:e.displayName,size:"mini","data-testid":"".concat(N,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(N,"-item-image")}),s.createElement(d.Z.Content,null,e.displayName,s.createElement(d.Z.Subheader,null,s.createElement(l.Code,{withBackground:!0},e.name)," "+(null!==(t=e.description)&&void 0!==t?t:""))))},title:_("console:manage.features.oidcScopes.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:_("console:manage.features.oidcScopes.list.columns.actions")}],data:S,onRowClick:function(e,t){x(null===t||void 0===t?void 0:t.name),b(e,t)},placeholders:U(),transparent:!y&&null!==U(),selectable:I,showHeader:!1,"data-testid":N})),F&&s.createElement(l.ConfirmationModal,{onClose:function(){return D(!1)},type:"negative",open:L,assertion:F.name,assertionHint:_("console:manage.features.oidcScopes.confirmationModals.deleteScope.assertionHint"),assertionType:"checkbox",primaryAction:_("common:confirm"),secondaryAction:_("common:cancel"),onSecondaryActionClick:function(){return D(!1)},onPrimaryActionClick:function(){return e=F.name,void(0,g.Hk)(e).then((function(){k(void 0),A(),w((0,i.addAlert)({description:_("console:manage.features.oidcScopes.notifications.deleteOIDCScope.success.description"),level:a.AlertLevels.SUCCESS,message:_("console:manage.features.oidcScopes.notifications.deleteOIDCScope.success.message")})),D(!1)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?w((0,i.addAlert)({description:e.response.data.description,level:a.AlertLevels.ERROR,message:_("console:manage.features.oidcScopes.notifications.deleteOIDCScope.error.message")})):w((0,i.addAlert)({description:_("console:manage.features.oidcScopes.notifications.deleteOIDCScope.genericError.description"),level:a.AlertLevels.ERROR,message:_("console:manage.features.oidcScopes.notifications.deleteOIDCScope.genericError.message")}))}));var e},"data-testid":"".concat(N,"-delete-confirmation-modal"),closeOnDimmerClick:!1},s.createElement(l.ConfirmationModal.Header,{"data-testid":"".concat(N,"-delete-confirmation-modal-header")},_("console:manage.features.oidcScopes.confirmationModals.deleteScope.header")),s.createElement(l.ConfirmationModal.Message,{attached:!0,negative:!0,"data-testid":"".concat(N,"-delete-confirmation-modal-message")},_("console:manage.features.oidcScopes.confirmationModals.deleteScope.message")),s.createElement(l.ConfirmationModal.Content,{"data-testid":"".concat(N,"-delete-confirmation-modal-content")},_("console:manage.features.oidcScopes.confirmationModals.deleteScope.content"))))};y.defaultProps={"data-testid":"scope-list",defaultListItemLimit:10,isLoading:!0,onListItemClick:function(){return null},selection:!0,showListItemActions:!0};var S=n(30418);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A=function(e){var t=e.scope,n=e.onUpdate,p=e.selectedAttributes,h=e.tempSelectedAttributes,E=e.unselectedAttributes,y=e.isRequestLoading,R=e.triggerAddAttributeModal,A=e.clearSearchedAttributes,b=e["data-testid"],O=(0,c.$G)().t,I=(0,u.I0)(),T=C((0,s.useState)(!1),2),N=T[0],_=T[1],w=C((0,s.useState)(void 0),2),P=w[0],L=w[1],D=C((0,s.useState)(!1),2),Z=D[0],F=D[1],k=(0,s.useRef)(!0),z=(0,u.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),x=(0,u.v9)((function(e){return e.config.ui.features})),U=(0,s.useMemo)((function(){var e,t;return!(0,r.hasRequiredScopes)(null===x||void 0===x?void 0:x.oidcScopes,null===x||void 0===x||null===(e=x.oidcScopes)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,z)}),[x,z]);(0,s.useEffect)((function(){k.current?k.current=!1:G()}),[R]);var j=function(e){var o={claims:e,description:t.description,displayName:t.displayName};(0,g.Wi)(t.name,o).then((function(){F(!1),I((0,i.addAlert)({description:O("console:manage.features.oidcScopes.notifications.updateOIDCScope.success.description"),level:a.AlertLevels.SUCCESS,message:O("console:manage.features.oidcScopes.notifications.updateOIDCScope.success.message")})),n(t.name)})).catch((function(e){F(!1),e.response&&e.response.data&&e.response.data.description?I((0,i.addAlert)({description:e.response.data.description,level:a.AlertLevels.ERROR,message:O("console:manage.features.oidcScopes.notifications.updateOIDCScope.error.message")})):I((0,i.addAlert)({description:O("console:manage.features.oidcScopes.notifications.updateOIDCScope.genericError.description"),level:a.AlertLevels.ERROR,message:O("console:manage.features.oidcScopes.notifications.updateOIDCScope.genericError.message")}))}))},M=function(){return s.createElement(S.K,{availableExternalClaims:E,selectedExternalClaims:p,showAddModal:N,"data-testid":"".concat(b,"-add-attributes"),setShowAddModal:_,setAvailableExternalClaims:function(){return null},setInitialSelectedExternalClaims:function(e){var t=null===e||void 0===e?void 0:e.map((function(e){return e.claimURI}));j(t)},setSelectedExternalClaims:function(){return null},isScopeSection:!0,scopeName:t.displayName})},G=function(){_(!0)},H=function(){return 0===(null===p||void 0===p?void 0:p.length)?s.createElement(l.EmptyPlaceholder,{"data-testid":"scope-mgt-empty-actual-claims-list",subtitle:[O("console:manage.features.oidcScopes.editScope.claimList.emptyPlaceholder.subtitles.0")],action:s.createElement(o.di,{when:o.TA.SCOPE_WRITE},s.createElement(l.PrimaryButton,{"data-testid":"user-mgt-roles-list-add-button",size:"medium",icon:s.createElement(m.Z,{name:"add"}),onClick:function(){G(),M()}},s.createElement(m.Z,{name:"add"}),O("console:manage.features.oidcScopes.editScope.claimList.addClaim"))),image:(0,f.jF)().newList,imageSize:"tiny"}):0===(null===h||void 0===h?void 0:h.length)?s.createElement(l.EmptyPlaceholder,{"data-testid":"scope-mgt-empty-claims-list",title:O("console:manage.features.oidcScopes.editScope.claimList.emptySearch.title"),subtitle:[O("console:manage.features.oidcScopes.editScope.claimList.emptySearch.subtitles.0"),O("console:manage.features.oidcScopes.editScope.claimList.emptySearch.subtitles.1")],action:s.createElement(l.LinkButton,{onClick:A},O("console:manage.features.oidcScopes.editScope.claimList.emptySearch.action")),image:(0,f.jF)().emptySearch,imageSize:"tiny"}):null};return s.createElement(s.Fragment,null,s.createElement(l.DataTable,{className:"oidc-scopes-table",isLoading:y,loadingStateOptions:{count:10,imageType:"square"},actions:[{hidden:function(e){return"sub"===e.claimURI&&t.name===v.K.OPEN_ID_SCOPE||U},icon:function(){return"trash alternate"},onClick:function(e,t){F(!0),L(t)},popupText:function(){return O("common:delete")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return s.createElement(d.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(b,"-item-heading")},s.createElement(d.Z.Content,null,e.claimURI))},title:O("console:manage.features.oidcScopes.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:O("console:manage.features.oidcScopes.list.columns.actions")}],data:h,onRowClick:function(){return null},placeholders:H(),transparent:!y&&null!==H(),showHeader:!1,"data-testid":b}),P&&s.createElement(l.ConfirmationModal,{"data-testid":"".concat(b,"-confirmation-modal"),onClose:function(){return F(!1)},type:"negative",open:Z,assertionHint:O("console:manage.features.claims.scopeMappings.deletionConfirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:O("common:confirm"),secondaryAction:O("common:cancel"),onSecondaryActionClick:function(){return F(!1)},onPrimaryActionClick:function(){return function(e){var n=(null===t||void 0===t?void 0:t.claims).filter((function(t){return t!==e}));j(n)}(P.claimURI)},closeOnDimmerClick:!1},s.createElement(l.ConfirmationModal.Header,{"data-testid":"".concat(b,"-confirmation-modal-header")},O("console:manage.features.claims.scopeMappings.deletionConfirmationModal.header")),s.createElement(l.ConfirmationModal.Message,{"data-testid":"".concat(b,"-confirmation-modal-message"),attached:!0,negative:!0},O("console:manage.features.claims.scopeMappings.deletionConfirmationModal.message")),s.createElement(l.ConfirmationModal.Content,null,O("console:manage.features.claims.scopeMappings.deletionConfirmationModal.content"))),M())};A.defaultProps={isRequestLoading:!0};var b,O=n(3844),I=n(26776),T=n(85027),N=n(23177),_=n(23339),w=function(e){var t=e.initialValues,n=(e.triggerSubmit,e.triggerSubmission),o=e.onSubmit,r=e["data-testid"],a=(0,c.$G)().t;return s.createElement(_.en,{initialValues:{scopeName:null===t||void 0===t?void 0:t.scopeName,displayName:null===t||void 0===t?void 0:t.displayName,description:null===t||void 0===t?void 0:t.description},onSubmit:function(e){o(function(e){var t,n,o;return{description:null===e||void 0===e||null===(t=e.description)||void 0===t?void 0:t.toString(),displayName:null===e||void 0===e||null===(n=e.displayName)||void 0===n?void 0:n.toString(),scopeName:null===e||void 0===e||null===(o=e.scopeName)||void 0===o?void 0:o.toString()}}(e))},triggerSubmit:function(e){return n(e)},triggerPrevious:function(e){e}},s.createElement(_.k0,{validate:function(e){var n={};return e.scopeName||null!==t&&void 0!==t&&t.scopeName||(n.scopeName=a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.scopeName.validations.empty")),e.displayName||null!==t&&void 0!==t&&t.displayName||(n.displayName=a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.displayName.validations.empty")),n}},s.createElement(_.gN.Input,{"data-testid":"".concat(r,"-oidc-scope-form-name-input"),ariaLabel:"scopeName",inputType:"name",name:"scopeName",label:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.scopeName.label"),required:!0,requiredErrorMessage:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.scopeName.validations.empty"),placeholder:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.scopeName.placeholder"),validation:function(e){if(!e.toString().match(/^[\w.-]+$/))return a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.scopeName.validations.invalid")},maxLength:40,minLength:3,width:10}),s.createElement(_.gN.Input,{ariaLabel:"displayName",inputType:"resource_name","data-testid":"".concat(r,"-oidc-scope-form-name-input"),name:"displayName",label:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.displayName.label"),required:!0,message:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.displayName.validations.empty"),placeholder:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.displayName.placeholder"),maxLength:40,minLength:3,width:10}),s.createElement(_.gN.Input,{"data-testid":"".concat(r,"-oidc-scope-form-name-input"),ariaLabel:"description",inputType:"description",name:"description",label:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.description.label"),required:!1,placeholder:a("console:manage.features.oidcScopes.forms.addScopeForm.inputs.description.placeholder"),maxLength:100,minLength:3,width:10})))},P=n(91250);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}!function(e){e.BASIC_DETAILS="BasicDetails",e.CLAIM_LIST="ClaimList"}(b||(b={}));var z=function(e){var t=e.closeWizard,n=e.currentStep,o=e.onUpdate,r=e["data-testid"],d=(0,c.$G)().t,p=(0,u.I0)(),h=F((0,I.useTrigger)(),2),E=h[0],y=h[1],S=F((0,I.useTrigger)(),2),C=S[0],R=S[1],A=F((0,s.useState)(void 0),2),_=A[0],L=A[1],k=F((0,s.useState)(n),2),z=k[0],x=k[1],U=F((0,s.useState)(void 0),2),j=U[0],M=U[1],G=F((0,s.useState)(void 0),2),H=G[0],B=G[1],W=F((0,s.useState)([]),2),V=W[0],Y=(W[1],F((0,s.useState)(!1),2)),q=(Y[0],Y[1]),$=F((0,s.useState)([]),2),K=$[0],Q=$[1],X=F((0,s.useState)(!1),2),J=X[0],ee=X[1],te=F((0,l.useWizardAlert)(),3),ne=te[0],oe=te[1],re=te[2];(0,s.useEffect)((function(){(0,O.getAllLocalClaims)(null).then((function(e){Q(e)})).catch((function(e){var t,n,o,r;p((0,i.addAlert)({description:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description)||d("console:manage.features.claims.local.notifications.getClaims.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e||void 0===e||null===(o=e.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||d("console:manage.features.claims.local.notifications.getClaims.genericError.message")}))}))}),[]),(0,s.useEffect)((function(){void 0!==_&&(x(z-1),L(void 0))}),[_]),(0,s.useEffect)((function(){if(!H&&K&&0!==K.length){var e=v.K.OIDC_ATTRIBUTE_ID;ie(e)}}),[H,K]);var ae,ie=function(e){(0,O.getAllExternalClaims)(e,null).then((function(e){q(!0),null===e||void 0===e||e.forEach((function(e){var t=e.mappedLocalClaimURI,n=K.filter((function(e){return e.claimURI===t}));n&&n[0]&&n[0].displayName&&(e.localClaimDisplayName=n[0].displayName)})),B(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?oe({description:e.response.data.description,level:a.AlertLevels.ERROR,message:d("console:manage.features.oidcScopes.notifications.fetchOIDClaims.error.message")}):oe({description:d("console:manage.features.oidcScopes.notifications.fetchOIDClaims.genericError.description"),level:a.AlertLevels.ERROR,message:d("console:manage.features.oidcScopes.notifications.fetchOIDClaims.genericError.message")})})).finally((function(){q(!1)}))},le=function(){switch(z){case 0:R(),ae();break;case 1:y()}},se=[{content:s.createElement(w,{initialValues:j&&j[b.BASIC_DETAILS],triggerSubmit:C,triggerSubmission:function(e){ae=e},onSubmit:function(e){return function(e,t){x(z+1),M(D(D({},j),{},Z({},t,e)))}(e,b.BASIC_DETAILS)},"data-testid":"".concat(r,"-form")}),icon:(0,P.k)().general,title:d("console:manage.features.oidcScopes.wizards.addScopeWizard.steps.basicDetails")},{content:s.createElement(f.iz,{availableExternalClaims:H,setAvailableExternalClaims:function(){return null},setInitialSelectedExternalClaims:function(e){var n=null===e||void 0===e?void 0:e.map((function(e){return e.claimURI}));(null===n||void 0===n?void 0:n.length)>0?(ee(!0),function(e){var n,r,l,s,c={claims:e,description:null!==(n=j[b.BASIC_DETAILS])&&void 0!==n&&n.description?null===(r=j[b.BASIC_DETAILS])||void 0===r?void 0:r.description:"This is the description of the scope",displayName:null===(l=j[b.BASIC_DETAILS])||void 0===l?void 0:l.displayName,name:null===(s=j[b.BASIC_DETAILS])||void 0===s?void 0:s.scopeName};q(!0),(0,g.Rv)(c).then((function(){t(),p((0,i.addAlert)({description:d("console:manage.features.oidcScopes.notifications.addOIDCScope.success.description"),level:a.AlertLevels.SUCCESS,message:d("console:manage.features.oidcScopes.notifications.addOIDCScope.success.message")})),o()})).catch((function(e){t(),e.response&&e.response.data&&e.response.data.description?p((0,i.addAlert)({description:e.response.data.description,level:a.AlertLevels.ERROR,message:d("console:manage.features.oidcScopes.notifications.addOIDCScope.error.message")})):p((0,i.addAlert)({description:d("console:manage.features.oidcScopes.notifications.addOIDCScope.genericError.description"),level:a.AlertLevels.ERROR,message:d("console:manage.features.oidcScopes.notifications.addOIDCScope.genericError.message")}))})).finally((function(){q(!1)}))}(n)):oe({description:d("console:manage.features.oidcScopes.notifications.claimsMandatory.error.description"),level:a.AlertLevels.ERROR,message:d("console:manage.features.oidcScopes.notifications.claimsMandatory.error.message")})},onUpdate:function(){return null},selectedExternalClaims:V,triggerSubmit:E}),icon:(0,P.k)().claimConfig,title:d("console:manage.features.oidcScopes.wizards.addScopeWizard.steps.claims")}];return s.createElement(T.Z,{open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,"data-testid":r,closeOnDimmerClick:!1,closeOnEscape:!0},s.createElement(T.Z.Header,{className:"wizard-header"},d("console:manage.features.oidcScopes.wizards.addScopeWizard.title"),s.createElement(l.Heading,{as:"h6"},d("console:manage.features.oidcScopes.wizards.addScopeWizard.subTitle"))),s.createElement(T.Z.Content,{className:"steps-container"},s.createElement(l.Steps.Group,{current:z,"data-testid":"".concat(r,"-steps")},se.map((function(e,t){return s.createElement(l.Steps.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(r,"-step-").concat(t)})})))),s.createElement(T.Z.Content,{className:"content-container attribute-list",scrolling:!0},ne&&re,se[z].content),s.createElement(T.Z.Actions,null,s.createElement(N.Z,null,s.createElement(N.Z.Row,{column:1},s.createElement(N.Z.Column,{mobile:8,tablet:8,computer:8},s.createElement(l.LinkButton,{floated:"left",onClick:function(){return t()},"data-testid":"".concat(r,"-cancel-button")},d("common:cancel"))),s.createElement(N.Z.Column,{mobile:8,tablet:8,computer:8},z<se.length-1&&s.createElement(l.PrimaryButton,{floated:"right",onClick:le,"data-testid":"".concat(r,"-next-button")},d("common:next"),s.createElement(m.Z,{name:"arrow right"})),z===se.length-1&&s.createElement(l.PrimaryButton,{floated:"right",onClick:le,"data-testid":"".concat(r,"-finish-button"),loading:J,disabled:J},d("common:finish")),z>0&&s.createElement(l.LinkButton,{floated:"right",onClick:function(){L(z)},"data-testid":"".concat(r,"-previous-button")},s.createElement(m.Z,{name:"arrow left"}),d("common:previous")))))))};z.defaultProps={currentStep:0,"data-testid":"add-oidc-scope-wizard"}},91250:function(e,t,n){n.d(t,{k:function(){return i},w:function(){return o}});var o=function(e){return{oidcScopes:"".concat(e,"/api/server/v1/oidc/scopes")}},r=n(64408),a=n(87751),i=function(){return{claimConfig:a.r,general:r.r}}},11126:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{K:function(){return i}});var i=r((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(i,"OIDC_ATTRIBUTE_ID","aHR0cDovL3dzbzIub3JnL29pZGMvY2xhaW0"),a(i,"OPEN_ID_SCOPE","openid"),a(i,"OIDC_SCOPES_FETCH_ERROR","An error occurred while fetching the OIDC scopes."),a(i,"OIDC_SCOPE_DETAILS_FETCH_ERROR","An error occurred while fetching the details of the OIDC scope."),a(i,"OIDC_SCOPE_UPDATE_ERROR","An error occurred while updating the details of the OIDC scope."),a(i,"OIDC_SCOPE_CREATE_ERROR","An error occurred while creating the new OIDC scope."),a(i,"OIDC_SCOPE_DELETE_ERROR","An error occurred while deleting the OIDC scope.")},88804:function(e,t,n){n.d(t,{wB:function(){return o.w}});n(66054),n(25054);var o=n(91250);n(11126),n(13628),n(74425)},74425:function(e,t,n){n.r(t);var o=n(69883),r=n(3844),a=n(8890),i=n(88742),l=n(26278),s=n(23339),c=n(26776),u=n(96462),d=n(80954),m=n(68905),p=n(64805),f=n(83913),g=n(99104),v=n(82791),h=n(23177),E=n(2120),y=n(5554),S=n(70515),C=n(1410),R=n(12847),A=n(66054),b=n(25054),O=n(11126);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var N=function(e){var t,n,T=e["data-testid"],N=e.match.params.id,_=(0,p.$G)().t,w=[{key:0,text:_("console:manage.features.claims.external.attributes.attributeURI",{type:"OIDC"}),value:"localClaimDisplayName"},{key:1,text:_("console:manage.features.claims.local.attributes.attributeURI"),value:"mappedLocalClaimURI"}],P=(0,f.I0)(),L=I((0,m.useState)({}),2),D=L[0],Z=L[1],F=I((0,m.useState)([]),2),k=F[0],z=F[1],x=I((0,m.useState)(!0),2),U=x[0],j=x[1],M=I((0,m.useState)(!0),2),G=M[0],H=M[1],B=I((0,m.useState)(R.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),W=B[0],V=(B[1],I((0,m.useState)(void 0),2)),Y=V[0],q=V[1],$=I((0,m.useState)([]),2),K=$[0],Q=$[1],X=I((0,m.useState)([]),2),J=X[0],ee=X[1],te=I((0,m.useState)([]),2),ne=te[0],oe=te[1],re=I((0,c.useTrigger)(),2),ae=re[0],ie=re[1],le=I((0,m.useState)(!0),2),se=le[0],ce=le[1],ue=I((0,m.useState)(w[0]),2),de=ue[0],me=ue[1],pe=I((0,m.useState)(""),2),fe=pe[0],ge=pe[1],ve=I((0,m.useState)(!1),2),he=ve[0],Ee=ve[1],ye=(0,m.useRef)(!0),Se=(0,f.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),Ce=(0,f.v9)((function(e){return e.config.ui.features})),Re=(0,m.useMemo)((function(){var e,t;return!(0,a.hasRequiredScopes)(null===Ce||void 0===Ce?void 0:Ce.oidcScopes,null===Ce||void 0===Ce||null===(e=Ce.oidcScopes)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,Se)}),[Ce,Se]);(0,m.useEffect)((function(){ye.current?ye.current=!1:ee((0,R.fS)(J,de.value,se))}),[d.Z,se]),(0,m.useEffect)((function(){(0,r.getAllLocalClaims)(null).then((function(e){z(e)})).catch((function(e){var t,n,o,r;P((0,l.addAlert)({description:(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.description)||_("console:manage.features.claims.local.notifications.getClaims.genericError.description"),level:i.AlertLevels.ERROR,message:(null===e||void 0===e||null===(o=e.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||_("console:manage.features.claims.local.notifications.getClaims.genericError.message")}))}))}),[]),(0,m.useEffect)((function(){if(!Y){var e=O.K.OIDC_ATTRIBUTE_ID;k&&0!==k.length&&be(e)}}),[k,Y]),(0,m.useEffect)((function(){void 0!=Y&&Ae()}),[Y,D]);var Ae=function(){var e;if(D.claims){var t=[];null===D||void 0===D||null===(e=D.claims)||void 0===e||e.map((function(e){t.push(Y.find((function(t){return(null===t||void 0===t?void 0:t.claimURI)==e})))}));var n=t.filter((function(e){return!!e})),o=(0,d.Z)(n,"localClaimDisplayName");Q(o),ee(o),oe(Y.filter((function(e){return!(null!==n&&void 0!==n&&n.includes(e))})))}};(0,m.useEffect)((function(){N&&Oe(N)}),[N]);var be=function(e){H(!0),(0,r.getAllExternalClaims)(e,null).then((function(e){null===e||void 0===e||e.forEach((function(e){var t=e.mappedLocalClaimURI,n=k.filter((function(e){return e.claimURI===t}));n&&n[0]&&n[0].displayName&&(e.localClaimDisplayName=n[0].displayName)})),q(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?P((0,l.addAlert)({description:e.response.data.description,level:i.AlertLevels.ERROR,message:_("console:manage.features.oidcScopes.notifications.fetchOIDClaims.error.message")})):P((0,l.addAlert)({description:_("console:manage.features.oidcScopes.notifications.fetchOIDClaims.genericError.description"),level:i.AlertLevels.ERROR,message:_("console:manage.features.oidcScopes.notifications.fetchOIDClaims.genericError.message")}))})).finally((function(){H(!1)}))},Oe=function(e){j(!0),(0,A.Dx)(e).then((function(e){Z(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?P((0,l.addAlert)({description:e.response.data.description,level:i.AlertLevels.ERROR,message:_("console:manage.features.oidcScopes.notifications.fetchOIDCScope.error.message")})):P((0,l.addAlert)({description:_("console:manage.features.oidcScopes.notifications.fetchOIDCScope.genericError.description"),level:i.AlertLevels.ERROR,message:_("console:manage.features.oidcScopes.notifications.fetchOIDCScope.genericError.message")}))})).finally((function(){j(!1)}))};return m.createElement(u.PageLayout,{pageTitle:"Update Scope",isLoading:U||G,title:D.displayName,contentTopMargin:!0,description:m.createElement(m.Fragment,null,m.createElement(g.Z,{className:"no-margin-left"},m.createElement("code",null,D.name))," "+(D.description||_("console:manage.pages.oidcScopesEdit.subTitle"))),image:m.createElement(u.AnimatedAvatar,{name:D.name,size:"tiny",floated:"left"}),backButton:{onClick:function(){R.m8.push(R.$x.getPaths().get("OIDC_SCOPES"))},text:_("console:manage.pages.oidcScopesEdit.backButton")},titleTextAlign:"left",bottomMargin:!1,"data-testid":"".concat(T,"-page-layout")},m.createElement(v.Z,null,"Update Scope"),m.createElement(u.EmphasizedSegment,{className:"padded very"},m.createElement(h.Z,null,m.createElement(h.Z.Row,{columns:1},m.createElement(h.Z.Column,{width:6},U||G?m.createElement(E.Z,null,m.createElement(E.Z.Line,{length:"medium"}),m.createElement(E.Z.Line,{length:"short"})):m.createElement(s.l0,{uncontrolledForm:!1,onSubmit:function(e){!function(e){var t,n;Ee(!0),(0,A.Wi)(D.name,{claims:D.claims,description:void 0!==(null===e||void 0===e?void 0:e.description)?null===e||void 0===e||null===(t=e.description)||void 0===t?void 0:t.toString():D.description,displayName:void 0!==(null===e||void 0===e?void 0:e.displayName)?null===e||void 0===e||null===(n=e.displayName)||void 0===n?void 0:n.toString():D.displayName}).then((function(){P((0,l.addAlert)({description:_("console:manage.features.oidcScopes.notifications.updateOIDCScope.success.description"),level:i.AlertLevels.SUCCESS,message:_("console:manage.features.oidcScopes.notifications.updateOIDCScope.success.message")})),Oe(N)})).catch((function(e){var t,n,o,r,a,s;P((0,l.addAlert)({description:null!==(t=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.description)&&void 0!==t?t:_("console:manage.features.oidcScopes.notifications.updateOIDCScope.genericError.description"),level:i.AlertLevels.ERROR,message:null!==(r=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)&&void 0!==r?r:_("console:manage.features.oidcScopes.notifications.updateOIDCScope.genericError.message")}))})).finally((function(){Ee(!1)}))}(e)},"data-testid":T},m.createElement(s.gN.Input,{ariaLabel:"displayName",inputType:"name",name:"displayName",label:_("console:manage.features.oidcScopes.forms.addScopeForm.inputs.displayName.label"),placeholder:_("console:manage.features.oidcScopes.forms.addScopeForm.inputs.displayName.placeholder"),value:D.displayName,required:!0,message:_("console:manage.features.oidcScopes.forms.addScopeForm.inputs.displayName.validations.empty"),maxLength:40,minLength:3,readOnly:Re}),m.createElement(s.gN.Input,{ariaLabel:"description",inputType:"description",name:"description",label:_("console:manage.features.oidcScopes.forms.addScopeForm.inputs.description.label"),placeholder:_("console:manage.features.oidcScopes.forms.addScopeForm.inputs.description.placeholder"),value:D.description,required:!1,maxLength:100,minLength:3,readOnly:Re}),!Re&&m.createElement(s.gN.Button,{ariaLabel:"submit",size:"small",loading:he,disabled:he,buttonType:"primary_btn",label:_("common:update"),name:"submit"})))))),m.createElement(y.Z,{hidden:!0}),m.createElement(u.ListLayout,{rightActionPanel:m.createElement(o.di,{when:o.TA.SCOPE_WRITE},m.createElement(u.PrimaryButton,{"data-testid":"user-mgt-roles-list-update-button",size:"medium",icon:m.createElement(S.Z,{name:"add"}),floated:"right",onClick:function(){return ie()}},m.createElement(S.Z,{name:"add"}),_("console:manage.features.oidcScopes.editScope.claimList.addClaim"))),showTopActionPanel:U||!(0==(null===(t=D.claims)||void 0===t?void 0:t.length)),listItemLimit:W,showPagination:!1,onPageChange:function(){return null},totalPages:Math.ceil((null===(n=D.claims)||void 0===n?void 0:n.length)/W),"data-testid":"".concat(T,"-list-layout"),leftActionPanel:m.createElement("div",{className:"advanced-search-wrapper aligned-left fill-default"},m.createElement(C.Z,{className:"advanced-search with-add-on","data-testid":"".concat(T,"-list-search-input"),icon:"search",iconPosition:"left",onChange:function(e){var t=e.target.value;ge(t),t.length>0?ee(K.filter((function(e){return-1!==e.localClaimDisplayName.toLowerCase().indexOf(t.toLowerCase())}))):ee(K)},placeholder:_("console:manage.features.oidcScopes.editScope.claimList.searchClaims"),floated:"right",size:"small",value:fe})),onSortOrderChange:function(e){ce(e)},sortOptions:w,sortStrategy:d.Z,onSortStrategyChange:function(e,t){me(w.filter((function(e){return e.value===t.value}))[0])}},m.createElement(b.P,{scope:D,isLoading:U||G,onUpdate:Oe,"data-testid":T,selectedAttributes:K,tempSelectedAttributes:J,unselectedAttributes:ne,isRequestLoading:U||G,triggerAddAttributeModal:ae,clearSearchedAttributes:function(){ge(""),ee(K)}})))};N.defaultProps={"data-testid":"oidc-scopes-edit"},t.default=N},13628:function(e,t,n){n.r(t);var o=n(8890),r=n(88742),a=n(26278),i=n(96462),l=n(80954),s=n(68905),c=n(64805),u=n(83913),d=n(70515),m=n(1410),p=n(12847),f=n(66054),g=n(25054);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var E=function(e){var t,n,h=e["data-testid"],E=(0,c.$G)().t,y=[{key:0,text:E("common:name"),value:"displayName"},{key:1,text:E("console:manage.features.oidcScopes.forms.addScopeForm.inputs.scopeName.label"),value:"name"}],S=(0,u.I0)(),C=(0,u.v9)((function(e){return e.config.ui.features})),R=(0,u.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),A=v((0,s.useState)(void 0),2),b=A[0],O=A[1],I=v((0,s.useState)(!1),2),T=I[0],N=I[1],_=v((0,s.useState)(p.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),1)[0],w=v((0,s.useState)("ASC"),2),P=w[0],L=w[1],D=v((0,s.useState)(y[0]),2),Z=D[0],F=D[1],k=v((0,s.useState)(""),2),z=k[0],x=k[1],U=(0,f.KD)(Z.value,P),j=U.data,M=U.isLoading,G=U.error,H=U.mutate;(0,s.useEffect)((function(){O((0,p.fS)(b,Z.value,"ASC"===P))}),[P,Z]),(0,s.useEffect)((function(){if(z.length>0){var e=j.filter((function(e){return-1!==e.name.toLowerCase().indexOf(z.toLowerCase())}));O(e)}else O(void 0)}),[z]),(0,s.useEffect)((function(){G&&(G.response&&G.response.data&&G.response.data.description?S((0,a.addAlert)({description:G.response.data.description,level:r.AlertLevels.ERROR,message:E("console:develop.features.applications.notifications.fetchApplications.error.message")})):S((0,a.addAlert)({description:E("console:develop.features.applications.notifications.fetchApplications.genericError.description"),level:r.AlertLevels.ERROR,message:E("console:develop.features.applications.notifications.fetchApplications.genericError.message")})))}),[G]);return s.createElement(i.PageLayout,{pageTitle:"Scopes",action:(0,o.hasRequiredScopes)(null===C||void 0===C?void 0:C.applications,null===C||void 0===C||null===(t=C.applications)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.create,R)?s.createElement(i.PrimaryButton,{disabled:M,loading:M,onClick:function(){return N(!0)},"data-testid":"".concat(h,"-list-layout-add-button")},s.createElement(d.Z,{name:"add"}),E("console:manage.features.oidcScopes.buttons.addScope")):null,title:E("console:manage.pages.oidcScopes.title"),description:E("console:manage.pages.oidcScopes.subTitle"),"data-testid":"".concat(h,"-page-layout")},s.createElement(i.ListLayout,{showTopActionPanel:!M&&!(0==(null===j||void 0===j?void 0:j.length)),listItemLimit:_,showPagination:!1,onPageChange:function(){return null},totalPages:Math.ceil((null===j||void 0===j?void 0:j.length)/_),"data-testid":"".concat(h,"-list-layout"),leftActionPanel:s.createElement("div",{className:"advanced-search-wrapper aligned-left fill-default"},s.createElement(m.Z,{className:"advanced-search with-add-on","data-testid":"".concat(h,"-list-search-input"),icon:"search",iconPosition:"left",value:z,onChange:function(e){x(e.target.value)},placeholder:E("console:manage.features.oidcScopes.list.searchPlaceholder"),floated:"right",size:"small"})),sortOptions:y,sortStrategy:l.Z,onSortOrderChange:function(e){L(!0===e?"ASC":"DESC")},onSortStrategyChange:function(e,t){F(y.filter((function(e){return e.value===t.value}))[0])}},s.createElement(g.AZ,{featureConfig:C,isLoading:M,list:null!==b&&void 0!==b?b:j,onScopeDelete:function(){return H()},onEmptyListPlaceholderActionClick:function(){return N(!0)},"data-testid":"".concat(h,"-list"),searchResult:null===b||void 0===b?void 0:b.length,getOIDCScopesList:function(){return x("")}}),T&&s.createElement(g.mA,{"data-testid":"add-oidc-scope-wizard-modal",closeWizard:function(){return N(!1)},onUpdate:function(){return H()}})))};E.defaultProps={"data-testid":"oidc-scopes"},t.default=E},50714:function(e,t,n){n.d(t,{Fi:function(){return s},Mz:function(){return m},h7:function(){return f.h7},Xu:function(){return c},_W:function(){return f._W},us:function(){return f.us},Sr:function(){return f.Sr},jX:function(){return l},Rb:function(){return d},LK:function(){return f.LK},Bn:function(){return p},FV:function(){return u}});var o=n(19486),r=n(49227),a=n(12847),i=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()).bind(o.AsgardeoSPAClient.getInstance()),l=function(e,t,n,o,r){var l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s={headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET",params:{after:n,before:o,filter:e,limit:t,recursive:r},url:"".concat(l?a.h.getState().config.endpoints.rootOrganization:a.h.getState().config.endpoints.organizations,"/organizations")};return i(s).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to get organizations.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},s=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations")};return i(t).then((function(e){return 201!==e.status?Promise.reject(new Error("Failed to create organization.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},c=function(e,t){var n={headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET",params:{showChildren:t},url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e)};return i(n).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to get the organization.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},u=function(e,t){var n={data:t,headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e)};return i(n).then((function(e){return 200!==(null===e||void 0===e?void 0:e.status)?Promise.reject(new Error("Failed to update the organization.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},d=function(e,t){var n={data:t,headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.PATCH,url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e)};return i(n).then((function(e){return 200!==(null===e||void 0===e?void 0:e.status)?Promise.reject(new Error("Failed to update the organization.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},m=function(e){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:"DELETE",url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e)};return i(t).then((function(e){return 204!==(null===e||void 0===e?void 0:e.status)?Promise.reject(new Error("Failed to delete the organization.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},p=function(e,t,n){var o={data:n,headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e,"/applications/")+"".concat(t,"/share")};return i(o).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to share the application.")):Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},f=n(83952)},83952:function(e,t,n){n.d(t,{Sr:function(){return l},h7:function(){return s},eI:function(){return c},LK:function(){return u},us:function(){return d},_W:function(){return m}});var o=n(19486),r=n(88742),a=n(12847),i=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()).bind(o.AsgardeoSPAClient.getInstance()),l=function(e,t,n,o){var l={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.HttpMethods.GET,params:{count:n,cursor:o,filter:t},url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e,"/roles")};return i(l).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to get organization roles.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},s=function(e,t){var n={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.HttpMethods.DELETE,url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e,"/roles/").concat(t)};return i(n).then((function(e){return 204!==(null===e||void 0===e?void 0:e.status)?Promise.reject(new Error("Failed to delete the organization role.")):Promise.resolve(null===e||void 0===e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},c=function(e,t){var n={data:t,headers:{"Content-Type":"application/json"},method:r.HttpMethods.POST,url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e,"/roles")};return i(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},u=function(e,t,n){var o={data:n,headers:{"Content-Type":"application/json"},method:r.HttpMethods.PATCH,url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e,"/roles/").concat(t)};return i(o).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e,t){var n={headers:{"Content-Type":"application/json"},method:r.HttpMethods.GET,url:"".concat(a.h.getState().config.endpoints.organizations,"/organizations/").concat(e,"/roles/").concat(t)};return i(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},m=function(){return new Promise((function(e){e({data:[{displayName:"All Permissions",resourcePath:"/permission"},{displayName:"Admin",resourcePath:"/permission/admin"},{displayName:"Manage",resourcePath:"/permission/admin/manage"},{displayName:"Identity",resourcePath:"/permission/admin/manage/identity"},{displayName:"Authentication",resourcePath:"/permission/admin/manage/identity/authentication"},{displayName:"Claim Management",resourcePath:"/permission/admin/manage/identity/claimmgt"},{displayName:"CORS Management",resourcePath:"/permission/admin/manage/identity/cors"},{displayName:"Governance",resourcePath:"/permission/admin/manage/identity/governance"},{displayName:"Group Management",resourcePath:"/permission/admin/manage/identity/groupmgt"},{displayName:"Role Management",resourcePath:"/permission/admin/manage/identity/rolemgt"},{displayName:"Organization Management",resourcePath:"/permission/admin/manage/identity/organizationmgt"},{displayName:"User Management",resourcePath:"/permission/admin/manage/identity/usermgt"},{displayName:"Identity Providers",resourcePath:"/permission/admin/manage/identity/idpmgt"},{displayName:"Applications",resourcePath:"/permission/admin/manage/identity/applicationmgt"},{displayName:"Userstores",resourcePath:"/permission/admin/manage/identity/userstore"},{displayName:"Userstores Config",resourcePath:"/permission/admin/manage/identity/userstore/config"},{displayName:"Sessions",resourcePath:"/permission/admin/manage/identity/authentication/session"},{displayName:"CORS Origins",resourcePath:"/permission/admin/manage/identity/cors/origins"},{displayName:"Roles view",resourcePath:"/permission/admin/manage/identity/rolemgt/view"},{displayName:"Roles create",resourcePath:"/permission/admin/manage/identity/rolemgt/create"},{displayName:"Roles update",resourcePath:"/permission/admin/manage/identity/rolemgt/update"},{displayName:"Roles delete",resourcePath:"/permission/admin/manage/identity/rolemgt/delete"},{displayName:"Organizations view",resourcePath:"/permission/admin/manage/identity/organizationmgt/view"},{displayName:"Organizations create",resourcePath:"/permission/admin/manage/identity/organizationmgt/create"},{displayName:"Organizations update",resourcePath:"/permission/admin/manage/identity/organizationmgt/update"},{displayName:"Organizations delete",resourcePath:"/permission/admin/manage/identity/organizationmgt/delete"},{displayName:"Users view",resourcePath:"/permission/admin/manage/identity/usermgt/view"},{displayName:"Users list",resourcePath:"/permission/admin/manage/identity/usermgt/list"},{displayName:"Users create",resourcePath:"/permission/admin/manage/identity/usermgt/create"},{displayName:"Users update",resourcePath:"/permission/admin/manage/identity/usermgt/update"},{displayName:"Users delete",resourcePath:"/permission/admin/manage/identity/usermgt/delete"},{displayName:"Identity Providers view",resourcePath:"/permission/admin/manage/identity/idpmgt/view"},{displayName:"Identity Providers list",resourcePath:"/permission/admin/manage/identity/idpmgt/list"},{displayName:"Identity Providers create",resourcePath:"/permission/admin/manage/identity/idpmgt/create"},{displayName:"Identity Providers update",resourcePath:"/permission/admin/manage/identity/idpmgt/update"},{displayName:"Identity Providers delete",resourcePath:"/permission/admin/manage/identity/idpmgt/delete"},{displayName:"Applications view",resourcePath:"/permission/admin/manage/identity/applicationmgt/view"},{displayName:"Applications list",resourcePath:"/permission/admin/manage/identity/applicationmgt/list"},{displayName:"Applications create",resourcePath:"/permission/admin/manage/identity/applicationmgt/create"},{displayName:"Applications update",resourcePath:"/permission/admin/manage/identity/applicationmgt/update"},{displayName:"Applications delete",resourcePath:"/permission/admin/manage/identity/applicationmgt/delete"},{displayName:"Userstore view",resourcePath:"/permission/admin/manage/identity/userstore/config/view"},{displayName:"Userstore list",resourcePath:"/permission/admin/manage/identity/userstore/config/list"},{displayName:"Userstore create",resourcePath:"/permission/admin/manage/identity/userstore/config/create"},{displayName:"Userstore update",resourcePath:"/permission/admin/manage/identity/userstore/config/update"},{displayName:"Userstore delete",resourcePath:"/permission/admin/manage/identity/userstore/config/delete"},{displayName:"Group view",resourcePath:"/permission/admin/manage/identity/groupmgt/view"},{displayName:"Governance view",resourcePath:"/permission/admin/manage/identity/governance/view"},{displayName:"CORS Origins view",resourcePath:"/permission/admin/manage/identity/cors/origins/view"},{displayName:"Claim Metadata",resourcePath:"/permission/admin/manage/identity/claimmgt/metadata"},{displayName:"Claim Metadata view",resourcePath:"/permission/admin/manage/identity/claimmgt/metadata/view"},{displayName:"Session view",resourcePath:"/permission/admin/manage/identity/authentication/session/view"}],status:200})}))}},10783:function(e,t,n){n.d(t,{Xh:function(){return w},Bg:function(){return R},eh:function(){return Z},Yr:function(){return k}});var o=n(69883),r=n(8890),a=n(88742),i=n(26278),l=n(96462),s=n(87289),c=n(68905),u=n(64805),d=n(83913),m=n(82791),p=n(70515),f=n(99104),g=n(12847),v=n(10061),h=n(50714),E=n(69626),y=n(58107);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var R=function(e){var t=e.defaultListItemLimit,n=e.isLoading,C=e.list,R=e.onOrganizationDelete,A=e.onListItemClick,b=e.onEmptyListPlaceholderActionClick,O=e.onSearchQueryClear,I=e.searchQuery,T=e.selection,N=e.showListItemActions,_=e.parentOrganization,w=e.isSetStrongerAuth,P=e.isRenderedOnPortal,L=e["data-componentid"],D=(0,u.$G)().t,Z=(0,d.I0)(),F=(0,d.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),k=(0,d.v9)((function(e){return e.config.ui.features})),z=S((0,c.useState)(!1),2),x=z[0],U=z[1],j=S((0,c.useState)(void 0),2),M=j[0],G=j[1],H=g.lD.getInstance(),B=function(){var e,t;return I&&((0,s.Z)(C)||0===(null===C||void 0===C||null===(e=C.organizations)||void 0===e?void 0:e.length))?c.createElement(l.EmptyPlaceholder,{action:c.createElement(l.LinkButton,{onClick:O},D("console:manage.placeholders.emptySearchResult.action")),image:(0,v.jF)().emptySearch,imageSize:"tiny",title:D("console:manage.placeholders.emptySearchResult.title"),subtitle:[D("console:manage.placeholders.emptySearchResult.subtitles.0",{query:I.split("name co ")[1]}),D("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-componentid":"".concat(L,"-empty-search-placeholder")}):(0,s.Z)(C)||0===(null===C||void 0===C||null===(t=C.organizations)||void 0===t?void 0:t.length)?c.createElement(l.EmptyPlaceholder,{className:P?"":"list-placeholder",action:b&&c.createElement(o.di,{when:o.TA.ORGANIZATION_WRITE},c.createElement(l.PrimaryButton,{onClick:function(){H.publish(L+"-click-new-organization-button"),b()}},c.createElement(p.Z,{name:"add"}),D("console:manage.features.organizations.placeholders.emptyList.action"))),image:(0,v.jF)().newList,imageSize:"tiny",subtitle:[_?D("console:manage.features.organizations.placeholders.emptyList.subtitles.3",{parent:_.name}):D("console:manage.features.organizations.placeholders.emptyList.subtitles.0")],"data-componentid":"".concat(L,"-empty-placeholder")}):null};return c.createElement(c.Fragment,null,c.createElement(l.DataTable,{className:"organizations-table",isLoading:n,loadingStateOptions:{count:null!==t&&void 0!==t?t:g.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:!w&&function(){if(N)return[{"data-componentid":"".concat(L,"-item-go-to-organization-button"),icon:function(){return"arrow alternate circle right"},onClick:function(e,t){return A&&A(e,t)},popupText:function(){return D("common:view")},renderer:"semantic-icon"},{"data-componentid":"".concat(L,"-item-edit-button"),hidden:function(){return!(0,r.isFeatureEnabled)(null===k||void 0===k?void 0:k.organizations,y.a5.FEATURE_DICTIONARY.get("ORGANIZATION_UPDATE"))},icon:function(){var e,t;return(0,r.hasRequiredScopes)(null===k||void 0===k?void 0:k.organizations,null===k||void 0===k||null===(e=k.organizations)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,F)?"pencil alternate":"eye"},onClick:function(e,t){return n=t.id,void g.m8.push({pathname:g.$x.getPaths().get("ORGANIZATION_UPDATE").replace(":id",n)});var n},popupText:function(){var e,t;return(0,r.hasRequiredScopes)(null===k||void 0===k?void 0:k.organizations,null===k||void 0===k||null===(e=k.organizations)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,F)?D("common:edit"):D("common:view")},renderer:"semantic-icon"},{"data-componentid":"".concat(L,"-item-delete-button"),hidden:function(){var e,t;return!(0,r.hasRequiredScopes)(null===k||void 0===k?void 0:k.organizations,null===k||void 0===k||null===(e=k.organizations)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.delete,F)},icon:function(){return"trash alternate"},onClick:function(e,t){U(!0),G(t)},popupText:function(){return D("common:delete")},renderer:"semantic-icon"}]}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return c.createElement(m.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(L,"-item-heading")},c.createElement(l.GenericIcon,{bordered:!0,defaultIcon:!0,relaxed:"very",size:"micro",shape:"rounded",spaced:"right",hoverable:!1,icon:E.w}),e.id===y.a5.ROOT_ORGANIZATION_ID&&c.createElement(m.Z.Content,null,c.createElement(p.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"})),c.createElement(m.Z.Content,null,e.name,c.createElement(m.Z.Subheader,{className:"truncate ellipsis","data-componentid":"".concat(L,"-item-sub-heading")},"Organization Id:",c.createElement(f.Z,{size:"tiny"},e.id))))},title:D("console:manage.features.organizations.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:D("console:manage.features.organizations.list.columns.actions")}],data:null===C||void 0===C?void 0:C.organizations,onRowClick:function(e,t){A&&A(e,t)},placeholders:B(),selectable:T,showHeader:!1,transparent:!n&&null!==B(),"data-componentid":L}),M&&c.createElement(l.ConfirmationModal,{onClose:function(){return U(!1)},type:"negative",open:x,assertionHint:D("console:manage.features.organizations.confirmations.deleteOrganization.assertionHint"),assertionType:"checkbox",primaryAction:D("common:confirm"),secondaryAction:D("common:cancel"),onSecondaryActionClick:function(){U(!1)},onPrimaryActionClick:function(){return e=M.id,void(0,h.Mz)(e).then((function(){Z((0,i.addAlert)({description:D("console:manage.features.organizations.notifications.deleteOrganization.success.description"),level:a.AlertLevels.SUCCESS,message:D("console:manage.features.organizations.notifications.deleteOrganization.success.message")})),U(!1),R()})).catch((function(e){if(U(!1),e.response&&e.response.data&&e.response.data.description)return"ORG-60007"===e.response.data.code?void Z((0,i.addAlert)({description:D("console:manage.features.organizations.notifications.deleteOrganizationWithSubOrganizationError",{organizationName:M.name}),level:a.AlertLevels.ERROR,message:D("console:manage.features.organizations.notifications.deleteOrganization.error.message")})):void Z((0,i.addAlert)({description:e.response.data.description,level:a.AlertLevels.ERROR,message:D("console:manage.features.organizations.notifications.deleteOrganization.error.message")}));Z((0,i.addAlert)({description:D("console:manage.features.organizations.notifications.deleteOrganization.genericError.description"),level:a.AlertLevels.ERROR,message:D("console:manage.features.organizations.notifications.deleteOrganization.genericError.message")}))}));var e},"data-componentid":"".concat(L,"-delete-confirmation-modal"),closeOnDimmerClick:!1},c.createElement(l.ConfirmationModal.Header,{"data-componentid":"".concat(L,"-delete-confirmation-modal-header")},D("console:manage.features.organizations.confirmations.deleteOrganization.header")),c.createElement(l.ConfirmationModal.Message,{attached:!0,negative:!0,"data-componentid":"".concat(L,"-delete-confirmation-modal-message")},D("console:manage.features.organizations.confirmations.deleteOrganization.message")),c.createElement(l.ConfirmationModal.Content,{"data-componentid":"".concat(L,"-delete-confirmation-modal-content")},D("console:manage.features.organizations.confirmations.deleteOrganization.content"))))};R.defaultProps={"data-componentid":"organization-list",selection:!0,showListItemActions:!0};var A=n(23339),b=n(85027),O=n(23177);function I(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){I(a,o,r,i,l,"next",e)}function l(e){I(a,o,r,i,l,"throw",e)}i(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var w=function(e){var t=e.closeWizard,n=e.parent,o=e.onUpdate,r=e["data-componentid"],s=(0,u.$G)().t,m=(0,d.I0)(),p=N((0,c.useState)(!1),2),f=p[0],v=p[1],E=N((0,c.useState)(y.AK.STRUCTURAL),2),S=E[0],C=(E[1],(0,c.useRef)()),R=g.lD.getInstance(),I=(0,d.v9)((function(e){return e.organization.organization})),_=function(){var e=T(regeneratorRuntime.mark((function e(r){var l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={description:null===r||void 0===r?void 0:r.description,name:null===r||void 0===r?void 0:r.name,parentId:null!==(l=null===n||void 0===n?void 0:n.id)&&void 0!==l?l:I.id,type:y.AK.TENANT},v(!0),(0,h.Fi)(c).then((function(){R.compute,t(),m((0,i.addAlert)({description:s("console:manage.features.organizations.notifications.addOrganization.success.description"),level:a.AlertLevels.SUCCESS,message:s("console:manage.features.organizations.notifications.addOrganization.success.message")})),o&&o()})).catch((function(e){null!==e&&void 0!==e&&e.description?m((0,i.addAlert)({description:s("console:manage.features.organizations.notifications.addOrganization.error.description",{description:e.description}),level:a.AlertLevels.ERROR,message:s("console:manage.features.organizations.notifications.addOrganization.error.message")})):m((0,i.addAlert)({description:s("console:manage.features.organizations.notifications.addOrganization.genericError.description"),level:a.AlertLevels.ERROR,message:s("console:manage.features.organizations.notifications.addOrganization.genericError.message")}))})).finally((function(){v(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=T(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},null!==t&&void 0!==t&&t.name||(n.name=s("console:manage.features.organizations.forms.addOrganization.name.validation.empty")),null!==t&&void 0!==t&&t.domainName||S!==y.AK.TENANT||(n.domainName=s("console:manage.features.organizations.forms.addOrganization.domainName.validation.empty")),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){t()};return c.createElement(c.Fragment,null,c.createElement(b.Z,{open:!0,className:"wizard application-create-wizard",size:"tiny",dimmer:"blurring",onClose:P,closeOnDimmerClick:!1,closeOnEscape:!0,"data-componentid":"".concat(r,"-modal")},c.createElement(b.Z.Header,{className:"wizard-header"},s("console:manage.features.organizations.modals.addOrganization.header"),c.createElement(l.Heading,{as:"h6","data-componentid":"".concat(r,"-subheading")},null!==n&&void 0!==n&&n.name?s("console:manage.features.organizations.modals.addOrganization.subtitle1",{parent:null===n||void 0===n?void 0:n.name}):s("console:manage.features.organizations.modals.addOrganization.subtitle2"))),c.createElement(b.Z.Content,null,c.createElement(O.Z,null,c.createElement(O.Z.Row,{columns:1},c.createElement(O.Z.Column,{width:16},c.createElement(A.l0,{uncontrolledForm:!1,onSubmit:_,validate:w,triggerSubmit:function(e){return C.current=e}},c.createElement(A.gN.Input,{ariaLabel:"Organization Name",inputType:"name",name:"name",label:s("console:manage.features.organizations.forms.addOrganization.name.label"),required:!0,placeholder:s("console:manage.features.organizations.forms.addOrganization.name.placeholder"),maxLength:y.Xf,minLength:y.H8,"data-componentid":"".concat(r,"-organization-name-input"),width:16}),c.createElement(A.gN.Input,{ariaLabel:"Description",inputType:"description",name:"description",label:s("console:manage.features.organizations.forms.addOrganization.description.label"),required:!1,placeholder:s("console:manage.features.organizations.forms.addOrganization.description.placeholder"),maxLength:y.yt,minLength:y.nq,"data-componentid":"".concat(r,"-description-input"),width:16})))))),c.createElement(b.Z.Actions,null,c.createElement(O.Z,null,c.createElement(O.Z.Row,{column:1},c.createElement(O.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(l.LinkButton,{floated:"left",onClick:P},s("common:cancel"))),c.createElement(O.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(l.PrimaryButton,{floated:"right",onClick:function(){(null===C||void 0===C?void 0:C.current)&&(null===C||void 0===C||C.current())},"data-componentid":"".concat(r,"-next-button"),loading:f,disabled:f},s("common:register"))))))))};w.defaultProps={"data-componentid":"organization-create-wizard"};var P=n(83952);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Z=function(e){var t=e.advancedSearch,n=e.defaultListItemLimit,f=e.featureConfig,v=e.isLoading,h=e.list,E=e.onOrganizationRoleDelete,S=e.onListItemClick,C=e.onEmptyListPlaceholderActionClick,R=e.onSearchQueryClear,A=e.organizationId,b=e.searchQuery,O=e.selection,I=e.showListItemActions,T=e.isSetStrongerAuth,N=e.isRenderedOnPortal,_=e["data-testid"],w=(e["data-componentid"],(0,u.$G)().t),D=(0,d.I0)(),Z=(0,d.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),F=L((0,c.useState)(!1),2),k=F[0],z=F[1],x=L((0,c.useState)(void 0),2),U=x[0],j=x[1],M=L((0,l.useConfirmationModalAlert)(),3),G=M[0],H=M[1],B=M[2];return c.createElement(c.Fragment,null,c.createElement(l.DataTable,{className:"organization-roles-table",externalSearch:t,isLoading:v,loadingStateOptions:{count:null!==n&&void 0!==n?n:g.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:!T&&function(){if(I)return[{"data-testid":"".concat(_,"-item-edit-button"),hidden:function(){return!(0,r.isFeatureEnabled)(null===f||void 0===f?void 0:f.organizationsRoles,y.Rw.FEATURE_DICTIONARY.get("ORGANIZATION_ROLE_UPDATE"))},icon:function(e){var t,n;return(0,r.hasRequiredScopes)(null===f||void 0===f?void 0:f.organizationsRoles,null===f||void 0===f||null===(t=f.organizationsRoles)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,Z)&&e.displayName!==y.Rw.ORG_CREATOR_ROLE_NAME?"pencil alternate":"eye"},onClick:function(e,t){return function(e){g.m8.push({pathname:g.$x.getPaths().get("ORGANIZATION_ROLE_UPDATE").replace(":id",e)})}(t.id)},popupText:function(e){var t,n;return(0,r.hasRequiredScopes)(null===f||void 0===f?void 0:f.organizationsRoles,null===f||void 0===f||null===(t=f.organizationsRoles)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.update,Z)&&e.displayName!==y.Rw.ORG_CREATOR_ROLE_NAME?w("common:edit"):w("common:view")},renderer:"semantic-icon"},{"data-testid":"".concat(_,"-item-delete-button"),hidden:function(e){var t,n;return!(0,r.hasRequiredScopes)(null===f||void 0===f?void 0:f.organizationsRoles,null===f||void 0===f||null===(t=f.organizationsRoles)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.delete,Z)||e.displayName===y.Rw.ORG_CREATOR_ROLE_NAME},icon:function(){return"trash alternate"},onClick:function(e,t){z(!0),j(t)},popupText:function(){return w("common:delete")},renderer:"semantic-icon"}]}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return c.createElement(m.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(_,"-item-heading")},c.createElement(l.AppAvatar,{image:c.createElement(l.AnimatedAvatar,{name:e.displayName,size:"mini","data-testid":"".concat(_,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(_,"-item-image")}),c.createElement(m.Z.Content,null,e.displayName))},title:w("console:manage.features.organizations.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:w("console:manage.features.organizations.list.columns.actions")}],data:h,onRowClick:function(e,t){S&&S(e,t)},placeholders:b&&((0,s.Z)(h)||0===(null===h||void 0===h?void 0:h.length))?c.createElement(l.EmptyPlaceholder,{action:c.createElement(l.LinkButton,{onClick:R},w("console:manage.placeholders.emptySearchResult.action")),image:(0,g.jF)().emptySearch,imageSize:"tiny",title:w("console:manage.placeholders.emptySearchResult.title"),subtitle:[w("console:manage.placeholders.emptySearchResult.subtitles.0",{query:b}),w("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(_,"-empty-search-placeholder")}):(0,s.Z)(h)||0===(null===h||void 0===h?void 0:h.length)?c.createElement(l.EmptyPlaceholder,{className:N?"":"list-placeholder",action:C&&c.createElement(o.di,{when:o.TA.ORGANIZATION_ROLES_WRITE},c.createElement(l.PrimaryButton,{onClick:function(){C()}},c.createElement(p.Z,{name:"add"}),w("console:manage.features.roles.list.emptyPlaceholders.search.action"))),image:(0,g.jF)().newList,imageSize:"tiny",subtitle:["There are no organization roles at the momemnt"],"data-testid":"".concat(_,"-empty-placeholder")}):void 0,selectable:O,showHeader:!1,"data-testid":_}),U&&c.createElement(l.ConfirmationModal,{onClose:function(){return z(!1)},type:"negative",open:k,assertionHint:w("console:manage.features.roles.list.confirmations.deleteItem.assertionHint"),assertionType:"checkbox",primaryAction:w("common:confirm"),secondaryAction:w("common:cancel"),onSecondaryActionClick:function(){z(!1),H(null)},onPrimaryActionClick:function(){return e=U.id,void(0,P.h7)(A,e).then((function(){D((0,i.addAlert)({description:w("console:manage.features.organizations.notifications.deleteOrganization.success.description"),level:a.AlertLevels.SUCCESS,message:w("console:manage.features.organizations.notifications.deleteOrganization.success.message")})),z(!1),E()})).catch((function(e){e.response&&e.response.data&&e.response.data.description?D(H({description:e.response.data.description,level:a.AlertLevels.ERROR,message:w("console:manage.features.organizations.notifications.deleteOrganization.error.message")})):D(H({description:w("console:manage.features.organizations.notifications.deleteOrganization.genericError.description"),level:a.AlertLevels.ERROR,message:w("console:manage.features.organizations.notifications.deleteOrganization.genericError.message")}))}));var e},"data-testid":"".concat(_,"-delete-confirmation-modal"),closeOnDimmerClick:!1},c.createElement(l.ConfirmationModal.Header,{"data-testid":"".concat(_,"-delete-org-role-confirmation-modal-header")},w("console:manage.features.roles.list.confirmations.deleteItem.header")),c.createElement(l.ConfirmationModal.Message,{attached:!0,negative:!0,"data-testid":"".concat(_,"-delete-org-role-confirmation-modal-message")},w("console:manage.features.roles.list.confirmations.deleteItem.message",{type:"role"})),c.createElement(l.ConfirmationModal.Content,{"data-testid":"".concat(_,"-delete-confirmation-modal-content")},c.createElement("div",{className:"modal-alert-wrapper"}," ",G&&B),w("console:manage.features.roles.list.confirmations.deleteItem.content",{type:"role"}))))};Z.defaultProps={"data-componentid":"organization-roles","data-testid":"organization-role-list",selection:!0,showListItemActions:!0};var F=n(6997),k=function(e){var t=e.children;return c.createElement(c.Fragment,null,F.F.isCurrentOrganizationRoot()?t:null)}},11603:function(e,t,n){var o=n(8890),r=n(88742),a=n(26278),i=n(95823),l=n(96462),s=n(68905),c=n(64805),u=n(83913),d=n(2120),m=n(39145),p=n(99104),f=n(84504),g=n(30372),v=n(74364),h=n(5554),E=n(1410),y=n(7626),S=n(67897),C=n(73047),R=n(12847),A=n(50714),b=n(58107),O=n(6997);function I(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"===typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var w=function(e){var t=e["data-componentid"],n=(0,c.$G)().t,N=(0,u.I0)(),_=(0,u.v9)((function(e){return e.organization.organization})),w=(0,u.v9)((function(e){return e.config.ui.features})),P=(0,u.v9)((function(e){return e.auth.allowedScopes})),L=(0,u.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.tenantDomain})),D=T((0,s.useState)([]),2),Z=D[0],F=D[1],k=T((0,s.useState)(""),2),z=k[0],x=k[1],U=T((0,s.useState)(),2),j=U[0],M=U[1],G=T((0,s.useState)(),2),H=G[0],B=G[1],W=T((0,s.useState)(!1),2),V=W[0],Y=W[1],q=T((0,s.useState)(""),2),$=q[0],K=q[1],Q=(0,s.useMemo)((function(){var e,t;return isOrganizationManagementEnabled&&(L===R.$x.getSuperTenant()||window.AppUtils.getConfig().organizationName)&&(0,o.hasRequiredScopes)(null===w||void 0===w?void 0:w.organizations,null===w||void 0===w||null===(e=w.organizations)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.read,P)&&S.organizationConfigs.showOrganizationDropdown}),[S.organizationConfigs.showOrganizationDropdown,L,w.organizations]),X=(0,s.useCallback)((function(e,t,o){(0,A.jX)(e,5,t,o,!1,!1).then((function(e){if(e&&e.organizations){var t=[b.a5.ROOT_ORGANIZATION].concat(I(null===e||void 0===e?void 0:e.organizations));F(t),J(e.links)}else F([b.a5.ROOT_ORGANIZATION]),J(e.links)})).catch((function(e){F([b.a5.ROOT_ORGANIZATION]),null!==e&&void 0!==e&&e.description?N((0,a.addAlert)({description:e.description,level:r.AlertLevels.ERROR,message:n("console:manage.features.organizations.notifications.getOrganizationList.error.message")})):N((0,a.addAlert)({description:n("console:manage.features.organizations.notifications.getOrganizationList.genericError.description"),level:r.AlertLevels.ERROR,message:n("console:manage.features.organizations.notifications.getOrganizationList.genericError.message")}))}))}),[]),J=function(e){M(void 0),B(void 0),e&&0!==e.length&&e.forEach((function(e){if("next"===e.rel){var t=e.href.toString().split("after=")[1];M(t)}else{var n=e.href.toString().split("before=")[1];B(n)}}))};(0,s.useEffect)((function(){V&&X(z,null,null)}),[X,z,V]);var ee=s.createElement("span",{className:"tenant-dropdown-trigger","data-componentid":"component-dropdown-trigger"},s.createElement(l.GenericIcon,{transparent:!0,inline:!0,className:"tenant-dropdown-trigger-icon","data-componentid":"component-dropdown-trigger-icon","data-testid":"tenant-dropdown-trigger-icon",icon:(0,R.FL)().tenantIcon,size:"micro",fill:"white",spaced:"right"}),s.createElement("div",{className:"tenant-dropdown-trigger-display-name ellipsis","data-componentid":"component-dropdown-display-name"},_?null===_||void 0===_?void 0:_.name:s.createElement(d.Z,{"data-componentid":"organization-loading-placeholder"},s.createElement(d.Z.Line,null)))),te=function(e,t){var n;return s.createElement(m.Z.Group,{className:"tenant-item-wrapper",unstackable:!0},s.createElement(m.Z,{className:"header",key:"".concat(null===e||void 0===e?void 0:e.name,"-organization-item"),onClick:t?function(){!function(e){var t="";t=O.F.isRootOrganization(e)?"".concat(window.AppUtils.getConfig().tenantPathWithoutSuperTenant," /").concat(window.AppUtils.getConfig().appBase):window.AppUtils.getConfig().tenantPathWithoutSuperTenant+"/o/"+e.id+"/"+window.AppUtils.getConfig().appBase,i.SessionStorageUtils.clearItemFromSessionStorage("auth_callback_url_console"),window.location.replace(t),Y(!1)}(e)}:null},s.createElement(l.GenericIcon,{transparent:!0,inline:!0,className:"associated-tenant-icon","data-componentid":"associated-organization-icon",icon:(0,R.FL)().tenantIcon,size:"mini"}),s.createElement(m.Z.Content,{verticalAlign:"middle"},s.createElement(m.Z.Description,null,s.createElement("div",{className:"name ellipsis tenant-description","data-componentid":"organization-dropdown-display-name"},s.createElement("div",null,s.createElement("div",null,null!==(n=null===e||void 0===e?void 0:e.name)&&void 0!==n?n:s.createElement(d.Z,null,s.createElement(d.Z.Line,null))),s.createElement(p.Z,{size:"mini"},e.id)),s.createElement("div",{className:"manage-icon-wrapper"},!O.F.isRootOrganization(e)&&s.createElement(l.GenericIcon,{transparent:!0,inline:!0,className:"manage-tenant-icon","data-componentid":"associated-component-icon",icon:(0,R.Uz)().serverConfigurations,onClick:function(t){R.m8.push({pathname:R.$x.getPaths().get("ORGANIZATION_UPDATE").replace(":id",null===e||void 0===e?void 0:e.id)}),Y(!1),t.stopPropagation()}})))))))},ne=function(e){var t=e.trim();x(t?"name co ".concat(t):"")},oe=function(e){e?X(z,j,null):X(z,null,H)},re=s.createElement("div",{className:"tenant-pagination organizations"},s.createElement(f.Z,{disabled:void 0===H,onClick:function(){return oe(!1)}},n("common:previous")),s.createElement(f.Z,{disabled:void 0===j,onClick:function(){return oe(!0)}},n("common:next"))),ae=s.createElement(g.Z.Item,{className:"tenant-dropdown-wrapper",key:"tenant-dropdown"},s.createElement(v.Z,{onBlur:function(){x(""),M(void 0),B(void 0),Y(!1)},item:!0,trigger:ee,floating:!0,pointing:"top left",className:"tenant-dropdown","data-componentid":"component-dropdown",onClick:function(){Y(!V)},open:V},s.createElement(v.Z.Menu,{onClick:function(e){e.stopPropagation()}},te(_,!1),s.createElement(h.Z,null),s.createElement(m.Z.Group,{className:"search-bar"},s.createElement("div",{className:"advanced-search-wrapper aligned-left fill-default"},s.createElement(E.Z,{className:"advanced-search with-add-on","data-componentid":"list-search-input",icon:"search",iconPosition:"left",value:$,onChange:function(e){K(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&ne($),e.stopPropagation()},placeholder:n("console:manage.features.organizations.switching.search.placeholder"),floated:"right",size:"small",action:$?s.createElement(y.Z,{trigger:s.createElement(f.Z,{"data-componentid":"".concat(t,"-clear-button"),basic:!0,compact:!0,className:"input-add-on organizations"},s.createElement(l.GenericIcon,{size:"nano",defaultIcon:!0,transparent:!0,icon:C.r,onClick:function(){K(""),ne("")}})),position:"top center",content:n("console:common.advancedSearch.popups.clear"),inverted:!0}):null}))),Z?function(){if(Array.isArray(Z))return s.createElement(m.Z.Group,{className:"tenants-list organizations",unstackable:!0,"data-componentid":"associated-organizations-container"},Z.length>0?Z.map((function(e,t){return e.id!==(null===_||void 0===_?void 0:_.id)?te(e,!0):null})):s.createElement(m.Z,{className:"empty-list"},s.createElement(m.Z.Content,{verticalAlign:"middle"},s.createElement(m.Z.Description,null,s.createElement("div",{className:"message"},n("console:manage.features.organizations.switching.emptyList"))))))}():null,s.createElement(h.Z,null),re)));return s.createElement(s.Fragment,null,Q?ae:null)};t.Z=w,w.defaultProps={"data-componentid":"organization-switch-dropdown"}},69626:function(e,t,n){n.d(t,{w:function(){return r},U:function(){return o}});var o=function(e,t){return{organizations:"".concat(e,"/api/server/v1"),rootOrganization:"".concat(t,"/api/server/v1")}},r=n(19722).r},58107:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Fn:function(){return u},eT:function(){return d},yt:function(){return v},nq:function(){return g},Xf:function(){return f},H8:function(){return p},AK:function(){return l},a5:function(){return s},Rw:function(){return c},$R:function(){return m}});var l,s=r((function e(){a(this,e)}));i(s,"FEATURE_DICTIONARY",(new Map).set("ORGANIZATION_CREATE","organizations.create").set("ORGANIZATION_UPDATE","organizations.update").set("ORGANIZATION_DELETE","organizations.delete").set("ORGANIZATION_READ","organizations.read")),i(s,"ROOT_ORGANIZATION_ID","10084a8d-113f-4211-a0d5-efe36b082211"),i(s,"ROOT_ORGANIZATION",{id:s.ROOT_ORGANIZATION_ID,name:"Super",ref:""}),function(e){e.STRUCTURAL="STRUCTURAL",e.TENANT="TENANT"}(l||(l={}));var c=r((function e(){a(this,e)}));i(c,"FEATURE_DICTIONARY",(new Map).set("ORGANIZATION_ROLE_CREATE","organization-roles.create").set("ORGANIZATION_ROLE_UPDATE","organization-roles.update").set("ORGANIZATION_ROLE_DELETE","organization-roles.delete").set("ORGANIZATION_ROLE_READ","organization-roles.read")),i(c,"SUPER_ADMIN_PERMISSION_KEY","/permission/protected"),i(c,"ORG_CREATOR_ROLE_NAME","org-creator");var u="Application/",d="Internal",m="Primary",p=3,f=32,g=3,v=300},6997:function(e,t,n){n.d(t,{F:function(){return i}});var o=n(26072),r=n(58107);function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"isRootOrganization",value:function(e){return!e||e.id===r.a5.ROOT_ORGANIZATION_ID}},{key:"isCurrentOrganizationRoot",value:function(){var e,t;return(null===(e=o.h.getState().organization)||void 0===e||null===(t=e.organization)||void 0===t?void 0:t.id)===r.a5.ROOT_ORGANIZATION_ID}}],(n=null)&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},7789:function(e,t,n){n.d(t,{u1:function(){return v},tB:function(){return E},Ab:function(){return g},dH:function(){return p},Tj:function(){return m},QM:function(){return f},Gw:function(){return h}});var o=n(19486),r=n(82817),a=n(88742),i=n(12847);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=s((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));c(u,"GET_REPO_CONFIG_LIST_INVALID_STATUS_CODE_ERROR","Received an invalid status code while fetching remote repo config list."),c(u,"GET_REPO_CONFIG_LIST_ERROR","Error occurred while fetching the repo config list."),c(u,"TRIGGER_CONFIG_DEPLOYMENT_INVALID_STATUS_CODE_ERROR","Received an invalid status code while deploying the remote repo config."),c(u,"TRIGGER_CONFIG_DEPLOYMENT_ERROR","Error occurred while deploying the remote repo config."),c(u,"GET_CONFIG_DEPLOYMENT_DETAILS_INVALID_STATUS_CODE_ERROR","Received an invalid status code while fetching remote repo config deployment details."),c(u,"GET_CONFIG_DEPLOYMENT_DETAILS_ERROR","Error occurred while fetching the remote repo config deployment details."),c(u,"UPDATE_REPO_CONFIG_INVALID_STATUS_CODE_ERROR","Received an invalid status code while updating remote repo config."),c(u,"UPDATE_REPO_CONFIG_ERROR","Error occurred while updating the remote repo config."),c(u,"DELETE_REPO_CONFIG_INVALID_STATUS_CODE_ERROR","Received an invalid status code while deleting remote repo config."),c(u,"DELETE_REPO_CONFIG_ERROR","Error occurred while deleting the remote repo config."),c(u,"CREATE_REPO_CONFIG_INVALID_STATUS_CODE_ERROR","Received an invalid status code while creating a remote repo config."),c(u,"CREATE_REPO_CONFIG_CREATE_ERROR","Error occurred while creating a repo config."),c(u,"GET_REPO_CONFIG_INVALID_STATUS_CODE_ERROR","Received an invalid status code while fetching remote repo config details."),c(u,"GET_REPO_CONFIG_ERROR","Error occurred while fetching the repo config.");var d=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),m=function(){var e={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:i.h.getState().config.endpoints.remoteFetchConfig};return d(e).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(u.GET_REPO_CONFIG_LIST_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new r.IdentityAppsApiException(u.GET_REPO_CONFIG_LIST_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},p=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:i.h.getState().config.endpoints.remoteFetchConfig+"/"+e};return d(t).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(u.GET_REPO_CONFIG_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new r.IdentityAppsApiException(u.GET_REPO_CONFIG_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},f=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.POST,url:i.h.getState().config.endpoints.remoteFetchConfig+"/"+e+"/trigger"};return d(t).then((function(e){if(202!==e.status)throw new r.IdentityAppsApiException(u.TRIGGER_CONFIG_DEPLOYMENT_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new r.IdentityAppsApiException(u.TRIGGER_CONFIG_DEPLOYMENT_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},g=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:i.h.getState().config.endpoints.remoteFetchConfig+"/"+e+"/status"};return d(t).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(u.GET_CONFIG_DEPLOYMENT_DETAILS_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new r.IdentityAppsApiException(u.GET_CONFIG_DEPLOYMENT_DETAILS_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},v=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.POST,url:i.h.getState().config.endpoints.remoteFetchConfig};return d(t).then((function(e){if(201!==e.status)throw new r.IdentityAppsApiException(u.CREATE_REPO_CONFIG_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new r.IdentityAppsApiException(u.CREATE_REPO_CONFIG_CREATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},h=function(e,t){var n={data:t,headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.PATCH,url:i.h.getState().config.endpoints.remoteFetchConfig+"/"+e};return d(n).then((function(e){return Promise.resolve(e)})).catch((function(e){throw new r.IdentityAppsApiException(u.UPDATE_REPO_CONFIG_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},E=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.DELETE,url:i.h.getState().config.endpoints.remoteFetchConfig+"/"+e};return d(t).then((function(e){return Promise.resolve(e)})).catch((function(e){throw new r.IdentityAppsApiException(u.DELETE_REPO_CONFIG_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},60579:function(e,t,n){n.d(t,{jF:function(){return a},Kk:function(){return l},TU:function(){return i}});var o=n(82754),r=n(37481),a=function(){return{add:o.r}},i=function(){return{appConfigRepo:r.Z}},l=function(e){return{remoteFetchConfig:"".concat(e,"/api/server/v1/remote-fetch")}}},29391:function(e,t,n){n.d(t,{j9:function(){return I},Ab:function(){return o.Ab},Kk:function(){return T.Kk},dH:function(){return o.dH},Tj:function(){return o.Tj},QM:function(){return o.QM}});var o=n(7789),r=n(88742),a=n(26278),i=n(4740),l=n(70787),s=n.n(l),c=n(68905),u=n(64805),d=n(83913),m=n(30372),p=n(70515),f=n(7626),g=n(84504),v=n(96462),h=n(85027),E=n(23177);function y(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A=function(e){var t,n=e.isOpen,i=e.onClose,l=e.remoteDeployment,m=e["data-componentid"],f=(0,d.I0)(),g=(0,u.$G)().t,C=S((0,c.useState)([]),2),R=C[0],A=C[1],b=S((0,c.useState)(void 0),2),O=b[0],I=b[1],T=S((0,c.useState)(!1),2),N=T[0],_=T[1];(0,c.useEffect)((function(){(0,o.Ab)(l.id).then((function(e){I(e.data)})).catch((function(){f((0,a.addAlert)({description:g("console:manage.features.remoteFetch.notifications.getConfigDeploymentDetails.genericError.description"),level:r.AlertLevels.ERROR,message:g("console:manage.features.remoteFetch.notifications.getConfigDeploymentDetails.genericError.message")}))}))}),[]);var w=function(e,t){var n=t.index,o=y(R);if(o.includes(n)){var r=o.indexOf(n);o.splice(r,1)}else o.push(n);A(o)},P=function(e){var t=s()(new Date),n=s()(e);return"Last deployed "+s().duration(t.diff(n)).humanize()+" ago"};return c.createElement(h.Z,{open:n,onClose:i,dimmer:"blurring",size:"small",className:"wizard","data-componentid":"".concat(m,"-modal")},c.createElement(h.Z.Header,{className:"wizard-header"},g("console:manage.features.remoteFetch.modal.appStatusModal.heading"),c.createElement(v.Hint,{icon:"linkify",className:"mt-0 mb-1"},null===l||void 0===l||null===(t=l.repositoryManagerAttributes)||void 0===t?void 0:t.uri)),c.createElement(h.Z.Content,{scrolling:!0},c.createElement(E.Z,{className:"wizard-summary","data-componentid":m},c.createElement(E.Z.Row,null,c.createElement(E.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},c.createElement(v.SegmentedAccordion,{fluid:!0,"data-componentid":m},O&&(null===O||void 0===O?void 0:O.remoteFetchRevisionStatuses.length)>0&&(null===O||void 0===O?void 0:O.remoteFetchRevisionStatuses.map((function(e,t){return"FAIL"===e.deployedStatus&&c.createElement(c.Fragment,null,c.createElement(v.SegmentedAccordion.Title,{id:e.itemName,key:t,"data-componentid":"".concat(m,"-title"),active:R.includes(t),index:t,onClick:w,content:c.createElement("div",{className:"floated left text-left"},c.createElement(p.Z.Group,{className:"mr-2",size:"large"},c.createElement(p.Z,{name:"fork"}),c.createElement(p.Z,{color:"red",corner:"bottom right",name:"cancel"})),e.itemName,c.createElement(v.Hint,{icon:"info circle",className:"mt-1 mb-1"},P(e.deployedTime))),hideChevron:!1}),c.createElement(v.SegmentedAccordion.Content,{active:R.includes(t),"data-componentid":"".concat(m,"-content")},c.createElement(v.CodeEditor,{className:"text-left",lint:!0,language:"htmlmixed",sourceCode:e.deploymentErrorReport,options:{lineWrapping:!0},readOnly:!0,theme:"dark"})))})))))))),c.createElement(h.Z.Actions,null,c.createElement(E.Z,null,c.createElement(E.Z.Row,{column:1},c.createElement(E.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(v.LinkButton,{floated:"left",onClick:function(){return i()}},g("common:close"))),c.createElement(E.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(v.PrimaryButton,{floated:"right","data-componentid":"".concat(m,"-import-button"),loading:N,disabled:N,onClick:function(){_(!0),(0,o.QM)(l.id).then((function(){f((0,a.addAlert)({description:g("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.success.description"),level:r.AlertLevels.SUCCESS,message:g("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.success.message")}))})).catch((function(){f((0,a.addAlert)({description:g("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.genericError.description"),level:r.AlertLevels.ERROR,message:g("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.genericError.message")}))})).finally((function(){_(!1)}))}},g("console:manage.features.remoteFetch.modal.appStatusModal.primaryButton")))))))};function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var I=function(e){var t,n,l,v,h,E,y,S,C,R,O,I=e["data-componentid"],T=b((0,c.useState)(void 0),2),N=T[0],_=T[1],w=b((0,c.useState)(!1),2),P=w[0],L=w[1],D=b((0,c.useState)(void 0),2),Z=D[0],F=D[1],k=(0,d.I0)(),z=(0,u.$G)().t;(0,c.useEffect)((function(){x()}),[void 0!=Z]);var x=function(){(0,o.Tj)().then((function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.remotefetchConfigurations&&Array.isArray(e.data.remotefetchConfigurations)&&e.data.remotefetchConfigurations[0]){var n=e.data.remotefetchConfigurations[0];e.data.count>0&&(F(n),(0,o.dH)(n.id).then((function(e){_(e.data)})).catch((function(){k((0,a.addAlert)({description:z("console:manage.features.remoteFetch.notifications.getConfigDeploymentDetails.genericError.description"),level:r.AlertLevels.ERROR,message:z("console:manage.features.remoteFetch.notifications.getConfigDeploymentDetails.genericError.message")}))})))}})).catch((function(){k((0,a.addAlert)({description:z("console:manage.features.remoteFetch.notifications.getConfigList.genericError.description"),level:r.AlertLevels.ERROR,message:z("console:manage.features.remoteFetch.notifications.getConfigList.genericError.message")}))}))};return c.createElement(c.Fragment,null,P&&c.createElement(A,{isOpen:P,onClose:function(){L(!1)},remoteDeployment:N}),Z&&c.createElement(m.Z,{"data-componentid":"".concat(I,"-status"),size:"small",borderless:!0,className:"mb-6"},c.createElement(m.Z.Item,{active:!0,header:!0},z("console:manage.features.remoteFetch.components.status.header")),0===(null===N||void 0===N||null===(t=N.status)||void 0===t?void 0:t.count)&&c.createElement(m.Z.Item,null,c.createElement(i.kW,{icon:"info circle",className:"mt-1 mb-1"},z("console:manage.features.remoteFetch.components.status.hint"))),(null===N||void 0===N||null===(n=N.status)||void 0===n?void 0:n.failedDeployments)&&c.createElement(c.Fragment,null,c.createElement(m.Z.Item,{"data-componentid":"".concat(I,"-success"),className:"pr-3"},c.createElement(p.Z.Group,{className:"mr-2",size:"large"},c.createElement(p.Z,{name:"fork"}),c.createElement(p.Z,{color:"green",corner:"bottom right",name:"checkmark"})),(null===N||void 0===N||null===(l=N.status)||void 0===l?void 0:l.successfulDeployments)>0?c.createElement("strong",{className:"mr-1"},null===N||void 0===N||null===(v=N.status)||void 0===v?void 0:v.successfulDeployments):null===N||void 0===N||null===(h=N.status)||void 0===h?void 0:h.successfulDeployments," Successful"),c.createElement(m.Z.Item,{"data-componentid":"".concat(I,"-failed"),className:"pl-1 pr-3"},c.createElement(p.Z.Group,{className:"mr-2",size:"large"},c.createElement(p.Z,{name:"fork"}),c.createElement(p.Z,{color:"red",corner:"bottom right",name:"cancel"})),(null===N||void 0===N||null===(E=N.status)||void 0===E?void 0:E.failedDeployments)>0?c.createElement("strong",{className:"mr-1"},null===N||void 0===N||null===(y=N.status)||void 0===y?void 0:y.failedDeployments):null===N||void 0===N||null===(S=N.status)||void 0===S?void 0:S.failedDeployments," Failed",(null===N||void 0===N||null===(C=N.status)||void 0===C?void 0:C.lastSynchronizedTime)&&c.createElement(i.Qj,{className:"ml-2",compact:!0,onClick:function(){L(!0)}},z("console:manage.features.remoteFetch.components.status.details"))),c.createElement(m.Z.Item,{"data-componentid":"".concat(I,"-last-deplyed"),className:"pl-1"},c.createElement(p.Z.Group,{className:"mr-2",size:"large"},c.createElement(p.Z,{name:"calendar alternate outline"})),function(e){var t=s()(new Date),n=s()(e);return"Last deployed "+s().duration(t.diff(n)).humanize()+" ago"}(null===N||void 0===N||null===(R=N.status)||void 0===R?void 0:R.lastSynchronizedTime))),c.createElement(m.Z.Item,{position:"right"},c.createElement(f.Z,{content:null===N||void 0===N||null===(O=N.repositoryManagerAttributes)||void 0===O?void 0:O.uri,header:z("console:manage.features.remoteFetch.components.status.linkPopup.header"),on:"click",pinned:!0,offset:"35%",position:"top right",trigger:c.createElement(p.Z.Group,{className:"mr-3 p-1 link"},c.createElement(p.Z,{name:"linkify"}))}),c.createElement(g.Z,{basic:!0,icon:!0,labelPosition:"left","data-componentid":"".concat(I,"-trigger-config"),onClick:function(){(0,o.QM)(N.id).then((function(){k((0,a.addAlert)({description:z("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.success.description"),level:r.AlertLevels.SUCCESS,message:z("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.success.message")})),setTimeout((function(){x()}),3e3)})).catch((function(){k((0,a.addAlert)({description:z("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.genericError.description"),level:r.AlertLevels.ERROR,message:z("console:manage.features.remoteFetch.notifications.triggerConfigDeployment.genericError.message")}))}))}},c.createElement(p.Z,{name:"retweet"}),z("console:manage.features.remoteFetch.components.status.refetch")))))},T=n(60579);n(56421),n(19212)},56421:function(e,t,n){var o,r,a;n.d(t,{Xl:function(){return o},Af:function(){return r},F3:function(){return a}}),function(e){e.WebHook="WEB_HOOK",e.Polling="POLLING"}(o||(o={})),function(e){e.SP="SP"}(r||(r={})),function(e){e.GIT="GIT"}(a||(a={}))},19212:function(e,t,n){n.r(t);var o=n(88742),r=n(26278),a=n(26776),i=n(96462),l=n(68905),s=n(64805),c=n(83913),u=n(23177),d=n(56471),m=n(5554),p=n(87780),f=n(86715),g=n(44706),v=n(92078),h=n(75153),E=n(82791),y=n(70515),S=n(7789),C=n(60579),R=n(56421);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var N=function(e){var t=(0,c.I0)(),n=(0,s.$G)().t,A=e["data-componentid"],O=I((0,l.useState)(void 0),2),T=O[0],N=O[1],_=I((0,l.useState)(void 0),2),w=_[0],P=_[1],L=I((0,l.useState)(!1),2),D=L[0],Z=L[1],F=I((0,l.useState)(""),2),k=F[0],z=F[1],x=I((0,l.useState)(!1),2),U=x[0],j=x[1],M=I((0,l.useState)(!1),2),G=M[0],H=M[1],B=I((0,l.useState)(!1),2),W=B[0],V=B[1];(0,l.useEffect)((function(){Y()}),[]);var Y=function(){(0,S.Tj)().then((function(e){var t;if((null===(t=e.data)||void 0===t?void 0:t.count)>0){var r=e.data.remotefetchConfigurations[0],a=e.data.remotefetchConfigurations[0].actionListenerType;N(r),z(a===R.Xl.Polling?R.Xl.Polling:R.Xl.WebHook),(0,S.dH)(r.id).then((function(e){P(e.data),j(e.data.isEnabled)})).catch((function(){$({description:n("console:manage.features.remoteFetch.notifications.getRemoteRepoConfig.genericError.description"),level:o.AlertLevels.ERROR,message:n("console:manage.features.remoteFetch.notifications.getRemoteRepoConfig.genericError.message")})}))}})).catch((function(){$({description:n("console:manage.features.remoteFetch.notifications.getConfigList.genericError.description"),level:o.AlertLevels.ERROR,message:n("console:manage.features.remoteFetch.notifications.getConfigList.genericError.message")})}))},q=function(e){V(!0),(0,S.u1)(e).then((function(){Y(),H(!1),$({description:n("console:manage.features.remoteFetch.notifications.createRepoConfig.success.description"),level:o.AlertLevels.SUCCESS,message:n("console:manage.features.remoteFetch.notifications.createRepoConfig.success.message")})})).catch((function(){$({description:n("console:manage.features.remoteFetch.notifications.createRepoConfig.genericError.description"),level:o.AlertLevels.ERROR,message:n("console:manage.features.remoteFetch.notifications.createRepoConfig.genericError.message")})})).finally((function(){V(!1)}))},$=function(e){t((0,r.addAlert)(e))};return l.createElement(i.PageLayout,{title:n("console:manage.features.remoteFetch.pages.listing.title"),pageTitle:n("console:manage.features.remoteFetch.pages.listing.title"),description:n("console:manage.features.remoteFetch.pages.listing.subTitle"),"data-componentid":"".concat(A,"-page-layout")},l.createElement(u.Z,null,l.createElement(u.Z.Row,{columns:2},l.createElement(u.Z.Column,{width:12},l.createElement(h.Z,{basic:!0,className:"emphasized bordered"},l.createElement(u.Z,null,l.createElement(u.Z.Row,{columns:1},l.createElement(u.Z.Column,null,l.createElement(u.Z,{padded:!0},l.createElement(u.Z.Column,{width:16},l.createElement("div",{className:"connector-section-with-image-bg",style:{background:"url(".concat((0,C.TU)().appConfigRepo,")")}},l.createElement(E.Z,null,n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.heading.title"),l.createElement(E.Z.Subheader,null,n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.heading.subTitle")))))),l.createElement(m.Z,null),(G||w)&&function(){var e,t,o,r,s;return l.createElement(a.Forms,{"data-componentid":"".concat(A,"-config-form"),onSubmit:function(e){!function(e){var t={actionListener:{attributes:{},type:k},configurationDeployer:{attributes:{},type:R.Af.SP},isEnabled:!0,remoteFetchName:e.configName,repositoryManager:{attributes:{accessToken:e.accessToken,branch:e.gitBranch,directory:e.gitDirectory,uri:e.gitUrl,username:e.userName},type:R.F3.GIT}};k===R.Xl.Polling&&(t=b(b({},t),{},{actionListener:b(b({},t.actionListener),{},{attributes:b(b({},t.actionListener.attributes),{},{frequency:e.pollingfreq})})})),q(t)}(function(e){var t,n,o;return{accessToken:null===(t=e.get("accessToken"))||void 0===t?void 0:t.toString(),configEnabled:U,configName:"ApplicationConfigurationRepository",gitBranch:e.get("gitBranch").toString(),gitDirectory:e.get("gitFolder").toString(),gitUrl:e.get("gitURL").toString(),pollingfreq:parseInt(null===(n=e.get("pollingFreq"))||void 0===n?void 0:n.toString()),userName:null===(o=e.get("userName"))||void 0===o?void 0:o.toString()}}(e))}},l.createElement(u.Z,{padded:!0},w&&l.createElement(l.Fragment,null,l.createElement(u.Z.Row,{columns:2},l.createElement(u.Z.Column,{mobile:12,tablet:12,computer:8},l.createElement("label",null,n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.enable.label")),l.createElement(i.Hint,null,n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.enable.hint"))),l.createElement(u.Z.Column,{mobile:4,tablet:4,computer:6},l.createElement(d.Z,{toggle:!0,checked:U,"data-componentid":"".concat(A,"-config-state"),onChange:function(){j(!U),(0,S.Gw)(null===w||void 0===w?void 0:w.id,{isEnabled:!U,remoteFetchName:null===w||void 0===w?void 0:w.remoteFetchName})},label:n(U?"common:enabled":"common:disabled")}))),l.createElement(m.Z,null)),l.createElement(p.Z,{columns:2},l.createElement(f.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{type:"text",name:"gitURL",label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitURL.label"),placeholder:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitURL.placeholder"),required:!0,requiredErrorMessage:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitURL.validations.required"),disabled:!!T,"data-componentid":"".concat(A,"-form-git-url"),value:w?null===w||void 0===w||null===(e=w.repositoryManagerAttributes)||void 0===e?void 0:e.uri:""})),l.createElement(f.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{type:"text",name:"gitBranch",label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitBranch.label"),placeholder:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitBranch.placeholder"),required:!0,requiredErrorMessage:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitBranch.validations.required"),disabled:!!T,"data-componentid":"".concat(A,"-form-git-branch"),value:w?null===(t=w.repositoryManagerAttributes)||void 0===t?void 0:t.branch:""}))),l.createElement(p.Z,{columns:1},l.createElement(f.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{type:"text",name:"gitFolder",label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitFolder.label"),placeholder:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitFolder.placeholder"),required:!0,requiredErrorMessage:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.gitFolder.validations.required"),disabled:!!T,"data-componentid":"".concat(A,"-form-git-directory"),value:w?null===w||void 0===w||null===(o=w.repositoryManagerAttributes)||void 0===o?void 0:o.directory:""}))),l.createElement(p.Z,{columns:1},l.createElement(f.Z,{mobile:16,tablet:16,computer:6},l.createElement(g.Z.Field,null,n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.connectivity.label")),l.createElement(g.Z.Field,null,l.createElement(v.Z,{label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.connectivity.children.polling.label"),name:"radioGroup",checked:"POLLING"===k,disabled:!!T,"data-componentid":"".concat(A,"-form-connection-polling"),onChange:function(){z("POLLING")}})),l.createElement(g.Z.Field,null,l.createElement(v.Z,{label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.connectivity.children.webhook.label"),name:"radioGroup",disabled:!!T,checked:"WEB_HOOK"===k,"data-componentid":"".concat(A,"-form-connection-webhook"),onChange:function(){z("WEB_HOOK")}})))),"POLLING"===k&&l.createElement(l.Fragment,null,l.createElement(p.Z,{columns:2},l.createElement(f.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{type:"text",name:"userName",label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.username.label"),placeholder:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.username.placeholder"),required:!1,disabled:!!T,requiredErrorMessage:"","data-componentid":"".concat(A,"-form-git-username"),value:w?null===w||void 0===w||null===(r=w.repositoryManagerAttributes)||void 0===r?void 0:r.username:""})),l.createElement(f.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{type:"text",name:"accessToken",label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.accessToken.label"),placeholder:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.accessToken.placeholder"),required:!1,disabled:!!T,requiredErrorMessage:"","data-componentid":"".concat(A,"-form-git-accesstoken"),value:w?null===w||void 0===w||null===(s=w.repositoryManagerAttributes)||void 0===s?void 0:s.accessToken:""}))),l.createElement(p.Z,{columns:1},l.createElement(f.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{type:"number",name:"pollingFreq",disabled:!!T,label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.pollingFrequency.label"),required:!0,value:"60",requiredErrorMessage:""})))),"WEB_HOOK"===k&&l.createElement(p.Z,{columns:1},l.createElement(f.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{type:"text",name:"sharedKey",label:n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.fields.sharedKey.label"),required:!1,disabled:!!T,requiredErrorMessage:"","data-componentid":"".concat(A,"-form-git-shared-key")})))),l.createElement(u.Z,{padded:!0},l.createElement(u.Z.Row,{column:1},l.createElement(u.Z.Column,{mobile:8,tablet:8,computer:8},!T&&l.createElement(i.PrimaryButton,{disabled:!!T||W,floated:"left","data-componentid":"".concat(A,"-save-configuration"),loading:W},n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.actions.save")),T&&l.createElement(i.LinkButton,{floated:"left",attached:!0,"data-componentid":"".concat(A,"-remove-configuration"),onClick:function(){Z(!0)}},n("console:manage.features.remoteFetch.forms.getRemoteFetchForm.actions.remove")),G&&l.createElement(i.LinkButton,{floated:"left","data-componentid":"".concat(A,"-cancel-configuration"),onClick:function(){H(!1)}},n("common:cancel"))))))}(),!w&&!G&&l.createElement(i.EmptyPlaceholder,{action:l.createElement(i.PrimaryButton,{"data-componentid":"".concat(A,"-add-configuration"),onClick:function(){H(!0)}},l.createElement(y.Z,{name:"add"}),n("console:manage.features.remoteFetch.placeholders.emptyListPlaceholder.action")),title:n("console:manage.features.remoteFetch.placeholders.emptyListPlaceholder.title"),subtitle:[n("console:manage.features.remoteFetch.placeholders.emptyListPlaceholder.subtitles")],image:(0,C.jF)().add,imageSize:"tiny"})))))))),D&&l.createElement(i.ConfirmationModal,{"data-componentid":"".concat(A,"-confirmation-modal"),onClose:function(){return Z(!1)},type:"negative",open:D,assertion:null===w||void 0===w?void 0:w.remoteFetchName,assertionHint:l.createElement("p",null,l.createElement(s.cC,{i18nKey:"console:manage.features.remoteConfig.list.confirmations.deleteItem.assertionHint",tOptions:{roleName:null===w||void 0===w?void 0:w.remoteFetchName}},"Please type ",l.createElement("strong",null,null===w||void 0===w?void 0:w.remoteFetchName)," to confirm.")),assertionType:"input",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return Z(!1)},onPrimaryActionClick:function(){var e;e=T,(0,S.tB)(e.id).then((function(){N(void 0),P(void 0),$({description:n("console:manage.features.remoteFetch.notifications.deleteRepoConfig.success.description"),level:o.AlertLevels.SUCCESS,message:n("console:manage.features.remoteFetch.notifications.deleteRepoConfig.success.message")})})).catch((function(){$({description:n("console:manage.features.remoteFetch.notifications.deleteRepoConfig.genericError.description"),level:o.AlertLevels.ERROR,message:n("console:manage.features.remoteFetch.notifications.deleteRepoConfig.genericError.message")})})),Z(!1)}},l.createElement(i.ConfirmationModal.Header,null,n("console:manage.features.remoteConfig.list.confirmations.deleteConfig.header")),l.createElement(i.ConfirmationModal.Message,{attached:!0,negative:!0},n("console:manage.features.remoteConfig.list.confirmations.deleteConfig.message")),l.createElement(i.ConfirmationModal.Content,null,n("console:manage.features.remoteConfig.list.confirmations.deleteConfig.content"))))};N.defaultProps={"data-componentid":"remote-fetch"},t.default=N},29850:function(e,t,n){n.d(t,{fA:function(){return p},iy:function(){return m},pZ:function(){return f},xQ:function(){return c},Sd:function(){return v},QW:function(){return d},ul:function(){return g},dB:function(){return u}});var o=n(19486),r=n(57002),a=n(82817),i=n(88742),l=n(12847),s=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()).bind(o.AsgardeoSPAClient.getInstance()),c=function(e){var t={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.HttpMethods.GET,url:l.h.getState().config.endpoints.roles+"/"+e};return s(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},u=function(e,t){var n={data:t,headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.HttpMethods.PATCH,url:l.h.getState().config.endpoints.roles+"/"+e};return s(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.HttpMethods.POST,url:l.h.getState().config.endpoints.rolesWithoutOrgPath+"/.search"};return s(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},m=function(e){var t={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.HttpMethods.DELETE,url:l.h.getState().config.endpoints.roles+"/"+e};return s(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},p=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.HttpMethods.POST,url:l.h.getState().config.endpoints.roles};return s(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},f=function(){var e={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.HttpMethods.GET,url:l.h.getState().config.endpoints.permission};return s(e).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},g=function(e,t){var n={data:t,headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.HttpMethods.PATCH,url:l.h.getState().config.endpoints.roles+"/"+e};return s(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},v=function(e){var t={headers:{"Access-Control-Allow-Origin":l.h.getState().config.deployment.clientHost},method:i.HttpMethods.GET,params:{domain:e},url:l.h.getState().config.endpoints.roles};return s(t).then((function(e){if(200!==e.status)throw new a.IdentityAppsApiException(r.RoleConstants.ROLES_FETCH_REQUEST_INVALID_RESPONSE_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new a.IdentityAppsApiException(r.RoleConstants.ROLES_FETCH_REQUEST_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},83108:function(e,t,n){n.d(t,{H:function(){return o}});var o=function e(t,n,o){var r=n.shift(),a=o.find((function(e){return e.name===r}));return a||(a={key:t.resourcePath,name:r,title:t.displayName},o.push(a)),n.length&&e(t,n,a.children||(a.children=[])),o}},81229:function(e,t,n){n.d(t,{FK:function(){return O},vk:function(){return I},B0:function(){return ue},wB:function(){return Y}});var o=n(88742),r=n(26278),a=n(26776),i=n(96462),l=n(68905),s=n(64805),c=n(83913),u=n(70515),d=n(85027),m=n(23177),p=n(84504),f=n(92303),g=n(87289),v=n(1410),h=n(58704),E=n(12847),y=n(1581),S=n(12558);function C(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var O=function(e){var t=e.triggerSubmit,n=e.onSubmit,o=e.assignedUsers,r=e.isEdit,c=e.initialValues,p=e.isGroup,b=e.userStore,O=e.isReadOnly,I=e.handleTempUsersListChange,T=e.isSubmitting,N=e["data-testid"],_=(0,s.$G)().t,w=R((0,l.useState)([]),2),P=w[0],L=w[1],D=R((0,l.useState)([]),2),Z=D[0],F=D[1],k=R((0,l.useState)([]),2),z=k[0],x=k[1],U=R((0,l.useState)([]),2),j=U[0],M=U[1],G=R((0,l.useState)([]),2)[1],H=R((0,l.useState)(0),1)[0],B=R((0,l.useState)(0),2),W=B[0],V=B[1],Y=R((0,l.useState)(void 0),2),q=Y[0],$=Y[1],K=R((0,l.useState)(!1),2),Q=K[0],X=K[1],J=R((0,l.useState)(!1),2),ee=J[0],te=J[1],ne=R((0,l.useState)([]),2),oe=ne[0],re=ne[1],ae=R((0,l.useState)([]),2),ie=ae[0],le=ae[1],se=R((0,l.useState)(!1),2),ce=se[0],ue=se[1],de=R((0,l.useState)(!0),2),me=de[0],pe=de[1],fe=(0,l.useRef)(!0);(0,l.useEffect)((function(){fe.current?fe.current=!1:I&&I(P)}),[P]),(0,l.useEffect)((function(){re(Q?Z:[])}),[Q]),(0,l.useEffect)((function(){le(ee?P:[])}),[ee]);var ge=function(){X(!Q)},ve=function(){te(!ee)},he=function(e,t,n,r,a){(0,y.Fp)(e,t,n,r,a).then((function(e){if(!e.Resources)return F([]),x([]),void pe(!1);var t=e.Resources.filter((function(e){return e.userName.split("/")[0]!==S.XS}));if(t.sort((function(e,t){var n,o,r;return null===(n=e.name)||void 0===n||null===(o=n.givenName)||void 0===o?void 0:o.localeCompare(null===(r=t.name)||void 0===r?void 0:r.givenName)})),F(t),x(t),o&&0!==o.length){var n=[];t&&t instanceof Array&&(t.slice().reverse().forEach((function(e){o.forEach((function(o){e.id===o.value&&(n.push(e),t.splice(t.indexOf(e),1))}))})),n.sort((function(e,t){var n,o,r;return null===(n=e.name)||void 0===n||null===(o=n.givenName)||void 0===o?void 0:o.localeCompare(null===(r=t.name)||void 0===r?void 0:r.givenName)})),M(n),G(n),L(n))}if(pe(!1),c&&c instanceof Array){var r=[];t&&t instanceof Array&&(t.forEach((function(e){c.forEach((function(t){e.id===t.id&&r.push(e)}))})),r.sort((function(e,t){var n,o,r;return null===(n=e.name)||void 0===n||null===(o=n.givenName)||void 0===o?void 0:o.localeCompare(null===(r=t.name)||void 0===r?void 0:r.givenName)})),F(t.filter((function(e){return-1==r.indexOf(e)}))),M(r),G(r),L(r))}}))};(0,l.useEffect)((function(){V(E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),$(new Map([["name","name"],["emails","emails"],["name","name"],["userName","userName"],["id",""],["profileUrl","profileUrl"],["meta.lastModified","meta.lastModified"],["meta.created",""]]))}),[]);var Ee=function(e){var t,n=[],o=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e[Symbol.iterator]());try{for(o.s();!(t=o.n()).done;){var r=t.value;""!==r&&n.push(r)}}catch(e){o.e(e)}finally{o.f()}return n.toString()};(0,l.useEffect)((function(){if(q){var e=Ee(q.values());he(W,H,null,e,p?b:null)}}),[H,W]);var ye=function(e){var t=C(oe);t.includes(e)?(t.splice(t.indexOf(e),1),re(t)):(t.push(e),re(t))},Se=function(e,t){var n=t.value,o=[];if((0,g.Z)(n))F(z);else{var r=new RegExp((0,f.Z)(n),"i");Z&&Z.map((function(e){r.test(e.userName)&&(o.push(e),F(o))}))}},Ce=function(e){var t=C(ie);t.includes(e)?(t.splice(t.indexOf(e),1),le(t)):(t.push(e),le(t))},Re=function(){var e=C(P);(null===oe||void 0===oe?void 0:oe.length)>0&&oe.map((function(t){P.includes(t)||e.push(t)})),F(Z.filter((function(e){return-1===oe.indexOf(e)}))),L(e),le([]),X(!1)},Ae=function(){var e=C(P);(null===ie||void 0===ie?void 0:ie.length)>0&&(ie.map((function(t){e.splice(e.indexOf(t),1),Z.push(t)})),F(Z),L(e),re([]))},be=function(){ue(!0)},Oe=function(){L(j),ue(!1)};return l.createElement(l.Fragment,null,r?l.createElement(m.Z,null,l.createElement(m.Z.Row,null,l.createElement(m.Z.Column,{computer:8},(null===j||void 0===j?void 0:j.length)>0?l.createElement(i.EmphasizedSegment,{className:"user-role-edit-header-segment"},l.createElement(m.Z.Row,null,l.createElement(m.Z.Column,null,l.createElement(v.Z,{"data-testid":"".concat(N,"-users-list-search-input"),icon:l.createElement(u.Z,{name:"search"}),onChange:function(e,t){var n=t.value,o=[];if((0,g.Z)(n))M(P);else{var r=new RegExp((0,f.Z)(n),"i");j&&j.map((function(e){r.test(e.userName)&&(o.push(e),M(o))}))}},placeholder:_("console:manage.features.roles.addRoleWizard.users.assignUserModal.list.searchPlaceholder"),floated:"left",size:"small"}),!O&&l.createElement(i.Button,{"data-testid":"".concat(N,"-users-list-edit-button"),size:"medium",icon:"pencil",floated:"right",onClick:be}))),l.createElement(m.Z.Row,null,l.createElement(h.Z,{singleLine:!0,compact:!0},l.createElement(h.Z.Header,null,l.createElement(h.Z.Row,null,l.createElement(h.Z.HeaderCell,null),l.createElement(h.Z.HeaderCell,null,_("console:manage.features.roles.edit.users.list.header")))),l.createElement(h.Z.Body,null,null===j||void 0===j?void 0:j.map((function(e){return l.createElement(h.Z.Row,{key:e.id},l.createElement(h.Z.Cell,{collapsing:!0},l.createElement(i.UserAvatar,{"data-testid":"".concat(N,"-users-list-\n                                                                                ").concat(e.userName,"-avatar"),name:e.userName,size:"mini",floated:"left",image:e.profileUrl})),l.createElement(h.Z.Cell,null,e.userName))})))))):me?l.createElement(i.ContentLoader,{className:"p-3",active:!0}):l.createElement(i.EmphasizedSegment,null,l.createElement(i.EmptyPlaceholder,{title:_("console:manage.features.roles.edit.users.list.emptyPlaceholder.title"),subtitle:[_("console:manage.features.roles.edit.users.list.emptyPlaceholder.subtitles",{type:"role"})],action:!O&&l.createElement(i.PrimaryButton,{"data-testid":"".concat(N,"-users-list-empty-assign-\n                                                                users-button"),onClick:be,icon:"plus"},_("console:manage.features.roles.edit.users.list.emptyPlaceholder.action")),image:(0,E.jF)().emptyList,imageSize:"tiny"})))),l.createElement(d.Z,{"data-testid":"".concat(N,"-assign-user-wizard-modal"),dimmer:"blurring",open:ce,size:"small",className:"user-roles"},l.createElement(d.Z.Header,null,_("console:manage.features.roles.addRoleWizard.users.assignUserModal.heading",{type:"Role"}),l.createElement(i.Heading,{subHeading:!0,ellipsis:!0,as:"h6"},_("console:manage.features.roles.addRoleWizard.users.assignUserModal.subHeading",{type:"role"}))),l.createElement(d.Z.Content,{image:!0},l.createElement(i.TransferComponent,{"data-testid":"".concat(N,"-user-list-transfer"),searchPlaceholder:_("console:manage.features.roles.addRoleWizard.users.assignUserModal.list.searchPlaceholder"),addItems:Re,removeItems:Ae,handleUnelectedListSearch:Se,handleSelectedListSearch:Se},l.createElement(i.TransferList,{isListEmpty:!((null===Z||void 0===Z?void 0:Z.length)>0),listType:"unselected",listHeaders:[_("console:manage.features.roles.addRoleWizard.users.assignUserModal.list.listHeader")],handleHeaderCheckboxChange:ge,isHeaderCheckboxChecked:Q,"data-testid":"".concat(N,"-unselected-users-select-all-checkbox"),emptyPlaceholderContent:_("console:manage.features.transferList.list.emptyPlaceholders.roles.selected",{type:"users"}),emptyPlaceholderDefaultContent:_("console:manage.features.transferList.list.emptyPlaceholders.default")},null===Z||void 0===Z?void 0:Z.map((function(e,t){return l.createElement(i.TransferListItem,{handleItemChange:function(){return ye(e)},key:t,listItem:e.userName,listItemId:e.id,listItemIndex:t,isItemChecked:null===oe||void 0===oe?void 0:oe.includes(e),showSecondaryActions:!1,"data-testid":"".concat(N,"-unselected-users")})}))),l.createElement(i.TransferList,{isListEmpty:!((null===P||void 0===P?void 0:P.length)>0),listType:"selected",listHeaders:[_("console:manage.features.roles.addRoleWizard.users.assignUserModal.list.listHeader")],handleHeaderCheckboxChange:ve,isHeaderCheckboxChecked:ee,"data-testid":"".concat(N,"-selected-users-select-all-checkbox"),emptyPlaceholderContent:_("console:manage.features.transferList.list.emptyPlaceholders.roles.selected",{type:"users"}),emptyPlaceholderDefaultContent:_("console:manage.features.transferList.list.emptyPlaceholders.default")},null===P||void 0===P?void 0:P.map((function(e,t){return l.createElement(i.TransferListItem,{handleItemChange:function(){return Ce(e)},key:t,listItem:e.userName,listItemId:e.id,listItemIndex:t,isItemChecked:null===ie||void 0===ie?void 0:ie.includes(e),showSecondaryActions:!1,"data-testid":"".concat(N,"-selected-users")})}))))),l.createElement(d.Z.Actions,null,l.createElement(m.Z,null,l.createElement(m.Z.Row,{columns:2},l.createElement(m.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.LinkButton,{"data-testid":"".concat(N,"-assign-user-wizard-modal-cancel-button"),onClick:Oe,floated:"left"},_("common:cancel"))),l.createElement(m.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.PrimaryButton,{"data-testid":"".concat(N,"-assign-user-wizard-modal-save-button"),onClick:function(){n(P),M(P),ue(!1)},floated:"right",loading:T,disabled:T},_("common:save")))))))):l.createElement(a.Forms,{onSubmit:function(){n(P)},submitState:t},l.createElement(m.Z,null,l.createElement(m.Z.Row,{columns:2},l.createElement(i.TransferComponent,{"data-testid":"".concat(N,"-update-user-list-transfer"),searchPlaceholder:_("console:manage.features.roles.addRoleWizard.users.assignUserModal.list.searchPlaceholder"),addItems:Re,removeItems:Ae,handleUnelectedListSearch:Se,handleSelectedListSearch:Se},l.createElement(i.TransferList,{isListEmpty:!((null===Z||void 0===Z?void 0:Z.length)>0),listType:"unselected",listHeaders:[_("console:manage.features.roles.addRoleWizard.users.assignUserModal.list.listHeader")],handleHeaderCheckboxChange:ge,isHeaderCheckboxChecked:Q,"data-testid":"".concat(N,"-update-unselected-users-select-all-checkbox"),emptyPlaceholderContent:_("console:manage.features.transferList.list.emptyPlaceholders.roles.unselected",{type:"users"}),emptyPlaceholderDefaultContent:_("console:manage.features.transferList.list.emptyPlaceholders.default")},null===Z||void 0===Z?void 0:Z.map((function(e,t){return l.createElement(i.TransferListItem,{handleItemChange:function(){return ye(e)},key:t,listItem:e.userName,listItemId:e.id,listItemIndex:t,isItemChecked:null===oe||void 0===oe?void 0:oe.includes(e),showSecondaryActions:!1,"data-testid":"".concat(N,"-update-unselected-users")})}))),l.createElement(i.TransferList,{isListEmpty:!((null===P||void 0===P?void 0:P.length)>0),listType:"selected",listHeaders:[_("console:manage.features.roles.addRoleWizard.users.assignUserModal.list.listHeader")],handleHeaderCheckboxChange:ve,isHeaderCheckboxChecked:ee,"data-testid":"".concat(N,"-update-selected-users-select-all-checkbox"),emptyPlaceholderContent:_("console:manage.features.transferList.list.emptyPlaceholders.roles.unselected",{type:"users"}),emptyPlaceholderDefaultContent:_("console:manage.features.transferList.list.emptyPlaceholders.default")},null===P||void 0===P?void 0:P.map((function(e,t){return l.createElement(i.TransferListItem,{handleItemChange:function(){return Ce(e)},key:t,listItem:e.userName,listItemId:e.id,listItemIndex:t,isItemChecked:null===ie||void 0===ie?void 0:ie.includes(e),showSecondaryActions:!1,"data-testid":"".concat(N,"-update-selected-users")})}))))),r&&l.createElement(m.Z.Row,{columns:1},l.createElement(m.Z.Column,{mobile:16,tablet:16,computer:8},l.createElement(i.Button,{"data-testid":"".concat(N,"-update-user-list-button"),primary:!0,type:"submit",size:"small",loading:T,disabled:T,className:"form-button"},_("common.update")))))))},I=function(e){var t=e.initialUsersList,n=e.initialGroupList,o=e.selectedUserStore,r=e.handleAddedGroupInitialListChange,a=e.handleAddedGroupListChange,s=e.handleGroupListChange,c=e.handleInitialGroupListChange,u=e.handleTempUsersListChange;return l.createElement(i.ResourceTab,{panes:[{menuItem:{content:"Groups",icon:"group",key:"groups"},render:function(){return l.createElement(i.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},l.createElement(E.av,{initialValues:n,handleGroupListChange:function(e){return s(e)},handleTempListChange:function(e){return a(e)},handleInitialTempListChange:function(e){return r(e)},handleInitialGroupListChange:function(e){return c(e)}}))}},{menuItem:{content:"Users",icon:"user",key:"users"},render:function(){return l.createElement(i.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},l.createElement(O,{"data-testid":"new-role",isEdit:!1,isGroup:!1,userStore:o,initialValues:t,handleTempUsersListChange:u}))}}]})},T=n(3844),N=n(87780),_=n(86715),w=n(26264),P=n(73881),L=n(5984),D=n(99267);function Z(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){Z(a,o,r,i,l,"next",e)}function l(e){Z(a,o,r,i,l,"throw",e)}i(void 0)}))}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var x=function(e){var t=e.onSubmit,n=e.triggerSubmit,o=e.initialValues,r=e.isAddGroup,i=e["data-testid"],c=(0,s.$G)().t,u=k((0,l.useState)(!0),2),d=u[0],p=u[1],f=k((0,l.useState)([]),2)[1],g=k((0,l.useState)(P.fo.PRIMARY_USER_STORE),1)[0],v=k((0,l.useState)(!1),2),h=v[0],y=v[1];(0,l.useEffect)((function(){C()}),[r]);var S=function(){var e=F(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",g===D.$R){e.next=6;break}return e.next=4,L.w3.getUserStoreRegEx(g,P.fo.USERSTORE_REGEX_PROPERTIES.RolenameRegEx).then((function(e){y(!0),n=e}));case 4:e.next=7;break;case 6:n=P.fo.PRIMARY_USERSTORE_PROPERTY_VALUES.RolenameJavaScriptRegEx;case 7:p(L.w3.validateInputAgainstRegEx(t,n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=[{key:-1,text:"Primary",value:"primary"}],t={key:null,text:"",value:""};(0,T.getUserStoreList)(E.h.getState().config.endpoints.userStores).then((function(n){e===[]&&e.push(t),n.data.map((function(n,o){t={key:o,text:n.name,value:n.name},e.push(t)})),f(e)})),f(e)};return l.createElement(a.Forms,{"data-testid":i,onSubmit:function(e){t(function(e){return{roleName:e.get("rolename").toString()}}(e))},submitState:n},l.createElement(m.Z,null,l.createElement(N.Z,null,l.createElement(_.Z,{mobile:16,tablet:16,computer:8},l.createElement(a.Field,{"data-testid":"".concat(i,"-role-name-input"),type:"text",name:"rolename",label:c("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.label",{type:"Role"}),placeholder:c("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.placeholder",{type:"Role"}),required:!0,requiredErrorMessage:c("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.empty",{type:"Role"}),validation:function(){var e=F(regeneratorRuntime.mark((function e(t,n){var o,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={filter:"displayName eq "+t.toString(),schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1},e.next=3,(0,w.QW)(r);case 3:return(null===(a=e.sent)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.totalResults)>0&&(n.isValid=!1,n.errorMessages.push(c("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.duplicate",{type:"Role"}))),e.next=7,S(t.toString());case 7:d||(n.isValid=!1,n.errorMessages.push(c("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.invalid",{type:"role"})));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),value:o&&o.roleName,loading:h})))))},U=n(76742),j=n(5554),M=n(34694),G=n(96587);function H(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Y=function(e){var t=e.isReadOnly,n=e.emphasize,o=e.triggerSubmit,r=e.onSubmit,u=e.roleObject,d=e.isEdit,f=e.initialValues,g=e.isRole,v=e.isSubmitting,h=e.permissionsToHide,y=e["data-testid"],S=(0,s.$G)().t,C=B((0,l.useState)([]),2),R=C[0],A=C[1],b=B((0,l.useState)([]),2),O=b[0],I=b[1],T=B((0,l.useState)([]),2),N=T[0],_=T[1],w=B((0,l.useState)([]),2),P=w[0],L=w[1],Z=B((0,l.useState)(!0),2),F=Z[0],k=Z[1],z=B((0,l.useState)(!1),2),x=z[0],W=z[1],V=(0,c.v9)((function(e){return e.config.deployment.tenant}));(0,l.useEffect)((function(){var e=[];if(G.J.getAllPermissions(h,V).then((function(e){q(x,e),A(e),L([e[0].key.toString()]),k(!1)})),Y(),f&&f.length>0){var t=[];f.forEach((function(e){t.push(e.key.toString())})),_(t),null===N||void 0===N||N.forEach((function(t){e.push(Q(t,R))})),I(e)}g&&u&&(_(u.permissions),null===N||void 0===N||N.forEach((function(t){e.push(Q(t,R))})),I(e))}),[R.length>0]);var Y=function(){(0,M.Un)().then((function(e){E.h.getState().profile.profileInfo.userName===(null===e||void 0===e?void 0:e.realmConfig.adminUser)&&W(!0)}))},q=function(e,t){t[0].children.forEach((function(t){t.key!==D.nL.SUPER_ADMIN_PERMISSION_KEY||e||(t.disableCheckbox=!0,t.children&&$(t.children,!0))}))},$=function e(t,n){t.forEach((function(t){t.disableCheckbox=n,t.children&&e(t.children,n)}))},K=function(e,t){if(t.checked){if(!O.find((function(e){return e.key===t.node.key}))){var n,o,r=Q(t.node.key,R,!0),a=1;if(null===r||void 0===r||null===(n=r.children)||void 0===n||n.forEach((function(e){O.filter((function(t){return t.key===e.key})).length>0&&++a})),(null===r||void 0===r||null===(o=r.children)||void 0===o?void 0:o.length)===a){var i=O.filter((function(e){e.key.toString().replace(/^\/|\/$/g,"").split("/"),r.key.toString().replace(/^\/|\/$/g,"").split("/")}));I([].concat(H(i),[r]))}else I([].concat(H(O),[t.node]))}}else I(t.checkedNodes)},Q=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[t[0]];o.length;){var r=o.shift();if(n){if(r.key===e.slice(0,e.lastIndexOf("/")))return r}else if(r.key===e)return r;r.children&&o.push.apply(o,H(r.children))}return null},X=function(e){return e.isLeaf?null:l.createElement("div",{className:"tree-arrow-wrap"},l.createElement("span",{className:"tree-arrow ".concat(e.expanded?"":"active")},l.createElement("span",null),l.createElement("span",null)))},J=function(){return l.createElement(l.Fragment,null,l.createElement(a.Forms,{submitState:o,onSubmit:function(){r(O)}},F?l.createElement(i.ContentLoader,{className:"p-3",active:!0}):l.createElement("div",{className:"treeview-container"},l.createElement(U.Z,{className:"customIcon","data-testid":"".concat(y,"-tree"),disabled:t,checkedKeys:O.map((function(e){return e.key})),defaultExpandedKeys:P,showLine:!0,showIcon:!1,checkable:!0,selectable:!1,onCheck:K,treeData:R,switcherIcon:X})),d&&!F&&l.createElement(l.Fragment,null,l.createElement(j.Z,{hidden:!0}),l.createElement(m.Z.Row,{columns:1},l.createElement(m.Z.Column,{mobile:16,tablet:16,computer:8},l.createElement(p.Z,{"data-testid":"".concat(y,"-update-button"),primary:!0,type:"submit",loading:v,disabled:v,size:"small",className:"form-button"},S("console:manage.features.roles.addRoleWizard.permissions.buttons.update")))))))};return n?l.createElement(i.EmphasizedSegment,{"data-testid":y,padded:"very"},J()):l.createElement("div",{"data-testid":y},J())};Y.defaultProps={emphasize:!0,isReadOnly:!1};var q=n(99104);function $(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var J,ee=function(e){var t,n,o=e.summary,r=e.triggerSubmit,a=e.onSubmit,c=e.isAddGroup,u=e["data-testid"],d=(0,s.$G)().t,p=K((0,l.useState)([]),2),f=p[0],g=p[1],v=K((0,l.useState)([]),2),h=v[0],E=v[1],y=K((0,l.useState)([]),2),S=y[0],C=y[1];(0,l.useEffect)((function(){G.J.getAllPermissions().then((function(e){if(g(e),E([e[0].key.toString()]),o&&o.PermissionList){var t=o.PermissionList;C([].concat($(S),$(t.map((function(e){return e.key})))))}}))}),[f.length>0]),(0,l.useEffect)((function(){r&&a(o)}),[r]);return l.createElement(m.Z,{className:"wizard-summary"},(null===o||void 0===o?void 0:o.BasicDetails)&&l.createElement(l.Fragment,null,l.createElement(m.Z.Row,{className:"summary-field",columns:2},l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},l.createElement("div",{"data-testid":"".concat(u,"-role-name-label"),className:"label"},d("console:manage.features.roles.addRoleWizard.summary.labels.roleName",c?{type:"Group"}:{type:"Role"}))),l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},l.createElement("div",{"data-testid":"".concat(u,"-role-name-value"),className:"value url"},o.BasicDetails.roleName)))),(null===o||void 0===o?void 0:o.PermissionList)&&o.PermissionList instanceof Array&&o.PermissionList.length>0&&l.createElement(m.Z.Row,{className:"summary-field",columns:2},l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},l.createElement("div",{"data-testid":"".concat(u,"-permissions-label"),className:"label"},d("console:manage.features.roles.addRoleWizard.summary.labels.permissions"))),l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},l.createElement(q.Z.Group,null,l.createElement(U.Z,{className:"customIcon","data-testid":"".concat(u,"-tree"),disabled:!0,checkedKeys:S,defaultExpandedKeys:h,showLine:!0,showIcon:!1,checkable:!0,selectable:!1,treeData:f,switcherIcon:function(e){return e.isLeaf?null:l.createElement("div",{className:"tree-arrow-wrap"},l.createElement("span",{className:"tree-arrow ".concat(e.expanded?"":"active")},l.createElement("span",null),l.createElement("span",null)))}})))),null!==o&&void 0!==o&&o.UserList&&(null===o||void 0===o?void 0:o.UserList)instanceof Array&&(null===o||void 0===o||null===(t=o.UserList)||void 0===t?void 0:t.length)>0?l.createElement(m.Z.Row,{className:"summary-field",columns:2},l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},l.createElement("div",{"data-testid":"".concat(u,"-users-label"),className:"label"},d("console:manage.features.roles.addRoleWizard.summary.labels.users"))),l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},l.createElement(q.Z.Group,null,null===o||void 0===o?void 0:o.UserList.map((function(e,t){return l.createElement("div",{key:t,className:"role-summary-user"},l.createElement(i.UserAvatar,{name:e.userName,size:"mini",floated:"left",image:e.profileUrl}),e.userName)}))))):null,null!==o&&void 0!==o&&o.GroupList&&(null===o||void 0===o?void 0:o.GroupList)instanceof Array&&(null===o||void 0===o||null===(n=o.GroupList)||void 0===n?void 0:n.length)>0?l.createElement(m.Z.Row,{className:"summary-field",columns:2},l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},l.createElement("div",{"data-testid":"".concat(u,"-users-label"),className:"label"},d("console:manage.features.roles.addRoleWizard.summary.labels.groups"))),l.createElement(m.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},l.createElement(q.Z.Group,null,null===o||void 0===o?void 0:o.GroupList.map((function(e,t){return l.createElement(q.Z,{"data-testid":"".concat(u,"-permissions-").concat(t,"-label"),key:t,basic:!0,circular:!0},null===e||void 0===e?void 0:e.displayName)}))))):null)},te=n(97763),ne=n(42463),oe=n(29850),re=n(1138);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}!function(e){e.BASIC_DETAILS="BasicDetails",e.PERM_LIST="PermissionList",e.USER_LIST="UserList",e.GROUP_LIST="GroupList",e.SUMMARY="summary"}(J||(J={}));var ue=function(e){var t,n,f=e.closeWizard,g=e.initStep,v=e.updateList,h=e.isAddGroup,E=e.onCreateRoleRequested,y=e["data-testid"],S=(0,s.$G)().t,C=(0,c.I0)(),R=se((0,l.useState)(g),2),A=R[0],b=R[1],O=se((0,l.useState)(void 0),2),T=O[0],N=O[1],_=se((0,l.useState)(void 0),2),w=_[0],L=_[1],D=se((0,l.useState)(""),2),Z=D[0],F=D[1],k=se((0,a.useTrigger)(),2),z=k[0],U=k[1],j=se((0,a.useTrigger)(),2),M=j[0],G=j[1],H=se((0,a.useTrigger)(),2),B=H[0],W=H[1],V=se((0,l.useState)([]),2),q=V[0],$=V[1],K=se((0,l.useState)([]),2),Q=K[0],X=K[1],ae=se((0,l.useState)([]),2),ce=ae[0],ue=ae[1],de=se((0,l.useState)([]),2),me=de[0],pe=de[1],fe=se((0,l.useState)([]),2),ge=fe[0],ve=fe[1],he=se((0,l.useState)(!1),2),Ee=he[0],ye=he[1],Se=se((0,l.useState)(!1),2),Ce=Se[0],Re=Se[1];(0,l.useEffect)((function(){void 0!==T&&(b(A-1),N(void 0))}),[T]),(0,l.useEffect)((function(){q.length<1&&(0,ne.hI)(null).then((function(e){var t=e.data.Resources.filter((function(e){return 1===e.displayName.split("/").length}));$(t)}))}),[]),(0,l.useEffect)((function(){Ee&&w&&w[J.BASIC_DETAILS]&&Ae(w[J.BASIC_DETAILS])}),[w&&w[J.BASIC_DETAILS]]);var Ae=function(e){var t,n,a,i,l,s,c,u=[],d=[],m=[];(null===e||void 0===e||null===(t=e.UserList)||void 0===t?void 0:t.length)>0&&(null===e||void 0===e||null===(l=e.UserList)||void 0===l||l.forEach((function(e){null===u||void 0===u||u.push({display:null===e||void 0===e?void 0:e.userName,value:null===e||void 0===e?void 0:e.id})})));(null===e||void 0===e||null===(n=e.GroupList)||void 0===n?void 0:n.length)>0&&(null===e||void 0===e||null===(s=e.GroupList)||void 0===s||s.forEach((function(e){null===d||void 0===d||d.push({display:e.displayName,value:e.id})})));(null===e||void 0===e||null===(a=e.PermissionList)||void 0===a?void 0:a.length)>0&&(null===e||void 0===e||null===(c=e.PermissionList)||void 0===c||c.forEach((function(e){null===m||void 0===m||m.push(null===e||void 0===e?void 0:e.key.toString())})));var p={displayName:null!==e&&void 0!==e&&e.BasicDetails?null===e||void 0===e||null===(i=e.BasicDetails)||void 0===i?void 0:i.roleName:null===e||void 0===e?void 0:e.roleName,groups:d,permissions:m,schemas:["urn:ietf:params:scim:schemas:extension:2.0:Role"],users:u};Re(!0),E?E(p):(0,oe.fA)(p).then((function(e){201===e.status&&(C((0,r.addAlert)({description:S("console:manage.features.roles.notifications.createRole.success.description"),level:o.AlertLevels.SUCCESS,message:S("console:manage.features.roles.notifications.createRole.success.message")})),f(),te.m.push(P.$x.getPaths().get("ROLE_EDIT").replace(":id",e.data.id)))})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?(f(),C((0,r.addAlert)({description:S("console:manage.features.roles.notifications.createRole.error.description",{description:e.response.data.detail}),level:o.AlertLevels.ERROR,message:S("console:manage.features.roles.notifications.createRole.error.message")}))):(f(),C((0,r.addAlert)({description:S("console:manage.features.roles.notifications.createRole.genericError.description"),level:o.AlertLevels.ERROR,message:S("console:manage.features.roles.notifications.createRole.genericError.message")}))):(f(),C((0,r.addAlert)({description:S("console:manage.features.roles.notifications.createRole.error.description"),level:o.AlertLevels.ERROR,message:S("console:manage.features.roles.notifications.createRole.error.message")})))})).finally((function(){Re(!1)}))},be=function(e,t){J.BASIC_DETAILS===t&&F(e.domain),b(A+1),L(ie(ie({},w),{},le({},t,e)))},Oe=[{content:l.createElement(x,{"data-testid":"add-role-form",isAddGroup:h,triggerSubmit:z,initialValues:w&&w[J.BASIC_DETAILS],onSubmit:function(e){return be(e,J.BASIC_DETAILS)}}),icon:(0,re.T)().general,title:S("console:manage.features.roles.addRoleWizard.wizardSteps.0")},{content:l.createElement(Y,{"data-testid":"new-role-permissions",isEdit:!1,triggerSubmit:M,initialValues:w&&w[J.PERM_LIST],onSubmit:function(e){return be(e,J.PERM_LIST)},isSubmitting:Ce}),icon:l.createElement(u.Z,{name:"key",inverted:!0,size:"large"}),title:S("console:manage.features.roles.addRoleWizard.wizardSteps.1")},{content:l.createElement(I,{"data-testid":"role-mgt-assign-users-and-groups",initialUsersList:ge,initialGroupList:{groupList:q,initialGroupList:ce,initialTempGroupList:me,tempGroupList:Q},onRoleUpdate:v,selectedUserStore:Z,handleAddedGroupInitialListChange:function(e){pe(e)},handleAddedGroupListChange:function(e){X(e)},handleGroupListChange:function(e){return function(e){$(e)}(e)},handleInitialGroupListChange:function(e){return function(e){ue(e)}(e)},handleTempUsersListChange:function(e){ve(e)}}),icon:(0,re.T)().assignUser,title:S("console:manage.features.roles.addRoleWizard.wizardSteps.4")},{content:l.createElement(ee,{"data-testid":"add-role-summary",isAddGroup:h,triggerSubmit:B,onSubmit:function(){Ae(w)},summary:function(){if(w)return w}()}),icon:(0,re.T)().summary,title:S("console:manage.features.roles.addRoleWizard.wizardSteps.3")}],Ie=function(){var e,t;switch(A){case 0:U();break;case 1:G();break;case 2:le(e={},J.USER_LIST,ge),le(e,null===J||void 0===J?void 0:J.GROUP_LIST,Q),t=e,b(A+1),L(ie(ie({},w),t));break;case 3:W()}};return l.createElement(d.Z,{open:!0,className:"wizard create-role-wizard",dimmer:"blurring",size:"small",onClose:f,closeOnDimmerClick:!1,closeOnEscape:!1,"data-testid":y},l.createElement(d.Z.Header,{className:"wizard-header"},S("console:manage.features.roles.addRoleWizard.heading",{type:"Role"}),w&&null!==(t=w[J.BASIC_DETAILS])&&void 0!==t&&t.roleName?" - "+(null===(n=w[J.BASIC_DETAILS])||void 0===n?void 0:n.roleName):"",l.createElement(i.Heading,{as:"h6"},S("console:manage.features.roles.addRoleWizard.subHeading",{type:"role"}))),l.createElement(d.Z.Content,{className:"steps-container"},l.createElement(i.Steps.Group,{current:A},Oe.map((function(e,t){return l.createElement(i.Steps.Step,{key:t,icon:e.icon,title:e.title})})))),l.createElement(d.Z.Content,{className:"content-container",scrolling:!0},Oe[A].content),l.createElement(d.Z.Actions,null,l.createElement(m.Z,null,l.createElement(m.Z.Row,{column:1},l.createElement(m.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.LinkButton,{floated:"left",onClick:function(){return f()},"data-testid":"".concat(y,"-cancel-button")},S("common:cancel"))),l.createElement(m.Z.Column,{mobile:8,tablet:8,computer:8},A<Oe.length-1&&l.createElement(i.PrimaryButton,{floated:"right",onClick:Ie,"data-testid":"".concat(y,"-next-button")},S("console:manage.features.roles.addRoleWizard.buttons.next"),l.createElement(u.Z,{name:"arrow right","data-testid":"".concat(y,"-next-button-icon")})),0===A&&l.createElement(p.Z,{basic:!0,color:"orange",floated:"right",onClick:function(){ye(!0),U()},"data-testid":"".concat(y,"-initial-finish-button")},S("console:manage.features.roles.addRoleWizard.buttons.finish")),A===Oe.length-1&&l.createElement(i.PrimaryButton,{floated:"right",onClick:Ie,loading:Ce,disabled:Ce,"data-testid":"".concat(y,"-finish-button")},S("console:manage.features.roles.addRoleWizard.buttons.finish")),A>0&&l.createElement(i.LinkButton,{floated:"right",onClick:function(){N(A)},"data-testid":"".concat(y,"-previous-button")},l.createElement(u.Z,{name:"arrow left","data-testid":"".concat(y,"-previous-button-icon")}),S("console:manage.features.roles.addRoleWizard.buttons.previous")))))))};ue.defaultProps={initStep:0}},1138:function(e,t,n){n.d(t,{c:function(){return o},T:function(){return s}});var o=function(e,t){return{permission:"".concat(e,"/api/server/v1/permission-management/permissions"),roles:"".concat(e,"/scim2/Roles"),rolesWithoutOrgPath:"".concat(t,"/scim2/Roles")}},r=n(64408),a=n(88087),i=n(99986),l=n(91689),s=function(){return{assignUser:l.r,general:r.r,permissions:a.r,summary:i.r}}},99267:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Fn:function(){return i},eT:function(){return l},$R:function(){return s},nL:function(){return c}});var i="Application/",l="Internal",s="Primary",c=r((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(c,"FEATURE_DICTIONARY",(new Map).set("ROLE_CREATE","roles.create").set("ROLE_UPDATE","roles.update").set("ROLE_DELETE","roles.delete").set("ROLE_READ","roles.read")),a(c,"SUPER_ADMIN_PERMISSION_KEY","/permission/protected")},26264:function(e,t,n){n.d(t,{Fn:function(){return v.Fn},FK:function(){return S.FK},vk:function(){return S.vk},B0:function(){return S.B0},tU:function(){return ae},eT:function(){return v.eT},wB:function(){return S.wB},st:function(){return y},xQ:function(){return o.xQ},Sd:function(){return o.Sd},c$:function(){return ie.c},TT:function(){return ie.T},QW:function(){return o.QW}});var o=n(29850),r=n(69883),a=n(57002),i=n(8890),l=n(95823),s=n(96462),c=n(68905),u=n(64805),d=n(83913),m=n(99104),p=n(70515),f=n(82791),g=n(12847),v=n(99267);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var y=function(e){var t=e.advancedSearch,n=e.defaultListItemLimit,o=e.handleRoleDelete,E=e.isLoading,y=e.onEmptyListPlaceholderActionClick,S=e.onListItemClick,C=e.onSearchQueryClear,R=e.roleList,A=e.selection,b=e.searchQuery,O=e.showListItemActions,I=e.showMetaContent,T=e.showHeader,N=e.showRoleType,_=e["data-testid"],w=(0,u.$G)().t,P=(0,d.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),L=(0,d.v9)((function(e){return e.config.ui.features})),D=h((0,c.useState)(!1),2),Z=D[0],F=D[1],k=h((0,c.useState)(),2),z=k[0],x=k[1],U=function(e){g.m8.push(g.$x.getPaths().get("ROLE_EDIT").replace(":id",e))},j=function(){return b?c.createElement(s.EmptyPlaceholder,{"data-testid":"".concat(_,"-search-empty-placeholder"),action:c.createElement(s.LinkButton,{"data-testid":"".concat(_,"-search-empty-placeholder-clear-button"),onClick:C},w("console:manage.features.roles.list.emptyPlaceholders.search.action")),image:(0,g.jF)().emptySearch,imageSize:"tiny",title:w("console:manage.features.roles.list.emptyPlaceholders.search.title"),subtitle:[w("console:manage.features.roles.list.emptyPlaceholders.search.subtitles.0",{searchQuery:b}),w("console:manage.features.roles.list.emptyPlaceholders.search.subtitles.1")]}):0===(null===R||void 0===R?void 0:R.totalResults)?c.createElement(s.EmptyPlaceholder,{"data-testid":"".concat(_,"-empty-list-empty-placeholder"),action:c.createElement(r.di,{when:r.TA.ROLE_WRITE},c.createElement(s.PrimaryButton,{"data-testid":"".concat(_,"-empty-list-empty-placeholder-add-button"),onClick:y},c.createElement(p.Z,{name:"add"}),w("console:manage.features.roles.list.emptyPlaceholders.emptyRoleList.action",{type:"Role"}))),image:(0,g.jF)().newList,imageSize:"tiny",title:w("console:manage.features.roles.list.emptyPlaceholders.emptyRoleList.title",{type:"role"}),subtitle:[w("console:manage.features.roles.list.emptyPlaceholders.emptyRoleList.subtitles.0",{type:"roles"}),w("console:manage.features.roles.list.emptyPlaceholders.emptyRoleList.subtitles.1",{type:"role"}),w("console:manage.features.roles.list.emptyPlaceholders.emptyRoleList.subtitles.2",{type:"role"})]}):null};return c.createElement(c.Fragment,null,c.createElement(s.DataTable,{className:"roles-list",externalSearch:t,isLoading:E,loadingStateOptions:{count:null!==n&&void 0!==n?n:g.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(O)return[{icon:function(){var e,t;return(0,i.hasRequiredScopes)(null===L||void 0===L?void 0:L.roles,null===L||void 0===L||null===(e=L.roles)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,P)?"pencil alternate":"eye"},onClick:function(e,t){var n,o;return(0,i.hasRequiredScopes)(null===L||void 0===L?void 0:L.roles,null===L||void 0===L||null===(n=L.roles)||void 0===n||null===(o=n.scopes)||void 0===o?void 0:o.update,P)&&U(null===t||void 0===t?void 0:t.id)},popupText:function(){var e,t;return(0,i.hasRequiredScopes)(null===L||void 0===L?void 0:L.roles,null===L||void 0===L||null===(e=L.roles)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,P)?w("console:manage.features.roles.list.popups.edit",{type:"Role"}):w("common:view")},renderer:"semantic-icon"},{hidden:function(e){var t,n;return(null===e||void 0===e?void 0:e.displayName)===a.RoleConstants.ADMIN_ROLE||(null===e||void 0===e?void 0:e.displayName)===a.RoleConstants.ADMIN_GROUP||!(0,i.hasRequiredScopes)(null===L||void 0===L?void 0:L.roles,null===L||void 0===L||null===(t=L.roles)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.delete,P)},icon:function(){return"trash alternate"},onClick:function(e,t){x(t),F(!Z)},popupText:function(){return w("console:manage.features.roles.list.popups.delete",{type:"Role"})},renderer:"semantic-icon"}]}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return c.createElement(f.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(_,"-item-heading")},c.createElement(s.AppAvatar,{image:c.createElement(s.AnimatedAvatar,{name:null===e||void 0===e?void 0:e.displayName[0],size:"mini","data-testid":"".concat(_,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(_,"-item-image")}),c.createElement(f.Z.Content,null,(t=null===e||void 0===e?void 0:e.displayName).includes(v.Fn)?N?c.createElement(c.Fragment,null,c.createElement(m.Z,{"data-testid":"".concat(_,"-role-").concat(t.split("/")[1],"-label"),content:"Application",size:"mini",className:"application-label"}),"/ "+t.split("/")[1]):t.split("/")[1]:N?c.createElement(c.Fragment,null,c.createElement(m.Z,{"data-testid":"".concat(_,"-role-").concat(t,"-label"),content:"Internal",size:"mini",className:"internal-label"}),"/ "+t):t));var t},title:w("console:manage.features.roles.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"lastModified",hidden:!I,id:"lastModified",key:"lastModified",render:function(e){var t;return l.CommonUtils.humanizeDateDifference(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.created)},title:w("console:manage.features.roles.list.columns.lastModified")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:null}],data:null===R||void 0===R?void 0:R.Resources,onRowClick:function(e,t){U(null===t||void 0===t?void 0:t.id),S(e,t)},placeholders:j(),selectable:A,showHeader:T,transparent:!E&&null!==j(),"data-testid":_}),Z&&c.createElement(s.ConfirmationModal,{"data-testid":"".concat(_,"-delete-item-confirmation-modal"),onClose:function(){return F(!1)},type:"negative",open:Z,assertionHint:w("console:manage.features.roles.list.confirmations.deleteItem.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return F(!1)},onPrimaryActionClick:function(){o(z),F(!1)},closeOnDimmerClick:!1},c.createElement(s.ConfirmationModal.Header,null,w("console:manage.features.roles.list.confirmations.deleteItem.header")),c.createElement(s.ConfirmationModal.Message,{attached:!0,negative:!0},w("console:manage.features.roles.list.confirmations.deleteItem.message",{type:"role"})),c.createElement(s.ConfirmationModal.Content,null,w("console:manage.features.roles.list.confirmations.deleteItem.content",{type:"role"}))))};y.defaultProps={selection:!0,showHeader:!1,showListItemActions:!0,showMetaContent:!0,showRoleType:!1};var S=n(81229),C=n(88742),R=n(26278),A=n(26776),b=n(23177),O=n(44706),I=n(84504),T=n(5554),N=n(12558);function _(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){_(a,o,r,i,l,"next",e)}function l(e){_(a,o,r,i,l,"throw",e)}i(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var D=function(e){var t=(0,u.$G)().t,n=(0,d.I0)(),r=e.roleId,a=e.roleObject,i=e.onRoleUpdate,l=e.isGroup,m=e.isReadOnly,p=e["data-testid"],f=P((0,c.useState)(!1),2),v=f[0],h=f[1],E=P((0,c.useState)(""),2),y=E[0],S=E[1],_=P((0,c.useState)(""),2),L=_[0],D=_[1],Z=P((0,c.useState)(""),2),F=Z[0],k=Z[1],z=P((0,c.useState)(!0),2),x=z[0],U=z[1],j=P((0,c.useState)(!1),2),M=j[0],G=j[1],H=P((0,c.useState)(g.fo.PRIMARY_USER_STORE),1)[0],B=P((0,c.useState)(!1),2),W=B[0],V=B[1];(0,c.useEffect)((function(){a&&-1!==a.displayName.indexOf("/")?(D(a.displayName.split("/")[1]),S(a.displayName.split("/")[0])):a&&D(a.displayName)}),[a]),(0,c.useEffect)((function(){""===F&&Y().then((function(e){k(e),G(!1)}))}),[L]);var Y=function(){var e=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.o_.RolenameJavaScriptRegEx);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=w(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",H===g.fo.PRIMARY_USER_STORE){e.next=6;break}return e.next=4,g.w3.getUserStoreRegEx(H,g.fo.USERSTORE_REGEX_PROPERTIES.RolenameRegEx).then((function(e){G(!0),t=e}));case 4:e.next=8;break;case 6:return e.next=8,g.w3.getPrimaryUserStore().then((function(e){var n;(G(!0),e&&e.properties)&&(t=null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.filter((function(e){return"RolenameJavaScriptRegEx"===e.name}))[0].value)}));case 8:return G(!1),e.abrupt("return",new Promise((function(e,n){""!==t?e(t):n("")})));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){n((0,R.addAlert)(e))};return c.createElement(c.Fragment,null,c.createElement(s.EmphasizedSegment,{padded:"very"},c.createElement(A.Forms,{onSubmit:function(e){!function(e){var n,r=null===e||void 0===e||null===(n=e.get("roleName"))||void 0===n?void 0:n.toString(),l={Operations:[{op:"replace",path:"displayName",value:y?y+"/"+r:r}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};V(!0),(0,o.dB)(a.id,l).then((function(){i(),$({description:t("console:manage.features.roles.notifications.updateRole.success.description"),level:C.AlertLevels.SUCCESS,message:t("console:manage.features.roles.notifications.updateRole.success.message")})})).catch((function(){$({description:t("console:manage.features.roles.notifications.updateRole.error.description"),level:C.AlertLevels.ERROR,message:t("console:manage.features.roles.notifications.updateRole.error.message")})})).finally((function(){V(!1)}))}(e)}},c.createElement(b.Z,null,c.createElement(b.Z.Row,{columns:1},c.createElement(b.Z.Column,{mobile:12,tablet:12,computer:6},c.createElement(O.Z.Field,{error:!x},c.createElement("label",{"data-testid":"".concat(p,l?"-group-name-label":"-role-name-label")},t(l?"console:manage.features.groups.edit.basics.fields.groupName.name":"console:manage.features.roles.edit.basics.fields.roleName.name")),c.createElement(A.Field,{required:!0,name:"roleName",label:""!==y?y+" /":null,requiredErrorMessage:t(l?"console:manage.features.groups.edit.basics.fields.groupName.required":"console:manage.features.roles.edit.basics.fields.roleName.required"),placeholder:t(l?"console:manage.features.groups.edit.basics.fields.groupName.placeholder":"console:manage.features.roles.edit.basics.fields.roleName.placeholder"),value:L,validation:function(){var e=w(regeneratorRuntime.mark((function e(a,i){var l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return l=!0,e.next=4,q().then((function(e){l=g.w3.validateInputAgainstRegEx(a,e)}));case 4:return l||(i.isValid=!1,i.errorMessages.push(t("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.invalid",{type:"role"}))),s={filter:"displayName eq "+a.toString(),schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1},e.next=8,(0,o.QW)(s).then((function(e){var n,o;0!==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.totalResults)&&((null===(o=e.data.Resources[0])||void 0===o?void 0:o.id)!==r&&(i.isValid=!1,i.errorMessages.push(t("console:manage.features.roles.addRoleWizard.forms.roleBasicDetails.roleName.validations.duplicate",{type:"Role"}))))})).catch((function(){n((0,R.addAlert)({description:t("console:manage.features.roles.notifications.fetchRoles.genericError.description"),level:C.AlertLevels.ERROR,message:t("console:manage.features.roles.notifications.fetchRoles.genericError.message")}))}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onChange:function(e,t){U(g.w3.validateInputAgainstRegEx(null===t||void 0===t?void 0:t.value,F))},type:"text","data-testid":"".concat(p,l?"-group-name-input":"-role-name-input"),loading:M,readOnly:m})))),c.createElement(b.Z.Row,{columns:1},c.createElement(b.Z.Column,{mobile:16,tablet:16,computer:8},!m&&c.createElement(I.Z,{primary:!0,type:"submit",size:"small",loading:W,className:"form-button","data-testid":"".concat(p,l?"-group-update-button":"-role-update-button"),disabled:M||W},t("console:manage.features.roles.edit.basics.buttons.update"))))))),c.createElement(T.Z,{hidden:!0}),!m&&c.createElement(s.DangerZoneGroup,{sectionHeader:"Danger Zone"},c.createElement(s.DangerZone,{actionTitle:t("console:manage.features.roles.edit.basics.dangerZone.actionTitle",l?{type:"Group"}:{type:"Role"}),header:t("console:manage.features.roles.edit.basics.dangerZone.header",l?{type:"group"}:{type:"role"}),subheader:t("console:manage.features.roles.edit.basics.dangerZone.subheader",l?{type:"group"}:{type:"role"}),onActionClick:function(){return h(!v)},"data-testid":"".concat(p,l?"-group-danger-zone":"-role-danger-zone")})),v&&c.createElement(s.ConfirmationModal,{onClose:function(){return h(!1)},type:"negative",open:v,assertionHint:t("console:manage.features.roles.edit.basics.confirmation.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return h(!1)},onPrimaryActionClick:function(){return e=a.id,void(0,o.iy)(e).then((function(){$({description:t("console:manage.features.roles.notifications.deleteRole.success.description"),level:C.AlertLevels.SUCCESS,message:t("console:manage.features.roles.notifications.deleteRole.success.message")}),l?g.m8.push(g.$x.getPaths().get("GROUPS")):g.m8.push(g.$x.getPaths().get("ROLES"))}));var e},"data-testid":"".concat(p,l?"-group-confirmation-modal":"-role-confirmation-modal"),closeOnDimmerClick:!1},c.createElement(s.ConfirmationModal.Header,null,t("console:manage.features.roles.edit.basics.confirmation.header")),c.createElement(s.ConfirmationModal.Message,{attached:!0,negative:!0},t("console:manage.features.roles.edit.basics.confirmation.message",{type:l?"group.":"role."})),c.createElement(s.ConfirmationModal.Content,null,t("console:manage.features.roles.edit.basics.confirmation.content",{type:l?"group":"role"}))))},Z=n(92303),F=n(88650),k=n(49798),z=n(87289),x=n(85027),U=n(58704),j=n(1410),M=n(42463);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"===typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var $=function(e){var t=e.role,n=e.onRoleUpdate,o=e.isReadOnly,r=(0,u.$G)().t,a=(0,d.I0)(),i=V((0,c.useState)(!1),2),l=i[0],f=i[1],h=V((0,c.useState)([]),2),E=h[0],y=h[1],S=V((0,c.useState)([]),2),A=S[0],O=S[1],N=V((0,c.useState)([]),2),_=N[0],w=N[1],P=V((0,c.useState)([]),2),L=P[0],D=P[1],G=V((0,c.useState)(void 0),2),B=G[0],Y=G[1],q=V((0,c.useState)(void 0),2),$=q[0],K=q[1],Q=V((0,c.useState)([]),2),X=Q[0],J=Q[1],ee=V((0,c.useState)([]),2),te=ee[0],ne=ee[1],oe=V((0,c.useState)(!1),2),re=oe[0],ae=oe[1],ie=V((0,c.useState)(!1),2),le=ie[0],se=ie[1],ce=V((0,c.useState)([]),2),ue=ce[0],de=ce[1],me=V((0,c.useState)(!1),2),pe=me[0],fe=me[1],ge=V((0,c.useState)(!0),2),ve=ge[0],he=ge[1],Ee=V((0,s.useWizardAlert)(),3),ye=Ee[0],Se=Ee[1],Ce=Ee[2];(0,c.useEffect)((function(){t&&(Re(),de(t.groups))}),[]),(0,c.useEffect)((function(){ne(le?A:[])}),[le]),(0,c.useEffect)((function(){J(re?E:[])}),[re]),(0,c.useEffect)((function(){t&&(Re(),de(t.groups))}),[t]),(0,c.useEffect)((function(){(0,M.hI)(null).then((function(e){Y(e.data.Resources)})),he(!1)}),[]);var Re=function(){var e=new Map;t.groups&&t.groups instanceof Array?((0,k.Z)(t.groups,(function(t){var n=t.display.split("/");n[0]!==v.Fn&&n[0]!==v.eT&&e.set(t.display,t.value)})),K(e)):K(void 0)},Ae=function(){ae(!re)},be=function(){se(!le)},Oe=function(){var e=W(A);(null===X||void 0===X?void 0:X.length)>0&&X.map((function(t){null!==A&&void 0!==A&&A.includes(t)||e.push(t)})),O(e),D(e),y(E.filter((function(t){return!(null!==e&&void 0!==e&&e.includes(t))}))),w(E.filter((function(t){return!(null!==e&&void 0!==e&&e.includes(t))}))),ne([]),ae(!1)},Ie=function(){var e=W(E);(null===te||void 0===te?void 0:te.length)>0&&te.map((function(t){null!==E&&void 0!==E&&E.includes(t)||e.push(t)})),y(e),w(e),O(null===A||void 0===A?void 0:A.filter((function(t){return!(null!==e&&void 0!==e&&e.includes(t))}))),D(null===A||void 0===A?void 0:A.filter((function(t){return!(null!==e&&void 0!==e&&e.includes(t))}))),J([]),se(!1)},Te=function(){!function(){var e=B?W(B):[],t=[];if(e&&$){var n=Array.from(null===$||void 0===$?void 0:$.values());(0,F.Z)(e,(function(e){n.includes(null===e||void 0===e?void 0:e.id)&&t.push(e)}))}O(t),D(t),y(e.filter((function(e){return!(null!==t&&void 0!==t&&t.includes(e))}))),w(e.filter((function(e){return!(null!==t&&void 0!==t&&t.includes(e))})))}(),f(!0)},Ne=function(){f(!1)},_e=function(e,t){var n=t.value,o=[];if((0,z.Z)(n))y(_);else{var r=new RegExp((0,Z.Z)(n),"i");E&&E.map((function(e){r.test(e.displayName)&&(o.push(e),y(o))}))}},we=function(e,t){var n=t.value,o=[];if((0,z.Z)(n))O(L);else{var r=new RegExp((0,Z.Z)(n),"i");A&&(null===A||void 0===A||A.map((function(e){r.test(e.displayName)&&(o.push(e),O(o))})))}},Pe=function(e){var t=null===e||void 0===e?void 0:e.split("/"),n={labelColor:"olive",labelText:v.$R};return t[0]!==v.Fn&&t[0]!==v.eT&&(null===t||void 0===t?void 0:t.length)>1&&(n=H(H({},n),{},{labelText:t[0]})),n},Le=function(e){var t,n=null===(t=e)||void 0===t?void 0:t.split("/");return 1!==(null===n||void 0===n?void 0:n.length)&&(e=n[1]),e};return c.createElement(c.Fragment,null,c.createElement(s.Heading,{as:"h4"},r("console:manage.features.roles.edit.groups.heading"),c.createElement(s.Heading,{subHeading:!0,ellipsis:!0,as:"h6"},r("console:manage.features.roles.edit.groups.subHeading"))),c.createElement(T.Z,{hidden:!0}),c.createElement(b.Z,null,c.createElement(b.Z.Row,null,c.createElement(b.Z.Column,{computer:8},(null===$||void 0===$?void 0:$.size)>0?c.createElement(s.EmphasizedSegment,{"data-testid":"role-mgt-groups-list",className:"user-role-edit-header-segment"},c.createElement(b.Z.Row,null,c.createElement(b.Z.Column,null,c.createElement(j.Z,{"data-testid":"role-mgt-groups-list-search-input",icon:c.createElement(p.Z,{name:"search"}),onChange:function(e,n){var o=n.value,r=[];if((0,z.Z)(o))de(t.groups);else{var a=new RegExp((0,Z.Z)(o),"i");ue&&(null===ue||void 0===ue||ue.map((function(e){1===e.display.split("/").length&&a.test(e.display)&&(r.push(e),de(r))})))}},placeholder:r("console:manage.features.user.updateUser.groups.editGroups.searchPlaceholder"),floated:"left",size:"small"}),!o&&c.createElement(I.Z,{"data-testid":"role-mgt-groups-list-update-button",size:"medium",icon:"pencil",floated:"right",onClick:Te}))),c.createElement(b.Z.Row,null,c.createElement(U.Z,{singleLine:!0,compact:!0},c.createElement(U.Z.Header,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.HeaderCell,null,c.createElement("strong",null,r("console:manage.features.user.updateUser.groups.editGroups.groupList.headers.0"))),c.createElement(U.Z.HeaderCell,null,c.createElement("strong",null,r("console:manage.features.user.updateUser.groups.editGroups.groupList.headers.1"))))),c.createElement(U.Z.Body,null,null===ue||void 0===ue?void 0:ue.map((function(e,t){var n,o=null===e||void 0===e||null===(n=e.display)||void 0===n?void 0:n.split("/");if(o[0]!==v.Fn&&o[0]!==v.eT)return c.createElement(U.Z.Row,{key:t},c.createElement(U.Z.Cell,null,1===(null===o||void 0===o?void 0:o.length)?c.createElement(m.Z,{color:"olive"},v.$R):c.createElement(m.Z,{color:"olive"},o[0])),c.createElement(U.Z.Cell,null,1===(null===o||void 0===o?void 0:o.length)?null===e||void 0===e?void 0:e.display:o[1]))})))))):ve?c.createElement(s.ContentLoader,{className:"p-3",active:!0}):c.createElement(s.EmphasizedSegment,null,c.createElement(s.EmptyPlaceholder,{"data-testid":"role-mgt-empty-groups-list",title:r("console:manage.features.roles.edit.groups.emptyPlaceholder.title"),subtitle:[r("console:manage.features.roles.edit.groups.emptyPlaceholder.subtitles")],action:!o&&c.createElement(s.PrimaryButton,{"data-testid":"role-mgt-empty-groups-list-assign-group-button",icon:"plus",onClick:Te},r("console:manage.features.roles.edit.groups.emptyPlaceholder.action")),image:(0,g.jF)().emptyList,imageSize:"tiny"}))))),c.createElement(x.Z,{"data-testid":"role-mgt-update-groups-modal",open:l,size:"small",className:"user-roles"},c.createElement(x.Z.Header,null,r("console:manage.features.roles.edit.groups.addGroupsModal.heading"),c.createElement(s.Heading,{subHeading:!0,ellipsis:!0,as:"h6"},r("console:manage.features.roles.edit.groups.addGroupsModal.subHeading"))),c.createElement(x.Z.Content,{image:!0},ye&&Ce,c.createElement(s.TransferComponent,{searchPlaceholder:r("console:manage.features.transferList.searchPlaceholder",{type:"groups"}),addItems:Oe,removeItems:Ie,handleUnelectedListSearch:_e,handleSelectedListSearch:we,"data-testid":"role-mgt-update-groups-modal"},c.createElement(s.TransferList,{isListEmpty:!((null===E||void 0===E?void 0:E.length)>0),listType:"unselected",listHeaders:[r("console:manage.features.transferList.list.headers.0"),r("console:manage.features.transferList.list.headers.1"),""],handleHeaderCheckboxChange:Ae,isHeaderCheckboxChecked:re,emptyPlaceholderContent:r("console:manage.features.transferList.list.emptyPlaceholders.roles.unselected",{type:"groups"}),"data-testid":"role-mgt-update-groups-modal-unselected-groups-select-all-checkbox",emptyPlaceholderDefaultContent:r("console:manage.features.transferList.list.emptyPlaceholders.default")},null===E||void 0===E?void 0:E.map((function(e,t){return c.createElement(s.TransferListItem,{handleItemChange:function(){return function(e){var t=W(X);null!==t&&void 0!==t&&t.includes(e)?(t.splice(t.indexOf(e),1),J(t)):(t.push(e),J(t))}(e)},key:t,listItem:Le(null===e||void 0===e?void 0:e.displayName),listItemId:e.id,listItemIndex:t,listItemTypeLabel:Pe(null===e||void 0===e?void 0:e.displayName),isItemChecked:X.includes(e),showSecondaryActions:!1,"data-testid":"role-mgt-update-groups-modal-unselected-groups"})}))),c.createElement(s.TransferList,{isListEmpty:!((null===A||void 0===A?void 0:A.length)>0),listType:"selected",listHeaders:[r("console:manage.features.transferList.list.headers.0"),r("console:manage.features.transferList.list.headers.1")],handleHeaderCheckboxChange:be,isHeaderCheckboxChecked:le,emptyPlaceholderContent:r("console:manage.features.transferList.list.emptyPlaceholders.roles.selected",{type:"groups"}),"data-testid":"role-mgt-update-groups-modal-selected-groups-select-all-checkbox",emptyPlaceholderDefaultContent:r("console:manage.features.transferList.list.emptyPlaceholders.default")},null===A||void 0===A?void 0:A.map((function(e,t){return c.createElement(s.TransferListItem,{handleItemChange:function(){return function(e){var t=W(te);null!==t&&void 0!==t&&t.includes(e)?(t.splice(t.indexOf(e),1),ne(t)):(t.push(e),ne(t))}(e)},key:t,listItem:Le(null===e||void 0===e?void 0:e.displayName),listItemId:null===e||void 0===e?void 0:e.id,listItemIndex:t,listItemTypeLabel:Pe(null===e||void 0===e?void 0:e.displayName),isItemChecked:te.includes(e),showSecondaryActions:!1,"data-testid":"role-mgt-update-groups-modal-selected-groups"})}))))),c.createElement(x.Z.Actions,null,c.createElement(b.Z,null,c.createElement(b.Z.Row,{columns:2},c.createElement(b.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(s.LinkButton,{"data-testid":"role-mgt-update-groups-modal-cancel-button",floated:"left",onClick:Ne},r("common:cancel"))),c.createElement(b.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(s.PrimaryButton,{"data-testid":"role-mgt-update-groups-modal-save-button",floated:"right",loading:pe,disabled:pe,onClick:function(){return function(e,t){var o,i=[];t.map((function(e){i.push(e.id)}));var l,s,c={Operations:[],failOnErrors:1,schemas:["urn:ietf:params:scim:api:messages:2.0:BulkRequest"]},u={data:{Operations:[]},method:"PATCH",path:"/Roles/"+e.id},d=[],m=[],p=[],f=[];$&&(p=W($.values())),(null===i||void 0===i?void 0:i.length)>0&&i.map((function(e){var t;null!==(t=p)&&void 0!==t&&t.includes(e)?p.splice(p.indexOf(e),1):f.push(e)})),p&&(null===(o=p)||void 0===o?void 0:o.length)>0&&(p.map((function(e){var t={op:"remove",path:"groups[value eq ".concat(e,"]")};d.push(t)})),(l=u.data.Operations).push.apply(l,d),c.Operations.push(u)),f&&(null===f||void 0===f?void 0:f.length)>0&&(f.map((function(e){m.push({op:"add",value:{groups:[{value:e}]}})})),(s=u.data.Operations).push.apply(s,m),c.Operations.push(u)),fe(!0),(0,g.fU)(c).then((function(){a((0,R.addAlert)({description:r("console:manage.features.roles.notifications.updateRole.success.description"),level:C.AlertLevels.SUCCESS,message:r("console:manage.features.roles.notifications.updateRole.success.message")})),Ne(),n(e.id)})).catch((function(e){var t,n,o,a,i,l;404!==(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)&&(null!==e&&void 0!==e&&e.response&&null!==e&&void 0!==e&&null!==(n=e.response)&&void 0!==n&&n.data&&null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.description?Se({description:null===(i=e.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.description,level:C.AlertLevels.ERROR,message:r("console:manage.features.roles.notifications.updateRole.error.message")}):Se({description:r("console:manage.features.roles.notifications.updateRole.genericError.description"),level:C.AlertLevels.ERROR,message:r("console:manage.features.roles.notifications.updateRole.genericError.message")}))})).finally((function(){fe(!1)}))}(t,A)}},r("common:save"))))))))};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var X=function(e){var t=(0,u.$G)().t,n=(0,d.I0)(),r=K((0,c.useState)(!1),2),a=r[0],i=r[1],l=e.isReadOnly,s=e.roleObject,m=e.onRoleUpdate,p=e.isGroup;return c.createElement("div",{className:"permissions-edit-container"},c.createElement(S.wB,{isReadOnly:l,isEdit:!l,isRole:!0,onSubmit:function(e){var r={Operations:[{op:"replace",path:"permissions",value:e.map((function(e){return e.key}))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};i(!0),(0,o.ul)(s.id,r).then((function(){n((0,R.addAlert)({description:t(p?"console:manage.features.groups.notifications.updateGroup.success.description":"console:manage.features.roles.notifications.updateRole.success.description"),level:C.AlertLevels.SUCCESS,message:t(p?"console:manage.features.groups.notifications.updateGroup.success.message":"console:manage.features.roles.notifications.updateRole.success.message")})),m()})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?n((0,R.addAlert)({description:t(p?"console:manage.features.groups.notifications.createPermission.error.description":"console:manage.features.roles.notifications.createPermission.error.description",{description:e.response.data.detail}),level:C.AlertLevels.ERROR,message:t(p?"console:manage.features.groups.notifications.createPermission.error.message":"console:manage.features.roles.notifications.createPermission.error.message")})):n((0,R.addAlert)({description:t(p?"console:manage.features.groups.notifications.createPermission.genericError.description":"console:manage.features.roles.notifications.createPermission.genericError.description"),level:C.AlertLevels.ERROR,message:t(p?"console:manage.features.groups.notifications.createPermission.genericError.message":"console:manage.features.roles.notifications.createPermission.genericError.message")})):n((0,R.addAlert)({description:t(p?"console:manage.features.groups.notifications.createPermission.error.description":"console:manage.features.roles.notifications.createPermission.error.description"),level:C.AlertLevels.ERROR,message:t(p?"console:manage.features.groups.notifications.createPermission.error.message":"console:manage.features.roles.notifications.createPermission.error.message")}))})).finally((function(){i(!1)}))},roleObject:s,isSubmitting:a}))};function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"===typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var ne=function(e){var t=(0,u.$G)().t,n=(0,d.I0)(),r=e.roleObject,a=e.onRoleUpdate,i=e.isReadOnly,l=J((0,c.useState)(void 0),2),s=l[0],m=l[1],p=J((0,c.useState)(!1),2),f=p[0],g=p[1];(0,c.useEffect)((function(){var e=r.displayName;-1!==e.indexOf("/")?m(e.split("/")[0]):m(v.$R)}),[s,r]);var h=function(e){n((0,R.addAlert)(e))};return c.createElement(S.FK,{"data-testid":"role-mgt-edit-role-users",isGroup:!1,isEdit:!0,isReadOnly:i,userStore:s,assignedUsers:r.users,onSubmit:function(e){var n,i=[],l=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ee(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{for(l.s();!(n=l.n()).done;){var s=n.value;i.push({value:s.id})}}catch(e){l.e(e)}finally{l.f()}var c={Operations:[{op:"replace",path:"users",value:i}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};g(!0),(0,o.dB)(r.id,c).then((function(){h({description:t("console:manage.features.roles.notifications.updateRole.success.description"),level:C.AlertLevels.SUCCESS,message:t("console:manage.features.roles.notifications.updateRole.success.message")}),a()})).catch((function(){h({description:t("console:manage.features.roles.notifications.updateRole.error.description"),level:C.AlertLevels.ERROR,message:t("console:manage.features.roles.notifications.updateRole.error.message")})})).finally((function(){g(!1)}))},isSubmitting:f})};function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var ae=function(e){var t=e.roleId,n=e.roleObject,o=e.onRoleUpdate,r=(0,u.$G)().t,l=(0,d.v9)((function(e){return e.config.ui.features})),m=(0,d.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),p=oe((0,c.useState)(!1),2),f=p[0],v=p[1],h=oe((0,c.useState)(!1),2),E=h[0],y=h[1];(0,c.useEffect)((function(){n&&v(g.m8.location.pathname.includes("/groups/"))}),[n]),(0,c.useEffect)((function(){n&&y(n.displayName===a.RoleConstants.ADMIN_ROLE||n.displayName===a.RoleConstants.ADMIN_GROUP)}),[n]);return c.createElement(s.ResourceTab,{panes:[{menuItem:r("console:manage.features.roles.edit.menuItems.basic"),render:function(){var e,r;return c.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(D,{isReadOnly:E||!(0,i.hasRequiredScopes)(null===l||void 0===l?void 0:l.roles,null===l||void 0===l||null===(e=l.roles)||void 0===e||null===(r=e.scopes)||void 0===r?void 0:r.update,m),"data-testid":"role-mgt-edit-role-basic",roleId:t,isGroup:f,roleObject:n,onRoleUpdate:o}))}},{menuItem:r("console:manage.features.roles.edit.menuItems.permissions"),render:function(){var e,t;return c.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(X,{isReadOnly:E||!(0,i.hasRequiredScopes)(null===l||void 0===l?void 0:l.roles,null===l||void 0===l||null===(e=l.roles)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,m),"data-testid":"role-mgt-edit-role-permissions",isGroup:!1,roleObject:n,onRoleUpdate:o}))}},{menuItem:r("console:manage.features.roles.edit.menuItems.groups"),render:function(){var e,t;return c.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement($,{isReadOnly:!(0,i.hasRequiredScopes)(null===l||void 0===l?void 0:l.roles,null===l||void 0===l||null===(e=l.roles)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,m),"data-testid":"role-mgt-edit-role-groups",role:n,onRoleUpdate:o}))}},{menuItem:r("console:manage.features.roles.edit.menuItems.users"),render:function(){var e,t;return c.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(ne,{isReadOnly:!(0,i.hasRequiredScopes)(null===l||void 0===l?void 0:l.roles,null===l||void 0===l||null===(e=l.roles)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,m),"data-testid":"role-mgt-edit-role-users",isGroup:!1,roleObject:n,onRoleUpdate:o}))}}]})},ie=n(1138);n(47435),n(4337),n(96587)},4337:function(e,t,n){n.r(t);var o=n(96462),r=n(68905),a=n(64805),i=n(83913),l=n(12847),s=n(26264),c=n(29850);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}t.default=function(){var e=(0,a.$G)().t,t=(0,i.v9)((function(e){return e.config.ui.features})),n=u((0,r.useState)(void 0),2),d=n[0],m=n[1],p=u((0,r.useState)(),2),f=p[0],g=p[1],v=u((0,r.useState)(!1),2),h=v[0],E=v[1],y=function(e){E(!0),(0,c.xQ)(e).then((function(e){200===e.status&&g(e.data)})).catch((function(){})).finally((function(){E(!1)}))};(0,r.useEffect)((function(){var e=l.m8.location.pathname.split("/"),t=e[e.length-1];m(t),y(t)}),[]);return r.createElement(o.PageLayout,{isLoading:h,title:f&&null!==f&&void 0!==f&&f.displayName?null===f||void 0===f?void 0:f.displayName:e("console:manage.pages.rolesEdit.title"),pageTitle:e("console:manage.pages.rolesEdit.title"),backButton:{onClick:function(){l.m8.push(l.$x.getPaths().get("ROLES"))},text:e("console:manage.pages.rolesEdit.backButton",{type:"roles"})},titleTextAlign:"left",bottomMargin:!1},r.createElement(s.tU,{roleObject:f,roleId:d,onRoleUpdate:function(){y(d)},featureConfig:t}))}},47435:function(e,t,n){n.r(t);var o=n(69883),r=n(3844),a=n(88742),i=n(26278),l=n(96462),s=n(98812),c=n(68905),u=n(64805),d=n(83913),m=n(70515),p=n(74364),f=n(12847),g=n(26264),v=n(29850),h=n(99267);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A=[{key:1,text:"Name",value:"name"},{key:3,text:"Created date",value:"createdDate"},{key:4,text:"Last updated",value:"lastUpdated"}],b=[{key:"all",text:"Show All",value:"all"},{key:h.Fn,text:"Application Domain",value:h.Fn},{key:h.eT,text:"Internal Domain",value:h.eT}];t.default=function(){var e,t,n,E,S,R=(0,d.I0)(),O=(0,u.$G)().t,I=C((0,c.useState)(f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),T=I[0],N=I[1],_=C((0,c.useState)(0),2),w=_[0],P=_[1],L=C((0,c.useState)(!1),2),D=L[0],Z=L[1],F=C((0,c.useState)(!1),2),k=(F[0],F[1]),z=C((0,c.useState)([]),2)[1],x=C((0,c.useState)(void 0),1)[0],U=C((0,c.useState)("all"),2),j=U[0],M=U[1],G=C((0,c.useState)(""),2),H=G[0],B=G[1],W=C((0,c.useState)(!1),1)[0],V=C((0,c.useState)(!1),2),Y=V[0],q=V[1],$=C((0,c.useState)(!1),2),K=$[0],Q=$[1],X=C((0,c.useState)(),2),J=X[0],ee=X[1],te=C((0,c.useState)(),2),ne=te[0],oe=te[1],re=C((0,c.useState)(A[0]),2),ae=re[0],ie=re[1];(0,c.useEffect)((function(){se()}),[]),(0,c.useEffect)((function(){le()}),[j,x]);var le=function(){q(!0),(0,r.getRolesList)(x).then((function(e){if(200===e.status){var t=e.data.Resources;if(t&&t instanceof Array){var n=t.filter((function(e){return"all"===j?e.displayName:h.Fn===j?e.displayName.includes(h.Fn):h.eT===j?!e.displayName.includes(h.Fn):void 0}));e.data.Resources=n,ee(e.data),ce(0,T,e.data)}}})).finally((function(){q(!1)}))},se=function(){var e=[{key:-2,text:"All user stores",value:null},{key:-1,text:"Primary",value:"primary"}],t={key:null,text:"",value:""};(0,r.getUserStoreList)(f.h.getState().config.endpoints.userStores).then((function(n){e===[]&&e.push(t),n.data.map((function(n,o){t={key:o,text:n.name,value:n.name},e.push(t)})),z(e)})),z(e)},ce=function(e,t,n){var o,r=y(y(y({},n),n.Resources),{},{Resources:null===n||void 0===n||null===(o=n.Resources)||void 0===o?void 0:o.slice(e,t+e)});oe(r)},ue=function(e){null!==e&&"displayName sw "!==e?function(e){var t={filter:e,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1};B(e),(0,v.QW)(t).then((function(e){if(200===e.status){var t,n,o=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.Resources,r=[];o&&(r=o);var a=y(y(y({},o),null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.Resources),{},{Resources:r});ee(a),oe(a)}}))}(e):le()};return c.createElement(l.PageLayout,{action:(Y||!(!H&&(null===ne||void 0===ne||null===(e=ne.Resources)||void 0===e?void 0:e.length)<=0))&&c.createElement(o.di,{when:o.TA.ROLE_WRITE},c.createElement(l.PrimaryButton,{"data-testid":"role-mgt-roles-list-add-button",onClick:function(){return Z(!0)}},c.createElement(m.Z,{"data-testid":"role-mgt-roles-list-add-button-icon",name:"add"}),O("console:manage.features.roles.list.buttons.addButton",{type:"Role"}))),title:O("console:manage.pages.roles.title"),pageTitle:O("console:manage.pages.roles.title"),description:O("console:manage.pages.roles.subTitle")},!W&&c.createElement(l.ListLayout,{advancedSearch:c.createElement(f.nC,{"data-testid":"role-mgt-roles-list-advanced-search",onFilter:ue,filterAttributeOptions:[{key:0,text:"Name",value:"displayName"}],filterAttributePlaceholder:O("console:manage.features.roles.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:O("console:manage.features.roles.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:O("console:manage.features.roles.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:O("console:manage.features.roles.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:K}),currentListSize:T,listItemLimit:T,onItemsPerPageDropdownChange:function(e,t){N(t.value),ce(w,t.value,J)},onPageChange:function(e,t){var n=(t.activePage-1)*T;P(n),ce(n,T,J)},onSortStrategyChange:function(e,t){ie((0,s.Z)(A,(function(e){return t.value===e.value})))},sortStrategy:ae,rightActionPanel:c.createElement(p.Z,{"data-testid":"role-mgt-roles-list-filters-dropdown",selection:!0,options:b,placeholder:O("console:manage.features.roles.list.buttons.filterDropdown"),onChange:function(e,t){M(t.value)}}),showPagination:(null===ne||void 0===ne||null===(t=ne.Resources)||void 0===t?void 0:t.length)>0,showTopActionPanel:Y||!(!H&&(null===ne||void 0===ne||null===(n=ne.Resources)||void 0===n?void 0:n.length)<=0),totalPages:Math.ceil((null===J||void 0===J||null===(E=J.Resources)||void 0===E?void 0:E.length)/T),totalListSize:null===J||void 0===J||null===(S=J.Resources)||void 0===S?void 0:S.length},c.createElement(g.st,{advancedSearch:c.createElement(f.nC,{"data-testid":"role-mgt-roles-list-advanced-search",onFilter:ue,filterAttributeOptions:[{key:0,text:"Name",value:"displayName"}],filterAttributePlaceholder:O("console:manage.features.roles.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:O("console:manage.features.roles.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:O("console:manage.features.roles.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:O("console:manage.features.roles.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"sw",triggerClearQuery:K}),"data-testid":"role-mgt-roles-list",handleRoleDelete:function(e){(0,v.iy)(e.id).then((function(){var e;e={description:O("console:manage.features.roles.notifications.deleteRole.success.description"),level:a.AlertLevels.SUCCESS,message:O("console:manage.features.roles.notifications.deleteRole.success.message")},R((0,i.addAlert)(e)),le()}))},isGroup:!1,isLoading:Y,onEmptyListPlaceholderActionClick:function(){return Z(!0)},onSearchQueryClear:function(){Q(!K),B(null),le()},roleList:ne,searchQuery:H})),D&&c.createElement(g.B0,{"data-testid":"role-mgt-create-role-wizard",isAddGroup:!1,closeWizard:function(){return Z(!1)},updateList:function(){return k(!0)}}))}},96587:function(e,t,n){n.d(t,{J:function(){return u}});var o=n(87289),r=n(12847),a=n(29850),i=n(83108);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=s((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));c(u,"validateRoleName",(function(e){var t={filter:"displayName eq "+e,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1};return(0,a.QW)(t).then((function(e){var t;return 0===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.totalResults)}))})),c(u,"getAllPermissions",(function(e,t){return(0,a.pZ)().then((function(t){if(200===t.status&&t.data&&t.data instanceof Array){var n,a,l;return(null===(n=(a=((0,o.Z)(e)?t.data:t.data.filter((function(t){return!e.includes(t.resourcePath)}))).reduce((function(e,t){return(0,i.H)(t,t.resourcePath.replace(/^\/|\/$/g,"").split("/"),e)}),[]))[0])||void 0===n?void 0:n.title)!==r.$x.PERMISSIONS_ROOT_NODE?null===(l=a[0])||void 0===l?void 0:l.children:a}}))}))},21275:function(e,t,n){n.d(t,{R6:function(){return u},dB:function(){return d},cV:function(){return m},pR:function(){return p},c8:function(){return f}});var o=n(19486),r=n(82817),a=n(88742),i=n(12847);function l(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){l(a,o,r,i,s,"next",e)}function s(e){l(a,o,r,i,s,"throw",e)}i(void 0)}))}}var c=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),u=function(){var e=s(regeneratorRuntime.mark((function e(t){var n,o,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,o=t.params,l={data:n,headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.POST,url:i.h.getState().config.endpoints.createSecret+"/".concat(o.secretType)},e.prev=2,e.next=5,c(l);case 5:if((s=e.sent).status===a.HttpCodes.CREATED){e.next=8;break}return e.abrupt("return",Promise.reject(new r.IdentityAppsApiException("Failed to create the secret ".concat(n.name,"."))));case 8:return e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=s(regeneratorRuntime.mark((function e(t){var n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,o={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:i.h.getState().config.endpoints.getSecret+"/".concat(n.secretType,"/").concat(n.secretName)},e.prev=2,e.next=5,c(o);case 5:if((l=e.sent).status===a.HttpCodes.OK){e.next=8;break}return e.abrupt("return",Promise.reject(new r.IdentityAppsApiException("Failed to get the secret ".concat(n.secretName,"."))));case 8:return e.abrupt("return",l);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=s(regeneratorRuntime.mark((function e(t){var n,o,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,o=t.params,l={data:n,headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.PATCH,url:i.h.getState().config.endpoints.updateSecret+"/".concat(o.secretType,"/").concat(o.secretName)},e.prev=2,e.next=5,c(l);case 5:if((s=e.sent).status===a.HttpCodes.OK){e.next=8;break}return e.abrupt("return",Promise.reject(new r.IdentityAppsApiException("Failed to update the secret ".concat(o.secretName,"."))));case 8:return e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=s(regeneratorRuntime.mark((function e(t){var n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,o={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:i.h.getState().config.endpoints.getSecretList+"/".concat(n.secretType)},e.prev=2,e.next=5,c(o);case 5:if((l=e.sent).status===a.HttpCodes.OK){e.next=8;break}return e.abrupt("return",Promise.reject(new r.IdentityAppsApiException("Failed to get the secret list of ".concat(n.secretType,"."))));case 8:return e.abrupt("return",l);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=s(regeneratorRuntime.mark((function e(t){var n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params,o={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.DELETE,url:i.h.getState().config.endpoints.deleteSecret+"/".concat(n.secretType,"/").concat(n.secretName)},e.prev=2,e.next=5,c(o);case 5:if((l=e.sent).status===a.HttpCodes.NO_CONTENT){e.next=8;break}return e.abrupt("return",Promise.reject(new r.IdentityAppsApiException("Failed to delete the secret ".concat(n.secretType,"."))));case 8:return e.abrupt("return",l);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},34861:function(e,t,n){var o=n(88742),r=n(26278),a=n(23339),i=n(96462),l=n(68905),s=n(64805),c=n(83913),u=n(85027),d=n(23177),m=n(21275),p=n(40759),f=n(88236);function g(e,t,n,o,r,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){g(a,o,r,i,l,"next",e)}function l(e){g(a,o,r,i,l,"throw",e)}i(void 0)}))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var y=function(e){var t,n=e.onClose,g=e["data-componentid"],E=h((0,i.useWizardAlert)(),3),y=E[0],S=E[1],C=E[2],R=(0,c.I0)(),A=(0,s.$G)().t,b=(0,l.useRef)(null),O=h((0,l.useState)(!0),2),I=O[0],T=O[1],N=h((0,l.useState)(!1),2),_=N[0],w=N[1],P=h((0,l.useState)(!1),2),L=P[0],D=P[1],Z=h((0,l.useState)([]),2),F=Z[0],k=Z[1],z=h((0,l.useState)(new Set),2),x=z[0],U=z[1],j=h((0,l.useState)(!1),2),M=j[0],G=j[1],H=h((0,l.useState)(!1),2),B=H[0],W=H[1],V=h((0,l.useState)({}),2),Y=V[0],q=V[1],$=h((0,l.useState)(!0),2),K=$[0],Q=($[1],(0,c.v9)((function(e){return e.config})));(0,l.useEffect)((function(){w(!0),ee().then(function(){var e=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(t),n=t.length?t[0].value:p.v6,q({secret_description:p.v6,secret_name:p.v6,secret_type:n,secret_value:p.v6}),!n){e.next=11;break}return e.t0=U,e.t1=Set,e.next=8,te(n);case 8:e.t2=e.sent.map((function(e){return e.secretName})),e.t3=new e.t1(e.t2),(0,e.t0)(e.t3);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t,n;if(e.response&&e.response.data&&e.response.data.description)return S({description:null===(t=e.response.data)||void 0===t?void 0:t.description,level:o.AlertLevels.ERROR,message:null===(n=e.response.data)||void 0===n?void 0:n.message}),void w(!1);S({description:A("console:develop.features.secrets.errors.generic.description"),level:o.AlertLevels.ERROR,message:A("console:develop.features.secrets.errors.generic.message")})})).finally((function(){w(!1)}))}),[]),(0,l.useEffect)((function(){D(M||B)}),[M,B]);var X=function(){var e=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,(0,m.R6)({body:{description:t.secret_description,name:t.secret_name,value:t.secret_value},params:{secretType:t.secret_type}});case 4:R((0,r.addAlert)({description:A("console:develop.features.secrets.alerts.createdSecret.description",{secretName:t.secret_name,secretType:t.secret_type}),level:o.AlertLevels.SUCCESS,message:A("console:develop.features.secrets.alerts.createdSecret.message")})),J(!0),w(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),w(!1),e.t0.response&&e.t0.response.data&&e.t0.response.data.description&&S({description:e.t0.response.data.description,level:o.AlertLevels.ERROR,message:null===(n=e.t0.response.data)||void 0===n?void 0:n.message});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e){n?n(e):T(!1)},ee=function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve([{key:1,text:"Adaptive Script",value:"ADAPTIVE_AUTH_CALL_CHOREO"}]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=v(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.pR)({params:{secretType:t}});case 3:return n=e.sent,e.abrupt("return",Promise.resolve(n.data));case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&e.t0.response.data&&e.t0.response.data.description&&S({description:null===(r=e.t0.response.data)||void 0===r?void 0:r.description,level:o.AlertLevels.ERROR,message:null===(a=e.t0.response.data)||void 0===a?void 0:a.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return l.createElement(u.Z,{dimmer:"blurring",size:"tiny",open:I,onKeyPress:function(e){var t;"Enter"===e.key&&I&&(null===b||void 0===b||null===(t=b.current)||void 0===t||t.triggerSubmit())},onClose:function(){return n(!1)},"data-componentid":"".concat(g,"-view-certificate-modal")},l.createElement(u.Z.Header,{className:"wizard-header"},A("console:develop.features.secrets.wizards.addSecret.heading"),l.createElement(i.Heading,{as:"h6"},A("console:develop.features.secrets.wizards.addSecret.subheading"))),l.createElement(u.Z.Content,{className:"content-container"},y&&C,l.createElement(a.l0,{ref:b,onSubmit:X,uncontrolledForm:!1,initialValues:Y},l.createElement(a.gN.Dropdown,{required:!0,search:!0,disabled:!0,hidden:!0,name:"secret_type",options:F,value:F.length&&F[0].value,label:A("console:develop.features.secrets.wizards.addSecret.form.secretTypeField.label"),ariaLabel:A("console:develop.features.secrets.wizards.addSecret.form.secretTypeField.ariaLabel"),hint:A("console:develop.features.secrets.wizards.addSecret.form.secretTypeField.hint")}),l.createElement(a.gN.Input,{required:!0,name:"secret_name",label:A("console:develop.features.secrets.wizards.addSecret.form.secretNameField.label"),ariaLabel:A("console:develop.features.secrets.wizards.addSecret.form.secretNameField.ariaLabel"),placeholder:A("console:develop.features.secrets.wizards.addSecret.form.secretNameField.placeholder"),minLength:f.I_.min,maxLength:f.I_.max,inputType:"name",hint:A("console:develop.features.secrets.wizards.addSecret.form.secretNameField.hint"),validate:function(e){var t=(0,f.OK)(e,x);return G(Boolean(t)),t}}),l.createElement(a.gN.Textarea,{required:!0,name:"secret_value",ariaLabel:A("console:develop.features.secrets.wizards.addSecret.form.secretValueField.ariaLabel"),label:A("console:develop.features.secrets.wizards.addSecret.form.secretValueField.label"),placeholder:A("console:develop.features.secrets.wizards.addSecret.form.secretValueField.placeholder"),minLength:f.bR.min,maxLength:f.bR.max,type:"textarea",hint:A("console:develop.features.secrets.wizards.addSecret.form.secretValueField.hint",{maxLength:f.bR.max,minLength:f.bR.min}),validate:function(e){var t=(0,f.Fm)(e);return W(Boolean(t)),t}}),K&&l.createElement(i.Message,{"data-componentid":"".concat(g,"-page-message"),type:"info",content:A("console:develop.features.secrets.banners.secretIsHidden.content",{productName:null===(t=Q.ui)||void 0===t?void 0:t.productName})}),l.createElement(a.gN.Textarea,{label:A("console:develop.features.secrets.wizards.addSecret.form.secretDescriptionField.label"),ariaLabel:A("console:develop.features.secrets.wizards.addSecret.form.secretDescriptionField.ariaLabel"),placeholder:A("console:develop.features.secrets.wizards.addSecret.form.secretDescriptionField.placeholder"),name:"secret_description",minLength:f.Dk.min,maxLength:f.Dk.max})),_&&l.createElement(i.ContentLoader,null)),l.createElement(u.Z.Actions,null,l.createElement(d.Z,null,l.createElement(d.Z.Row,{column:1},l.createElement(d.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.LinkButton,{"aria-label":A("console:develop.features.secrets.wizards.actions.cancelButton.ariaLabel"),floated:"left",onClick:function(){return J(!1)},"data-testid":"".concat(g,"-form-cancel-button")},A("console:develop.features.secrets.wizards.actions.cancelButton.label"))),l.createElement(d.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.PrimaryButton,{"aria-label":A("console:develop.features.secrets.wizards.actions.createButton.ariaLabel"),disabled:L||_,floated:"right",onClick:function(){var e;return null===b||void 0===b||null===(e=b.current)||void 0===e?void 0:e.triggerSubmit()},loading:_,"data-testid":"".concat(g,"-form-submit-button")},A("console:develop.features.secrets.wizards.actions.createButton.label")))))))};y.defaultProps={"data-componentid":"add-secret-wizard"},t.Z=y},84519:function(e,t,n){n.d(t,{d:function(){return o}});var o=function(e){return{createSecretType:"".concat(e,"/api/server/v1/secret-type"),getSecretType:"".concat(e,"/api/server/v1/secret-type"),updateSecretType:"".concat(e,"/api/server/v1/secret-type"),deleteSecretType:"".concat(e,"/api/server/v1/secret-type"),createSecret:"".concat(e,"/api/server/v1/secrets"),updateSecret:"".concat(e,"/api/server/v1/secrets"),deleteSecret:"".concat(e,"/api/server/v1/secrets"),getSecret:"".concat(e,"/api/server/v1/secrets"),getSecretList:"".concat(e,"/api/server/v1/secrets")}}},40759:function(e,t,n){n.d(t,{H0:function(){return o},v6:function(){return r},Fk:function(){return a},AA:function(){return i}});var o="ADAPTIVE_AUTH_CALL_CHOREO",r="",a=(btoa("secret-management"),"*".repeat(80),"SECRETS"),i="SECRET_EDIT"},88236:function(e,t,n){n.d(t,{I_:function(){return i},bR:function(){return l},Dk:function(){return s},OK:function(){return c},Fm:function(){return u}});var o=n(23339),r=n(22260),a=n(48749),i={max:64,min:3},l={max:2048,min:1},s={max:256,min:0},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(!e)return"You cannot leave secret name empty!";if(e.length>i.max||e.length<i.min)return"You have to enter a name between ".concat(i.min," to ").concat(i.max," characters!");if(!a.I.isValidResourceKey(e))return o.yo.INVALID_SECRET_NAME_ERROR;var n=!1;return null!==t&&void 0!==t&&t.size&&t.forEach((function(t){t.toLowerCase()===e.toLowerCase()&&(n=!0)})),n?r.I18n.instance.t("console:develop.features.secrets.wizards.addSecret.form.secretNameField.alreadyPresentError"):void 0},u=function(e){return e?e.length>l.max||e.length<l.min?"You have to enter a value between ".concat(l.min," to ").concat(l.max," characters!"):void 0:"You cannot leave secret value empty!"}},92818:function(e,t,n){n.d(t,{P4:function(){return d},Qy:function(){return m},aA:function(){return f},Un:function(){return v},u9:function(){return p}});var o=n(19486),r=n(82817),a=n(88742),i=n(12847),l=n(17036),s=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),c=function(e){var t={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:e};return s(t).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(l.v.CONFIGS_FETCH_REQUEST_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.IdentityAppsApiException(l.v.CONFIGS_FETCH_REQUEST_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},u=function(e,t){var n={data:e,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.PATCH,url:t};return s(n).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(l.v.CONFIGS_UPDATE_REQUEST_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.IdentityAppsApiException(l.v.CONFIGS_UPDATE_REQUEST_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},d=function(){return c(i.h.getState().config.endpoints.governanceConnectorCategories)},m=function(e){return c(i.h.getState().config.endpoints.governanceConnectorCategories+"/"+e)},p=function(e,t,n){var o=i.h.getState().config.endpoints.governanceConnectorCategories+"/"+t+"/connectors/"+n;return u(e,o)},f=function(e){var t=i.h.getState().config.endpoints.governanceConnectorCategories+"/"+e+"/connectors/";return c(t)},g=(n(79949),o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance())),v=function(){var e={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:i.h.getState().config.endpoints.serverConfigurations};return g(e).then((function(e){if(200!==e.status)throw new r.IdentityAppsApiException(l.v.CONFIGS_FETCH_REQUEST_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.IdentityAppsApiException(l.v.CONFIGS_FETCH_REQUEST_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},30134:function(e,t,n){n.d(t,{k:function(){return L}});var o=n(8890),r=n(22260),a=n(96462),i=n(68905),l=n(64805),s=n(83913),c=n(29524),u=n(72563),d=n(44706),m=n(23177),p=n(5554),f=n(67897),g=n(17036),v=n(67359),h=function(e){return"true"===e.value||"false"===e.value?a.RenderToggle:a.RenderInput},E=function(e){return"true"===e.value||"false"===e.value},y=function(e){return e.name.startsWith("__secret__")?"password":"text"},S=function(e){return e?void 0:r.I18n.instance.t("common:required")},C=function(e){var t=e.isSubmitting,n=e.handleSubmit,r=e["data-testid"],u=e.props.properties,C=(0,s.v9)((function(t){return t.form[e.form].values})),R=(0,l.$G)().t,A=(0,s.v9)((function(e){return e.config.ui.features})),b=(0,s.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),O=(0,i.useMemo)((function(){var e,t;return!(0,o.hasRequiredScopes)(null===A||void 0===A?void 0:A.attributeDialects,null===A||void 0===A||null===(e=A.attributeDialects)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,b)}),[A,b]);return i.createElement(d.Z,{onSubmit:n},i.createElement(m.Z,{padded:!0},null===u||void 0===u?void 0:u.map((function(t,n){return i.createElement(m.Z.Row,{columns:2,className:f.serverConfigurationConfig.intendSettings&&"pl-3",key:n},i.createElement(m.Z.Column,{mobile:12,tablet:12,computer:10,className:!f.serverConfigurationConfig.intendSettings&&"pl-0"},E(t)?i.createElement("label",null,t.displayName):i.createElement(c.Z,{name:v.e.encodeConnectorPropertyName(t.name),component:h(t),type:y(t),required:!0,width:12,placeholder:t.value,"data-testid":"".concat(r,"-").concat(t.name),label:t.displayName,validate:[S],readOnly:O}),""!==t.description&&i.createElement(a.Hint,null,t.description)),i.createElement(m.Z.Column,{mobile:4,tablet:4,computer:6,className:!f.serverConfigurationConfig.intendSettings&&"pl-0"},E(t)&&i.createElement(c.Z,{name:v.e.encodeConnectorPropertyName(t.name),component:a.RenderToggle,type:y(t),width:10,placeholder:t.value,"data-testid":"".concat(r,"-").concat(t.name),label:C[v.e.encodeConnectorPropertyName(t.name)]?R("console:manage.features.governanceConnectors.enabled"):R("console:manage.features.governanceConnectors.disabled"),onChange:function(n,o){t.name===g.v.RE_CAPTCHA_ALWAYS_ENABLE&&o&&e.change(v.e.encodeConnectorPropertyName(g.v.RE_CAPTCHA_AFTER_MAX_FAILED_ATTEMPTS_ENABLE),!1),t.name===g.v.RE_CAPTCHA_AFTER_MAX_FAILED_ATTEMPTS_ENABLE&&o&&e.change(v.e.encodeConnectorPropertyName(g.v.RE_CAPTCHA_ALWAYS_ENABLE),!1)},readOnly:O})),i.createElement(p.Z,{hidden:!0}))})),i.createElement(m.Z.Row,{columns:1,className:f.serverConfigurationConfig.intendSettings&&"pl-3"},i.createElement(m.Z.Column,{mobile:16,tablet:16,computer:14,className:!f.serverConfigurationConfig.intendSettings&&"pl-0"},!O&&i.createElement(a.PrimaryButton,{"data-testid":"".concat(r,"-update-button"),type:"submit",loading:t,disabled:t},R("common:update"))))))},R=(0,u.Z)({enableReinitialize:!0,validate:function(e){var t={},n=v.e.encodeConnectorPropertyName(g.v.ALLOWED_IDLE_TIME_SPAN_IN_DAYS);return parseInt(e[n])<0&&(t[n]=r.I18n.instance.t("console:manage.features.governanceConnectors.form.errors.positiveIntegers")),RegExp(/^(?:\d+,)+\d+$/).test(e[v.e.encodeConnectorPropertyName(g.v.ALERT_SENDING_TIME_PERIODS_IN_DAYS)])||(t[v.e.encodeConnectorPropertyName(g.v.ALERT_SENDING_TIME_PERIODS_IN_DAYS)]=r.I18n.instance.t("console:manage.features.governanceConnectors.form.errors.format")),g.v.MULTI_ATTRIBUTE_CLAIM_LIST_REGEX_PATTERN.test(e[v.e.encodeConnectorPropertyName(g.v.MULTI_ATTRIBUTE_CLAIM_LIST)])||(t[v.e.encodeConnectorPropertyName(g.v.MULTI_ATTRIBUTE_CLAIM_LIST)]=r.I18n.instance.t("console:manage.features.governanceConnectors.form.errors.format")),t}})(C);C.defaultProps={"data-testid":"dynamic-connector-form"};var A=n(88742),b=n(26278),O=n(81771),I=n(345),T=n(70515),N=n(92818),_=n(60306);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var L=function(e){var t=e.connector,n=e.onUpdate,o=e["data-componentid"],r=e["data-testid"],c=(0,s.I0)(),u=(0,l.$G)().t,d=w((0,i.useState)(void 0),2),m=d[0],p=d[1],h=w((0,i.useState)(!1),2),E=h[0],y=h[1];(0,i.useEffect)((function(){var e;if(t&&t.id){var n=(0,O.Z)((0,_.gI)(),t.id,null===(e=(0,_.gI)())||void 0===e?void 0:e.default);p(n)}}),[t,_.gI]);var S=i.createElement(R,{onSubmit:function(e){var o={operation:"UPDATE",properties:[]};for(var r in e)o.properties.push({name:v.e.decodeConnectorPropertyName(r),value:e[r]});f.serverConfigurationConfig.connectorToggleName[null===t||void 0===t?void 0:t.name]&&f.serverConfigurationConfig.autoEnableConnectorToggleProperty&&o.properties.push({name:v.e.decodeConnectorPropertyName(f.serverConfigurationConfig.connectorToggleName[null===t||void 0===t?void 0:t.name]),value:"true"}),y(!0),(0,N.u9)(o,t.categoryId,t.id).then((function(){c((0,b.addAlert)({description:u("console:manage.features.governanceConnectors.notifications.updateConnector.success.description",{name:t.friendlyName}),level:A.AlertLevels.SUCCESS,message:u("console:manage.features.governanceConnectors.notifications.updateConnector.success.message")})),n()})).catch((function(e){!function(e){e.response&&e.response.data&&e.response.data.detail?c((0,b.addAlert)({description:u("console:manage.features.governanceConnectors.notifications.updateConnector.error.description",{description:e.response.data.description}),level:A.AlertLevels.ERROR,message:u("console:manage.features.governanceConnectors.notifications.updateConnector.error.message")})):c((0,b.addAlert)({description:u("console:manage.features.governanceConnectors.notifications.updateConnector.genericError.description"),level:A.AlertLevels.ERROR,message:u("console:manage.features.governanceConnectors.notifications.updateConnector.genericError.message")}))}(e)})).finally((function(){y(!1)}))},props:{properties:t.properties.filter((function(e){return f.serverConfigurationConfig.connectorPropertiesToShow.includes(e.name)||f.serverConfigurationConfig.connectorPropertiesToShow.includes(g.v.ALL)}))},form:(0,I.Z)(t.friendlyName)+"-form",initialValues:function(e){var t={};return null===e||void 0===e||e.properties.map((function(e){"true"===e.value?t[v.e.encodeConnectorPropertyName(e.name)]=!0:"false"===e.value?t[v.e.encodeConnectorPropertyName(e.name)]=!1:t[v.e.encodeConnectorPropertyName(e.name)]=e.value})),t}(t),"data-testid":"".concat(r,"-").concat(t.name,"-form"),isSubmitting:E});return f.serverConfigurationConfig.renderConnector(t,S,m,function(e){if(!e)return null;var t=e.friendlyName;return t.includes(g.v.DEPRECATION_MATCHER)&&(t=t.replace(g.v.DEPRECATION_MATCHER,"")),u("console:manage.features.governanceConnectors.connectorSubHeading",{name:t})}(t),function(e){return e&&e.id===g.v.WSO2_ANALYTICS_ENGINE_CONNECTOR_CATEGORY_ID?i.createElement(a.Message,{warning:!0,className:"mb-5 connector-info","data-componentid":"".concat(o,"-").concat(e.id,"-deprecation-warning")},i.createElement(T.Z,{name:"warning sign"}),u("console:manage.features.governanceConnectors.connectors.analytics-engine.messages.deprecation.heading"),i.createElement(a.Text,{spaced:"top"},i.createElement(l.cC,{i18nKey:"console:manage.features.governanceConnectors.connectors.analytics-engine.messages.deprecation.description"},"WSO2 Identity Server Analytics is now deprecated. Use ",i.createElement(a.Text,{inline:!0,weight:"bold"},"ELK Analytics")," instead."))):null}(t))};L.defaultProps={"data-componentid":"dynamic-governance-connector","data-testid":"dynamic-governance-connector"}},60306:function(e,t,n){n.d(t,{gI:function(){return C},Ky:function(){return r}});var o=n(17036),r=function(e){return{accountDisabling:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_LOGIN_POLICIES_ID,"/connectors/").concat(o.v.ACCOUNT_DISABLING_CONNECTOR_ID),accountLocking:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_LOGIN_POLICIES_ID,"/connectors/").concat(o.v.ACCOUNT_LOCKING_CONNECTOR_ID),accountRecovery:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_ACCOUNT_MANAGEMENT_POLICIES_ID,"/connectors/").concat(o.v.ACCOUNT_RECOVERY_CONNECTOR_ID),captchaForSSOLogin:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_LOGIN_POLICIES_ID,"/connectors/").concat(o.v.CAPTCHA_FOR_SSO_LOGIN_CONNECTOR_ID),governanceConnectorCategories:"".concat(e,"/api/server/v1/identity-governance"),loginPolicies:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_LOGIN_POLICIES_ID),multiFactorAuthenticators:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.MFA_CONNECTOR_CATEGORY_ID),passwordHistory:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_PASSWORD_POLICIES_ID,"/connectors/").concat(o.v.PASSWORD_HISTORY_CONNECTOR_ID),passwordPolicies:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_PASSWORD_POLICIES_ID),passwordPolicy:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_PASSWORD_POLICIES_ID,"/connectors/").concat(o.v.PASSWORD_POLICY_CONNECTOR_ID),selfSignUp:"".concat(e,"/api/server/v1/identity-governance/").concat(o.v.IDENTITY_GOVERNANCE_ACCOUNT_MANAGEMENT_POLICIES_ID,"/connectors/").concat(o.v.SELF_SIGN_UP_CONNECTOR_ID),serverConfigurations:"".concat(e,"/api/server/v1/configs"),serverSupportedSchemas:"".concat(e,"/api/server/v1/configs/schemas")}},a=(n(71110),n(15154),n(24311),n(59514),n(77990)),i=n(36942),l=n(6428),s=n(96571),c=n(61425),u=n(99922),d=n(80279),m=n(65982),p=n(1317),f=n(94995),g=n(93547),v=n(53707),h=n(34775),E=n(94745),y=n(5902);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(){var e;return S(e={},o.v.PASSWORD_HISTORY_CONNECTOR_ID,g.Z),S(e,o.v.PASSWORD_POLICY_CONNECTOR_ID,v.Z),S(e,o.v.SELF_SIGN_UP_CONNECTOR_ID,E.Z),S(e,o.v.LITE_USER_REGISTRATION_CONNECTOR_ID,p.Z),S(e,o.v.USER_EMAIL_VERIFICATION_CONNECTOR_ID,c.Z),S(e,o.v.ACCOUNT_LOCKING_CONNECTOR_ID,i.Z),S(e,o.v.CAPTCHA_FOR_SSO_LOGIN_CONNECTOR_ID,u.Z),S(e,o.v.IDLE_ACCOUNT_SUSPEND_CONNECTOR_ID,f.Z),S(e,o.v.ACCOUNT_DISABLE_CONNECTOR_ID,a.Z),S(e,o.v.ACCOUNT_RECOVERY_CONNECTOR_ID,l.Z),S(e,o.v.PASSWORD_RESET_CONNECTOR_ID,h.Z),S(e,o.v.CONSENT_INFO_CONNECTOR_ID,d.Z),S(e,o.v.ANALYTICS_ENGINE_CONNECTOR_ID,s.Z),S(e,o.v.USER_CLAIM_UPDATE_CONNECTOR_ID,y.Z),S(e,"default",m.Z),e}},17036:function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{v:function(){return i}});var i=r((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(i,"IDENTITY_GOVERNANCE_ACCOUNT_MANAGEMENT_POLICIES_ID","QWNjb3VudCBNYW5hZ2VtZW50IFBvbGljaWVz"),a(i,"DEPRECATION_MATCHER","[Deprecated]"),a(i,"SELF_SIGN_UP_CONNECTOR_ID","c2VsZi1zaWduLXVw"),a(i,"LITE_USER_REGISTRATION_CONNECTOR_ID","bGl0ZS11c2VyLXNpZ24tdXA"),a(i,"ACCOUNT_RECOVERY_CONNECTOR_ID","YWNjb3VudC1yZWNvdmVyeQ"),a(i,"PASSWORD_RESET_CONNECTOR_ID","YWRtaW4tZm9yY2VkLXBhc3N3b3JkLXJlc2V0"),a(i,"CONSENT_INFO_CONNECTOR_ID","cGlpLWNvbnRyb2xsZXI"),a(i,"ANALYTICS_ENGINE_CONNECTOR_ID","YW5hbHl0aWNzLWVuZ2luZQ"),a(i,"USER_CLAIM_UPDATE_CONNECTOR_ID","dXNlci1jbGFpbS11cGRhdGU"),a(i,"IDENTITY_GOVERNANCE_LOGIN_POLICIES_ID","TG9naW4gUG9saWNpZXM"),a(i,"ACCOUNT_LOCKING_CONNECTOR_ID","YWNjb3VudC5sb2NrLmhhbmRsZXI"),a(i,"ACCOUNT_DISABLING_CONNECTOR_ID","YWNjb3VudC5kaXNhYmxlLmhhbmRsZXI"),a(i,"CAPTCHA_FOR_SSO_LOGIN_CONNECTOR_ID","c3NvLmxvZ2luLnJlY2FwdGNoYQ"),a(i,"IDLE_ACCOUNT_SUSPEND_CONNECTOR_ID","c3VzcGVuc2lvbi5ub3RpZmljYXRpb24"),a(i,"ACCOUNT_DISABLE_CONNECTOR_ID","YWNjb3VudC5kaXNhYmxlLmhhbmRsZXI"),a(i,"IDENTITY_GOVERNANCE_PASSWORD_POLICIES_ID","UGFzc3dvcmQgUG9saWNpZXM"),a(i,"PASSWORD_HISTORY_CONNECTOR_ID","cGFzc3dvcmRIaXN0b3J5"),a(i,"PASSWORD_POLICY_CONNECTOR_ID","cGFzc3dvcmRQb2xpY3k"),a(i,"MULTI_ATTRIBUTE_CLAIM_LIST_REGEX_PATTERN",new RegExp("^(?:[a-zA-Z0-9:./]+,)+[a-zA-Z0-9:./]+$")),a(i,"USER_ONBOARDING_CONNECTOR_ID","VXNlciBPbmJvYXJkaW5n"),a(i,"USER_EMAIL_VERIFICATION_CONNECTOR_ID","dXNlci1lbWFpbC12ZXJpZmljYXRpb24"),a(i,"OTHER_SETTINGS_CONNECTOR_CATEGORY_ID","T3RoZXIgU2V0dGluZ3M"),a(i,"LOGIN_ATTEMPT_SECURITY_CONNECTOR_CATEGORY_ID","TG9naW4gQXR0ZW1wdHMgU2VjdXJpdHk"),a(i,"ACCOUNT_MANAGEMENT_CONNECTOR_CATEGORY_ID","QWNjb3VudCBNYW5hZ2VtZW50"),a(i,"MFA_CONNECTOR_CATEGORY_ID","TXVsdGkgRmFjdG9yIEF1dGhlbnRpY2F0b3Jz"),a(i,"WSO2_ANALYTICS_ENGINE_CONNECTOR_CATEGORY_ID","YW5hbHl0aWNzLWVuZ2luZQ"),a(i,"EMAIL_VERIFICATION_ENABLED","EmailVerification.Enable"),a(i,"SELF_REGISTRATION_ENABLE","SelfRegistration.Enable"),a(i,"ACCOUNT_LOCK_ON_CREATION","SelfRegistration.LockOnCreation"),a(i,"SELF_SIGN_UP_NOTIFICATIONS_INTERNALLY_MANAGED","SelfRegistration.Notification.InternallyManage"),a(i,"RE_CAPTCHA","SelfRegistration.ReCaptcha"),a(i,"VERIFICATION_CODE_EXPIRY_TIME","SelfRegistration.VerificationCode.ExpiryTime"),a(i,"SMS_OTP_EXPIRY_TIME","SelfRegistration.VerificationCode.SMSOTP.ExpiryTime"),a(i,"CALLBACK_REGEX","SelfRegistration.CallbackRegex"),a(i,"USERNAME_RECOVERY_ENABLE","Recovery.Notification.Username.Enable"),a(i,"USERNAME_RECOVERY_RE_CAPTCHA","Recovery.ReCaptcha.Username.Enable"),a(i,"PASSWORD_RECOVERY_NOTIFICATION_BASED_ENABLE","Recovery.Notification.Password.Enable"),a(i,"PASSWORD_RECOVERY_NOTIFICATION_BASED_RE_CAPTCHA","Recovery.ReCaptcha.Password.Enable"),a(i,"PASSWORD_RECOVERY_QUESTION_BASED_ENABLE","Recovery.Question.Password.Enable"),a(i,"PASSWORD_RECOVERY_QUESTION_BASED_MIN_ANSWERS","Recovery.Question.Password.MinAnswers"),a(i,"PASSWORD_RECOVERY_QUESTION_BASED_RE_CAPTCHA_ENABLE","Recovery.Question.Password.ReCaptcha.Enable"),a(i,"RE_CAPTCHA_MAX_FAILED_ATTEMPTS","Recovery.Question.Password.ReCaptcha.MaxFailedAttempts"),a(i,"ACCOUNT_RECOVERY_NOTIFICATIONS_INTERNALLY_MANAGED","Recovery.Notification.InternallyManage"),a(i,"NOTIFY_RECOVERY_START","Recovery.Question.Password.NotifyStart"),a(i,"NOTIFY_SUCCESS","Recovery.NotifySuccess"),a(i,"RECOVERY_LINK_EXPIRY_TIME","Recovery.ExpiryTime"),a(i,"RECOVERY_SMS_EXPIRY_TIME","Recovery.Notification.Password.ExpiryTime.smsOtp"),a(i,"RECOVERY_CALLBACK_REGEX","Recovery.CallbackRegex"),a(i,"PASSWORD_RECOVERY_QUESTION_FORCED_ENABLE","Recovery.Question.Password.Forced.Enable"),a(i,"ACCOUNT_LOCK_ENABLE","account.lock.handler.lock.on.max.failed.attempts.enable"),a(i,"MAX_FAILED_LOGIN_ATTEMPTS_TO_ACCOUNT_LOCK","account.lock.handler.On.Failure.Max.Attempts"),a(i,"ACCOUNT_LOCK_TIME","account.lock.handler.Time"),a(i,"ACCOUNT_LOCK_TIME_INCREMENT_FACTOR","account.lock.handler.login.fail.timeout.ratio"),a(i,"ACCOUNT_LOCK_INTERNAL_NOTIFICATION_MANAGEMENT","account.lock.handler.notification.manageInternally"),a(i,"NOTIFY_USER_ON_ACCOUNT_LOCK_INCREMENT","account.lock.handler.notification.notifyOnLockIncrement"),a(i,"ACCOUNT_DISABLING_ENABLE","account.disable.handler.enable"),a(i,"ACCOUNT_DISABLE_INTERNAL_NOTIFICATION_MANAGEMENT","account.disable.handler.notification.manageInternally"),a(i,"RE_CAPTCHA_ALWAYS_ENABLE","sso.login.recaptcha.enable.always"),a(i,"RE_CAPTCHA_AFTER_MAX_FAILED_ATTEMPTS_ENABLE","sso.login.recaptcha.enable"),a(i,"MAX_FAILED_LOGIN_ATTEMPTS_TO_RE_CAPTCHA","sso.login.recaptcha.on.max.failed.attempts"),a(i,"PASSWORD_HISTORY_ENABLE","passwordHistory.enable"),a(i,"PASSWORD_HISTORY_COUNT","passwordHistory.count"),a(i,"PASSWORD_POLICY_ENABLE","passwordPolicy.enable"),a(i,"PASSWORD_POLICY_MIN_LENGTH","passwordPolicy.min.length"),a(i,"PASSWORD_POLICY_MAX_LENGTH","passwordPolicy.max.length"),a(i,"PASSWORD_POLICY_PATTERN","passwordPolicy.pattern"),a(i,"PASSWORD_POLICY_ERROR_MESSAGE","passwordPolicy.errorMsg"),a(i,"HOME_REALM_IDENTIFIER","homeRealmIdentifiers"),a(i,"IDLE_SESSION_TIMEOUT_PERIOD","idleSessionTimeoutPeriod"),a(i,"REMEMBER_ME_PERIOD","rememberMePeriod"),a(i,"CONFIGS_FETCH_REQUEST_INVALID_STATUS_CODE_ERROR","Received an invalid status code while retrieving the configurations."),a(i,"CONFIGS_FETCH_REQUEST_ERROR","An error occurred while retrieving the configurations."),a(i,"CONFIGS_UPDATE_REQUEST_INVALID_STATUS_CODE_ERROR","Received an invalid status code while updating the configurations."),a(i,"CONFIGS_UPDATE_REQUEST_ERROR","An error occurred while updating the configurations."),a(i,"ALLOWED_IDLE_TIME_SPAN_IN_DAYS","suspension.notification.account.disable.delay"),a(i,"ALERT_SENDING_TIME_PERIODS_IN_DAYS","suspension.notification.delays"),a(i,"ACCOUNT_MANAGEMENT_CATEGORY_ID","QWNjb3VudCBNYW5hZ2VtZW50"),a(i,"ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID","YWRtaW4tZm9yY2VkLXBhc3N3b3JkLXJlc2V0"),a(i,"RECOVERY_LINK_PASSWORD_RESET","Recovery.AdminPasswordReset.RecoveryLink"),a(i,"OTP_PASSWORD_RESET","Recovery.AdminPasswordReset.OTP"),a(i,"OFFLINE_PASSWORD_RESET","Recovery.AdminPasswordReset.Offline"),a(i,"ADMIN_FORCED_PASSWORD_RESET_EXPIRY_TIME","Recovery.AdminPasswordReset.ExpiryTime"),a(i,"MULTI_ATTRIBUTE_CLAIM_LIST","account-multiattributelogin-handler-allowedattributes"),a(i,"ALL","all")},34694:function(e,t,n){n.d(t,{e9:function(){return m.e},vH:function(){return a.v},Qy:function(){return o.Qy},Un:function(){return o.Un},Ky:function(){return r.Ky},Md:function(){return d}});var o=n(92818),r=(n(30134),n(60306)),a=n(17036),i=(n(67533),n(69785),n(75388));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={categories:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return t.type===i.W.SET_GOVERNANCE_CONNECTOR_CATEGORY?s(s({},e),{},{categories:t.payload.categories}):e},m=n(67359)},67533:function(e,t,n){n.r(t),n.d(t,{GovernanceConnectorsPage:function(){return A}});var o=n(8890),r=n(88742),a=n(26278),i=n(95823),l=n(96462),s=n(68905),c=n(64805),u=n(83913),d=n(91350),m=n(23177),p=n(40708),f=n(28267),g=n(30372),v=n(67897),h=n(12847),E=n(92818),y=n(30134),S=n(17036);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var A=function(e){var t=e["data-testid"],n=(0,u.I0)(),R=(0,s.useRef)(null),A=(0,c.$G)().t,b=(0,h.hs)(),O=b.headerHeight,I=b.footerHeight,T=(0,u.v9)((function(e){return e.config.ui.features})),N=(0,u.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),_=C((0,s.useState)({}),2),w=_[0],P=_[1],L=C((0,s.useState)([]),2),D=L[0],Z=L[1],F=C((0,s.useState)(null),2),k=F[0],z=F[1],x=O+h.ru.PAGE_SCROLL_TOP_PADDING;(0,s.useEffect)((function(){var e,t;(0,o.hasRequiredScopes)(null===T||void 0===T?void 0:T.governanceConnectors,null===T||void 0===T||null===(e=T.governanceConnectors)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.read,N)&&M()}),[]);var U=h.m8.location.pathname.split("/"),j=U.length>0?U[U.length-1]:"",M=function(){(0,E.Qy)(j).then((function(e){e.connectors.map((function(e){e.categoryId=j,e.ref=s.createRef()})),P(e),Z(null===e||void 0===e?void 0:e.connectors),!k&&z(e.connectors[0])})).catch((function(e){e.response&&e.response.data&&e.response.data.detail?n((0,a.addAlert)({description:A("console:manage.features.governanceConnectors.notifications.getConnector.error.description",{description:e.response.data.description}),level:r.AlertLevels.ERROR,message:A("console:manage.features.governanceConnectors.notifications.getConnector.error.message")})):n((0,a.addAlert)({description:A("console:manage.features.governanceConnectors.notifications.getConnector.genericError.description"),level:r.AlertLevels.ERROR,message:A("console:manage.features.governanceConnectors.notifications.getConnector.genericError.message")}))}))};return s.createElement(l.PageLayout,{title:v.serverConfigurationConfig.showPageHeading&&(null===w||void 0===w?void 0:w.name),pageTitle:v.serverConfigurationConfig.showPageHeading&&(null===w||void 0===w?void 0:w.name),description:v.serverConfigurationConfig.showPageHeading&&(null!==w&&void 0!==w&&w.description?w.description:(null===w||void 0===w?void 0:w.name)&&A("console:manage.features.governanceConnectors.connectorSubHeading",{name:j===S.v.OTHER_SETTINGS_CONNECTOR_CATEGORY_ID?w.name.split(" ")[0]:w.name})),"data-testid":"".concat(t,"-page-layout")},s.createElement(d.Z,{innerRef:R},s.createElement(m.Z,null,s.createElement(m.Z.Row,{columns:2},s.createElement(m.Z.Column,{width:12},D&&Array.isArray(D)&&D.length>0?D.map((function(e,n){if(v.serverConfigurationConfig.connectorsToShow.includes(e.name)||v.serverConfigurationConfig.connectorsToShow.includes(S.v.ALL)){var o=s.createElement("div",{ref:e.ref},s.createElement(y.k,{connector:e,"data-testid":"".concat(t,"-")+(null===e||void 0===e?void 0:e.id),onUpdate:function(){return M()}}));return v.serverConfigurationConfig.renderConnectorWithinEmphasizedSegment?s.createElement(l.EmphasizedSegment,{key:n,padded:"very"},o):o}})):null,v.serverConfigurationConfig.showGovernanceConnectorCategories&&s.createElement(p.Z,{className:"non-emphasized",position:"right",close:"very"},s.createElement(f.Z,{context:R,offset:x,bottomOffset:I},D&&Array.isArray(D)&&D.length>0&&s.createElement(s.Fragment,null,s.createElement("h5",null,A("console:manage.features.governanceConnectors.categories")),s.createElement(g.Z,{secondary:!0,vertical:!0,className:"governance-connector-categories"},D.map((function(e,t){return s.createElement(g.Z.Item,{as:"a",key:t,className:(null===k||void 0===k?void 0:k.id)===(null===e||void 0===e?void 0:e.id)?"active":"",onClick:function(){var t;i.CommonUtils.scrollToTarget(null===e||void 0===e||null===(t=e.ref)||void 0===t?void 0:t.current,x),z(e)}},e.friendlyName)})))))))))))};A.defaultProps={"data-testid":"governance-connectors-page"},t.default=A},69785:function(e,t,n){n.d(t,{k:function(){return r}});var o=n(75388),r=function(e){return{payload:e,type:o.W.SET_GOVERNANCE_CONNECTOR_CATEGORY}}},75388:function(e,t,n){var o;n.d(t,{W:function(){return o}}),function(e){e.SET_GOVERNANCE_CONNECTOR_CATEGORY="SET_GOVERNANCE_CONNECTOR_CATEGORY"}(o||(o={}))},67359:function(e,t,n){n.d(t,{e:function(){return u}});var o=n(88742),r=n(26278),a=n(22260),i=n(12847),l=n(92818),s=n(69785);function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,u;return t=e,u=[{key:"getGovernanceConnectors",value:function(){var e={categories:[]};(0,l.P4)().then((function(t){t.map((function(t){e.categories.push({id:t.id,name:t.name})})),i.h.dispatch((0,s.k)(e))})).catch((function(e){e.response&&e.response.data&&e.response.data.detail?i.h.dispatch((0,r.addAlert)({description:a.I18n.instance.t("console:manage.features.governanceConnectors.notifications.getConnectorCategories.error.description",{description:e.response.data.description}),level:o.AlertLevels.ERROR,message:a.I18n.instance.t("console:manage.features.governanceConnectors.notifications.getConfigurations.error.message")})):i.h.dispatch((0,r.addAlert)({description:a.I18n.instance.t("console:manage.features.governanceConnectors.notifications.getConfigurations.genericError.description"),level:o.AlertLevels.ERROR,message:a.I18n.instance.t("console:manage.features.governanceConnectors.notifications.getConfigurations.genericError.message")}))}))}},{key:"encodeConnectorPropertyName",value:function(e){return e.split(".").join("-")}},{key:"decodeConnectorPropertyName",value:function(e){return e.split("-").join(".")}}],(n=null)&&c(t.prototype,n),u&&c(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);