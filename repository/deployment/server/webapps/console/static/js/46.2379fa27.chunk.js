"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[46],{10046:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var a=t(69883),o=t(88742),r=t(26278),i=t(26776),l=t(22260),c=t(96462),s=t(98812),u=t(87289),d=t(68905),f=t(64805),m=t(83913),g=t(76384),p=(t(97356),t(72650)),h=t.n(p),v=t(30032),y=t.n(v),E=t(85532),b=t(93967),S=t(50497),z=t(69571),k=t(81463),Z=t.n(k),A=t(9008),C=t(70515);function O(e){var n=e.children,t=e.className,a=e.content,o=e.icon,r=y()("divider",t),i=(0,E.Z)(O,e),l=(0,b.Z)(O,e);return Z()(o)?Z()(a)?d.createElement(l,(0,g.Z)({},i,{className:r}),S.kK(n)?"/":n):d.createElement(l,(0,g.Z)({},i,{className:r}),a):C.Z.create(o,{defaultProps:(0,z.Z)({},i,{className:r}),autoGenerateKey:!1})}O.handledProps=["as","children","className","content","icon"],O.propTypes={},O.create=(0,A.u5)(O,(function(e){return{icon:e}}));var I=O,L=t(39119),P=t(38060),T=t(86018),N=t(31795),R=t(66783),w=t(29375),_=t(60683),j=t(51471),D=t.n(j),F=t(46912),G=function(e){function n(){var e,t;(0,L.Z)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return t=(0,T.Z)(this,(e=(0,N.Z)(n)).call.apply(e,[this].concat(o))),(0,_.Z)((0,R.Z)(t),"computeElementType",(function(){var e=t.props,n=e.link,a=e.onClick;if(n||a)return"a"})),(0,_.Z)((0,R.Z)(t),"handleClick",(function(e){return D()(t.props,"onClick",e,t.props)})),t}return(0,w.Z)(n,e),(0,P.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.active,a=e.children,o=e.className,r=e.content,i=e.href,l=y()((0,F.lG)(t,"active"),"section",o),c=(0,E.Z)(n,this.props),s=(0,b.Z)(n,this.props,this.computeElementType);return d.createElement(s,(0,g.Z)({},c,{className:l,href:i,onClick:this.handleClick}),S.kK(a)?r:a)}}]),n}(d.Component);function x(e){var n=e.children,t=e.className,a=e.divider,o=e.icon,r=e.sections,i=e.size,l=y()("ui",i,"breadcrumb",t),c=(0,E.Z)(x,e),s=(0,b.Z)(x,e);if(!S.kK(n))return d.createElement(s,(0,g.Z)({},c,{className:l}),n);var u=[];return h()(r,(function(e,n){var t=G.create(e);if(u.push(t),n!==r.length-1){var i="".concat(t.key,"_divider")||0;u.push(I.create({content:a,icon:o,key:i}))}})),d.createElement(s,(0,g.Z)({},c,{className:l}),u)}(0,_.Z)(G,"handledProps",["active","as","children","className","content","href","link","onClick"]),G.propTypes={},G.create=(0,A.u5)(G,(function(e){return{content:e,link:!0}})),x.handledProps=["as","children","className","divider","icon","sections","size"],x.propTypes={},x.Divider=I,x.Section=G;var B=x,K=t(82791),M=t(5554),U=t(12847),X=t(50714),Q=t(10783),V=t(58107);function W(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var a,o,r=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(a=t.next()).done)&&(r.push(a.value),!n||r.length!==n);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return r}(e,n)||q(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,n){if(e){if("string"===typeof e)return H(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?H(e,n):void 0}}function H(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var J=[{key:0,text:l.I18n.instance.t("common:name"),value:"name"}],Y=function(e){var n,t,l,g,p=e["data-componentid"],h=(0,f.$G)().t,v=(0,m.I0)(),y=$((0,d.useState)(null),2),E=y[0],b=y[1],S=$((0,d.useState)(""),2),z=S[0],k=S[1],Z=$((0,d.useState)(J[0]),2),A=Z[0],O=Z[1],I=$((0,d.useState)(U.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),L=I[0],P=I[1],T=$((0,d.useState)(!0),2),N=T[0],R=T[1],w=$((0,d.useState)(!1),2),_=w[0],j=w[1],D=$((0,d.useState)(void 0),2),F=D[0],G=D[1],x=$((0,d.useState)(void 0),2),q=x[0],H=x[1],Y=$((0,d.useState)(null),2),ee=Y[0],ne=Y[1],te=$((0,d.useState)([]),2),ae=te[0],oe=te[1],re=$((0,d.useState)(null),2),ie=re[0],le=re[1],ce=$((0,d.useState)(""),2),se=ce[0],ue=ce[1],de=$((0,d.useState)(""),2),fe=de[0],me=de[1],ge=$((0,d.useState)(1),2),pe=ge[0],he=ge[1],ve=U.lD.getInstance(),ye=$((0,i.useTrigger)(),2),Ee=ye[0],be=ye[1];(0,d.useEffect)((function(){var e,n=!1,t=!1;null===E||void 0===E||null===(e=E.links)||void 0===e||e.forEach((function(e){if("next"===e.rel){var a=e.href.split("after=")[1];ue(a),G(!0),n=!0}if("previous"===e.rel){var o=e.href.split("before=")[1];me(o),H(!0),t=!0}})),n||(ue(""),G(!1)),t||(me(""),H(!1))}),[E]);var Se=(0,d.useCallback)((function(){he(1),be()}),[he,be]);(0,d.useEffect)((function(){ee&&!(0,u.Z)(ee)&&(0,X.Xu)(ee.id).then((function(e){le(e)})).catch((function(e){null!==e&&void 0!==e&&e.description?v((0,r.addAlert)({description:e.description,level:o.AlertLevels.ERROR,message:h("console:manage.features.organizations.notifications.fetchOrganization.error.message")})):v((0,r.addAlert)({description:h("console:manage.features.organizations.notifications.fetchOrganization.genericError.description"),level:o.AlertLevels.ERROR,message:h("console:manage.features.organizations.notifications.fetchOrganization.genericError.message")}))}))}),[ee,v,h]);var ze=(0,d.useMemo)((function(){return!ee||(0,u.Z)(ee)?z:"".concat(z?z+" and ":"","parentId eq ").concat(ee.id)}),[z,ee]),ke=(0,d.useCallback)((function(e,n,t,a,i){R(!0),(0,X.jX)(n,e,t,a,!1).then((function(e){b(e)})).catch((function(e){null!==e&&void 0!==e&&e.description?v((0,r.addAlert)({description:e.description,level:o.AlertLevels.ERROR,message:h("console:manage.features.organizations.notifications.getOrganizationList.error.message")})):v((0,r.addAlert)({description:h("console:manage.features.organizations.notifications.getOrganizationList.genericError.description"),level:o.AlertLevels.ERROR,message:h("console:manage.features.organizations.notifications.getOrganizationList.genericError.message")}))})).finally((function(){R(!1)}))}),[X.jX,v,h,b,R]);(0,d.useEffect)((function(){ke(L,ze,null,null)}),[L,ke,ze]);var Ze=(0,d.useCallback)((function(e){Se(),k(e)}),[Se,k]),Ae=(0,d.useCallback)((function(e,n){var t=parseInt(null===n||void 0===n?void 0:n.activePage);t>pe?ke(L,ze,se,null):t<pe&&ke(L,ze,null,fe),he(t)}),[ke,pe,ze,L,se,fe]),Ce=(0,d.useCallback)((function(e,n){P(n.value),Se()}),[P,Se]),Oe=(0,d.useCallback)((function(){k(""),Se()}),[k,Se]),Ie=function(e,n){var t=W(ae);t.splice(n+1),oe(t),ne(e),Se(),e||le(null)};return d.createElement(d.Fragment,null,d.createElement(c.PageLayout,{action:!N&&!(!z&&((0,u.Z)(E)||(null===E||void 0===E||null===(n=E.organizations)||void 0===n?void 0:n.length)<=0))&&d.createElement(a.di,{when:a.TA.ORGANIZATION_WRITE},d.createElement(c.PrimaryButton,{disabled:N,loading:N,onClick:function(){ve.publish("organization-click-new-organization-button"),j(!0)},"data-componentid":"".concat(p,"-list-layout-add-button")},d.createElement(C.Z,{name:"add"}),h("console:manage.features.organizations.list.actions.add"))),pageTitle:"Organizations",title:N?null:ie?ie.name:h("console:manage.features.organizations.homeList.name"),description:d.createElement("p",null,N?null:ie?ie.description:null),"data-componentid":"".concat(p,"-page-layout"),titleAs:"h3",componentAbovePageHeader:d.createElement(d.Fragment,null,d.createElement(K.Z,{as:"h1","data-componentid":"".concat(p,"-organization-header")},h("console:manage.pages.organizations.title"),d.createElement(K.Z.Subheader,{"data-componentid":"".concat(p,"-sub-title")},h("console:manage.pages.organizations.subTitle"))),d.createElement(M.Z,{hidden:!0}),ee&&ae.length>0&&d.createElement(B,{className:"margined","data-componentid":"".concat(p,"-breadcrumb")},d.createElement(B.Section,{onClick:function(){Ie(null,-1)}},d.createElement("span",{"data-componentid":"".concat(p,"-breadcrumb-home")},V.a5.ROOT_ORGANIZATION.name)),null===ae||void 0===ae?void 0:ae.map((function(e,n){return d.createElement(d.Fragment,{key:n},d.createElement(B.Divider,{icon:"right chevron"}),d.createElement(B.Section,{active:n===ae.length-1,link:n!==ae.length-1,onClick:n!==ae.length-1?function(){return Ie(e,n)}:null},e.name))})))," ")},N?d.createElement(c.GridLayout,{isLoading:N}):d.createElement(d.Fragment,null,d.createElement(c.ListLayout,{advancedSearch:d.createElement(U.nC,{onFilter:Ze,filterAttributeOptions:[{key:0,text:h("common:name"),value:"name"}],filterAttributePlaceholder:h("console:manage.features.organizations.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:h("console:manage.features.organizations.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:h("console:manage.features.organizations.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:h("console:manage.features.organizations.advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co","data-componentid":"".concat(p,"-list-advanced-search")}),currentListSize:null===E||void 0===E||null===(t=E.organizations)||void 0===t?void 0:t.length,listItemLimit:L,onItemsPerPageDropdownChange:Ce,onPageChange:Ae,onSortStrategyChange:function(e,n){O((0,s.Z)(J,(function(e){return n.value===e.value})))},showPagination:!0,showTopActionPanel:N||!(!z&&(null===E||void 0===E||null===(l=E.organizations)||void 0===l?void 0:l.length)<=0),sortOptions:J,sortStrategy:A,totalPages:10,totalListSize:null===E||void 0===E||null===(g=E.organizations)||void 0===g?void 0:g.length,paginationOptions:{disableNextButton:!F,disablePreviousButton:!q},"data-componentid":"".concat(p,"-list-layout"),resetPagination:Ee,activePage:pe},d.createElement(Q.Bg,{isLoading:N,list:E,onOrganizationDelete:function(){ke(L,ze,se,fe)},onEmptyListPlaceholderActionClick:function(){j(!0)},onSearchQueryClear:Oe,searchQuery:z,"data-componentid":"organization-list",onListItemClick:function(e,n){if(!ae.find((function(e){return e.id===n.id}))){Oe(),ne(n),Se();var t=W(ae);t.push(n),oe(t)}},parentOrganization:ee})),_&&d.createElement(Q.Xh,{onUpdate:function(){ke(L,ze,se,fe)},closeWizard:function(){return j(!1)},parent:ee}))))};Y.defaultProps={"data-componentid":"organizations"};var ee=Y}}]);