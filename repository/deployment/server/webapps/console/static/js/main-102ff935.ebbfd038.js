"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1743],{53988:function(e,t,n){n.d(t,{cn:function(){return c},h8:function(){return d},M_:function(){return m},c7:function(){return p},Fp:function(){return u},rc:function(){return g},PI:function(){return v},gS:function(){return f}});var r=n(19486),o=n(82817),a=n(88742),s=(n(79949),n(26072)),i=n(70677),l=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),u=function(e,t,n,r,o,i){var u={headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,params:{attributes:r,count:e,domain:o,excludedAttributes:i,filter:n,startIndex:t},url:s.h.getState().config.endpoints.users};return l(u).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},c=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.POST,url:s.h.getState().config.endpoints.users};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e){var t={headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/scim+json"},method:a.HttpMethods.DELETE,url:s.h.getState().config.endpoints.users+"/"+e};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},m=function(e,t){var n={headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,params:{attributes:t},url:s.h.getState().config.endpoints.users+"/"+e};return l(n).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject("Failed to retrieve user information - ".concat(e))}))},f=function(e,t){var n={data:t,headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.PATCH,url:s.h.getState().config.endpoints.users+"/"+e};return l(n).then((function(e){return Promise.resolve(e.data)})).catch((function(e){throw new o.IdentityAppsApiException(i._.USER_INFO_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},p=function(e){var t={headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.GET,url:s.h.getState().config.endpoints.userSessions.replace("{0}",e)};return l(t).then((function(e){if(200!==e.status)throw new o.IdentityAppsApiException(i._.GET_USER_SESSIONS_REQUEST_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new o.IdentityAppsApiException(i._.GET_USER_SESSIONS_REQUEST_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},v=function(e,t){var n={headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.DELETE,url:s.h.getState().config.endpoints.userSessions.replace("{0}",e)+"/".concat(t)};return l(n).then((function(e){if(204!==e.status)throw new o.IdentityAppsApiException(i._.TERMINATE_USER_SESSION_REQUEST_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new o.IdentityAppsApiException(i._.TERMINATE_USER_SESSION_REQUEST_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},g=function(e){var t={headers:{"Access-Control-Allow-Origin":s.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.HttpMethods.DELETE,url:s.h.getState().config.endpoints.userSessions.replace("{0}",e)};return l(t).then((function(e){if(204!==e.status)throw new o.IdentityAppsApiException(i._.TERMINATE_ALL_USER_SESSIONS_REQUEST_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e)})).catch((function(e){throw new o.IdentityAppsApiException(i._.TERMINATE_ALL_USER_SESSIONS_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},46811:function(e,t,n){n.d(t,{Gb:function(){return yt},Xk:function(){return kt},MN:function(){return Ke},to:function(){return R},Sx:function(){return Dt}});var r=n(69883),o=n(57002),a=n(8890),s=n(88742),i=n(26278),l=n(95823),u=n(96462),c=n(68905),d=n(64805),m=n(83913),f=n(82791),p=n(70515),v=n(25460),g=n(12847),h=n(53988),E=n(70677);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var R=function(e){var t,n=e.advancedSearch,y=e.defaultListItemLimit,b=e.onUserDelete,w=e.isLoading,R=e.readOnlyUserStores,P=e.featureConfig,O=e.onColumnSelectionChange,I=e.onEmptyListPlaceholderActionClick,U=e.onListItemClick,L=e.onSearchQueryClear,T=e.realmConfigs,M=e.searchQuery,Z=e.selection,N=e.showListItemActions,_=e.showMetaContent,k=e.userMetaListContent,D=e.usersList,q=e["data-testid"],x=(0,d.$G)().t,j=(0,m.I0)(),F=A((0,c.useState)(!1),2),H=F[0],G=F[1],z=A((0,c.useState)(void 0),2),B=z[0],V=z[1],$=A((0,c.useState)(!1),2),W=$[0],Y=$[1],K=(0,m.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),J=function(e){g.m8.push(g.$x.getPaths().get("USER_EDIT").replace(":id",e))},Q=function(){return M?c.createElement(u.EmptyPlaceholder,{action:c.createElement(u.LinkButton,{onClick:L},x("console:manage.features.users.usersList.search.emptyResultPlaceholder.clearButton")),image:(0,g.jF)().emptySearch,imageSize:"tiny",title:x("console:manage.features.users.usersList.search.emptyResultPlaceholder.title"),subtitle:[x("console:manage.features.users.usersList.search.emptyResultPlaceholder.subTitle.0",{query:M}),x("console:manage.features.users.usersList.search.emptyResultPlaceholder.subTitle.1")]}):0===D.totalResults?c.createElement(u.EmptyPlaceholder,{"data-testid":"".concat(q,"-empty-placeholder"),action:c.createElement(r.di,{when:r.TA.USER_WRITE},c.createElement(u.PrimaryButton,{"data-testid":"".concat(q,"-empty-placeholder-add-user-button"),onClick:function(){return I()}},c.createElement(p.Z,{name:"add"}),x("console:manage.features.users.usersList.list.emptyResultPlaceholder.addButton"))),image:(0,g.jF)().newList,imageSize:"tiny",title:x("console:manage.features.users.usersList.list.emptyResultPlaceholder.title"),subtitle:[x("console:manage.features.users.usersList.list.emptyResultPlaceholder.subTitle.0"),x("console:manage.features.users.usersList.list.emptyResultPlaceholder.subTitle.1"),x("console:manage.features.users.usersList.list.emptyResultPlaceholder.subTitle.2")]}):null};return c.createElement(c.Fragment,null,c.createElement(u.DataTable,{className:"users-table",externalSearch:n,isLoading:w,loadingStateOptions:{count:null!==y&&void 0!==y?y:g.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:function(){if(N){var e=[{hidden:function(){return!(0,a.isFeatureEnabled)(null===P||void 0===P?void 0:P.users,E._.FEATURE_DICTIONARY.get("USER_READ"))},icon:function(e){var t,n,r,o,s=(null===e||void 0===e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null===e||void 0===e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:"PRIMARY";return!(0,a.hasRequiredScopes)(null===P||void 0===P?void 0:P.users,null===P||void 0===P||null===(r=P.users)||void 0===r||null===(o=r.scopes)||void 0===o?void 0:o.update,K)||!(0,a.isFeatureEnabled)(null===P||void 0===P?void 0:P.users,E._.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!==R&&void 0!==R&&R.includes(s.toString())?"eye":"pencil alternate"},"data-testid":"users-list-item-edit-button",onClick:function(e,t){return J(null===t||void 0===t?void 0:t.id)},popupText:function(e){var t,n,r,o,s=(null===e||void 0===e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null===e||void 0===e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:"PRIMARY";return!(0,a.hasRequiredScopes)(null===P||void 0===P?void 0:P.users,null===P||void 0===P||null===(r=P.users)||void 0===r||null===(o=r.scopes)||void 0===o?void 0:o.update,K)||!(0,a.isFeatureEnabled)(null===P||void 0===P?void 0:P.users,E._.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!==R&&void 0!==R&&R.includes(s.toString())?x("common:view"):x("common:edit")},renderer:"semantic-icon"}];return e.push({hidden:function(e){var t,n,r,s,i=(null===e||void 0===e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null===e||void 0===e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:o.UserstoreConstants.PRIMARY_USER_STORE;return!(0,a.isFeatureEnabled)(null===P||void 0===P?void 0:P.users,E._.FEATURE_DICTIONARY.get("USER_DELETE"))||!(0,a.hasRequiredScopes)(null===P||void 0===P?void 0:P.users,null===P||void 0===P||null===(r=P.users)||void 0===r||null===(s=r.scopes)||void 0===s?void 0:s.delete,K)||(null===R||void 0===R?void 0:R.includes(i.toString()))||e.userName===(null===T||void 0===T?void 0:T.adminUser)},icon:function(){return"trash alternate"},"data-testid":"users-list-item-delete-button",onClick:function(e,t){G(!0),V(t)},popupText:function(){return x("console:manage.features.users.usersList.list.iconPopups.delete")},renderer:"semantic-icon"}),e}}(),columns:function(){var e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,r,o,a,s,i=void 0===(null===(t=e.name)||void 0===t?void 0:t.familyName)&&void 0===(null===(n=e.name)||void 0===n?void 0:n.givenName);null!==(r=e[v.SCIMConfigs.scim.enterpriseSchema])&&void 0!==r&&r.userSourceId?(a=e.emails[0]?e.emails[0]:e.id,o=e.name&&void 0!==e.name.givenName?e.name.givenName+" "+(e.name.familyName?e.name.familyName:""):a):(a=(null===(s=e.userName.split("/"))||void 0===s?void 0:s.length)>1?e.userName.split("/")[1]:e.userName.split("/")[0],o=e.name&&void 0!==e.name.givenName?e.name.givenName+" "+(e.name.familyName?e.name.familyName:""):a);return c.createElement(f.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(q,"-item-heading")},c.createElement(u.UserAvatar,{"data-testid":"users-list-item-image",name:e.userName,size:"mini",image:e.profileUrl,spaced:"right"}),c.createElement(f.Z.Content,null,c.createElement("div",{className:i?"mt-2":""},o),!i&&c.createElement(f.Z.Subheader,{"data-testid":"".concat(q,"-item-sub-heading")},a)))},title:x("console:manage.features.users.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:x("console:manage.features.users.list.columns.actions")}];if(!_||!k)return e;var t,n=[],r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}(k.entries());try{for(r.s();!(t=r.n()).done;){var o=A(t.value,2),a=o[0],s=o[1];if("name"!==a&&"emails"!==a&&"profileUrl"!==a&&""!==s){var i={allowToggleVisibility:!0,dataIndex:s,id:a,key:a,title:s};"meta.lastModified"===a&&(i=S(S({},i),{},{render:function(e){var t;return l.CommonUtils.humanizeDateDifference(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.lastModified)}})),n.push(i)}}}catch(e){r.e(e)}finally{r.f()}return n.unshift(e[0]),n.push(e[1]),n}(),data:D.Resources,onColumnSelectionChange:O,onRowClick:function(e,t){J(null===t||void 0===t?void 0:t.id),U&&U(e,t)},placeholders:Q(),selectable:Z,showHeader:!1,transparent:!w&&null!==Q(),"data-testid":q}),c.createElement(u.ConfirmationModal,{primaryActionLoading:W,"data-testid":"".concat(q,"-confirmation-modal"),onClose:function(){return G(!1)},type:"negative",open:H,assertionHint:x("console:manage.features.user.deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){G(!1)},onPrimaryActionClick:function(){var e;Y(!0),(e=null===B||void 0===B?void 0:B.id,(0,h.h8)(e).then((function(){j((0,i.addAlert)({description:x("console:manage.features.users.notifications.deleteUser.success.description"),level:s.AlertLevels.SUCCESS,message:x("console:manage.features.users.notifications.deleteUser.success.message")})),b()})).catch((function(e){e.response&&e.response.data&&e.response.data.description?j((0,i.addAlert)({description:e.response.data.description,level:s.AlertLevels.ERROR,message:x("console:manage.features.users.notifications.deleteUser.error.message")})):j((0,i.addAlert)({description:x("console:manage.features.users.notifications.deleteUser.genericError.description"),level:s.AlertLevels.ERROR,message:x("console:manage.features.users.notifications.deleteUser.genericError.message")}))}))).finally((function(){Y(!1),V(void 0),G(!1)}))},closeOnDimmerClick:!1},c.createElement(u.ConfirmationModal.Header,{"data-testid":"".concat(q,"-confirmation-modal-header")},x("console:manage.features.user.deleteUser.confirmationModal.header")),c.createElement(u.ConfirmationModal.Message,{"data-testid":"".concat(q,"-confirmation-modal-message"),attached:!0,negative:!0},x("console:manage.features.user.deleteUser.confirmationModal.message")),c.createElement(u.ConfirmationModal.Content,{"data-testid":"".concat(q,"-confirmation-modal-content")},B&&null!==(t=B[v.SCIMConfigs.scim.enterpriseSchema])&&void 0!==t&&t.userSourceId?x("console:manage.features.user.deleteJITUser.confirmationModal.content"):x("console:manage.features.user.deleteUser.confirmationModal.content"))))};R.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0};var P=n(3844),O=n(26776),I=n(48749),U=n(23177),L=n(92906),T=n(5984),M=n(10783),Z=n(6997),N=n(12558);function _(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){return Math.random()*e},q=function(e,t){var n,r=_(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;e=e.replace(o,"")}}catch(e){r.e(e)}finally{r.f()}return e};function x(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){x(a,r,o,s,i,"next",e)}function i(e){x(a,r,o,s,i,"throw",e)}s(void 0)}))}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=c.lazy((function(){return n.e(1313).then(n.bind(n,61313))})),z=function(e){var t,n=e.initialValues,r=e.triggerSubmit,a=e.emailVerificationEnabled,s=e.onSubmit,i=F((0,c.useState)([]),2),l=i[0],m=i[1],f=F((0,c.useState)(null!==(t=null===n||void 0===n?void 0:n.passwordOption)&&void 0!==t?t:"create-password"),2),p=f[0],v=f[1],E=F((0,c.useState)(null===n||void 0===n?void 0:n.domain),2),y=E[0],S=E[1],b=F((0,c.useState)(""),2),A=b[0],C=b[1],w=F((0,c.useState)(!1),2),R=w[0],_=w[1],k=F((0,c.useState)(N.o_.UsernameJavaScriptRegEx),2),x=k[0],H=k[1],z=F((0,c.useState)(!1),2),B=z[0],V=z[1],$=F((0,c.useState)(""),2),W=$[0],Y=$[1],K=(0,c.useRef)(),J=(0,d.$G)().t,Q=J("console:manage.features.user.forms.addUserForm.inputs.username.validations.invalid"),X=J("console:manage.features.user.forms.addUserForm.inputs.username.validations.regExViolation"),ee=J("console:manage.features.user.forms.addUserForm.inputs.username.validations.invalidCharacters");(0,c.useEffect)((function(){A&&""!==A&&_(!0)}),[A]),(0,c.useEffect)((function(){se()}),[]),(0,c.useEffect)((function(){p||v("create-password")}),[]);var te=[{"data-testid":"user-mgt-add-user-form-create-password-option-radio-button",label:J("console:manage.features.user.forms.addUserForm.buttons.radioButton.options.createPassword"),value:"create-password"},{"data-testid":"user-mgt-add-user-form-ask-password-option-radio-button",label:J("console:manage.features.user.forms.addUserForm.buttons.radioButton.options.askPassword"),value:"ask-password"}],ne=function(e){var t=e.get("domain").toString();S(t),re(t).finally((function(){V(!1)}))},re=function(){var e=j(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("primary"===t){e.next=5;break}return e.next=3,T.w3.getUserStoreRegEx(t,N.y8.UsernameRegEx).then((function(e){V(!0),H(e)}));case 3:e.next=6;break;case 5:H(N.o_.UsernameJavaScriptRegEx);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){var t=e.get("newPassword").toString();Y(t)},ae=function(){var e=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],c="",d="",m=q("abcdefghijklmnopqrstuvwxyz",u),f=q("ABCDEFGHIJKLMNOPQRSTUVWXYZ",u),p=q("0123456789",u),v=q("!#$%&'()*+,-./:;<=>?@[]^_{|}~",u),g=0;g<a;g++)d+=m.charAt(D(m.length));for(var h=0;h<s;h++)d+=f.charAt(D(f.length));for(var E=0;E<i;E++)d+=p.charAt(D(p.length));for(var y=0;y<l;y++)d+=v.charAt(D(v.length));var S="";S=t?S+m:S,S=n?S+f:S,S=r?S+p:S,S=o?S+v:S;for(var b=e-(c=d).length,A=0;A<b;A++)c+=S.charAt(D(S.length));return c}(11,!0,!0,!0,!0,1,1,1,1);Y(e),C(e)},se=function(){var e=[{key:-1,text:J("console:manage.features.users.userstores.userstoreOptions.primary"),value:"primary"}],t={key:null,text:"",value:""};S(e[0].value),Z.F.isCurrentOrganizationRoot()&&(0,P.getUserStoreList)(g.h.getState().config.endpoints.userStores).then((function(n){e===[]&&e.push(t),n.data.map((function(n,r){n.name!==N.XS&&n.enabled&&(t={key:r,text:n.name,value:n.name},e.push(t))})),m(e)})),m(e)},ie=function(){var e,t,n,r=null===K||void 0===K||null===(e=K.current)||void 0===e||null===(t=e.children[0])||void 0===t||null===(n=t.children[1])||void 0===n?void 0:n.children[0];r&&r.focus&&r.blur&&(r.focus(),r.blur())};return c.createElement(c.Fragment,null,function(){var e,t;return c.createElement(O.Forms,{"data-testid":"user-mgt-add-user-form",onSubmit:function(e){ie(),e.get("newPassword")===e.get("confirmPassword")&&s(function(e){var t;return{confirmPassword:e.get("confirmPassword")&&void 0!==e.get("confirmPassword")?e.get("confirmPassword").toString():"",domain:e.get("domain").toString(),email:e.get("email").toString(),firstName:e.get("firstName").toString(),lastName:e.get("lastName").toString(),newPassword:e.get("newPassword")&&void 0!==e.get("newPassword")?e.get("newPassword").toString():"",passwordOption:null===(t=e.get("passwordOption"))||void 0===t?void 0:t.toString(),userName:e.get("userName").toString()}}(e))},submitState:r},c.createElement(U.Z,null,c.createElement(U.Z.Row,{columns:2},c.createElement(M.Yr,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(O.Field,{"data-testid":"user-mgt-add-user-form-domain-dropdown",type:"dropdown",label:J("console:manage.features.user.forms.addUserForm.inputs.domain.label"),name:"domain",children:l,requiredErrorMessage:J("console:manage.features.user.forms.addUserForm.inputs.domain.validations.empty"),required:!0,value:null!==n&&void 0!==n&&n.domain?null===n||void 0===n?void 0:n.domain:null===(e=l[0])||void 0===e?void 0:e.value,listen:ne,tabIndex:1}))),c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(O.Field,{"data-testid":"user-mgt-add-user-form-username-input",label:J("console:manage.features.user.forms.addUserForm.inputs.username.label"),name:"userName",placeholder:J("console:manage.features.user.forms.addUserForm.inputs.username.placeholder"),required:!0,requiredErrorMessage:J("console:manage.features.user.forms.addUserForm.inputs.username.validations.empty"),type:"text",validation:function(){var e=j(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}return e.next=4,(0,h.Fp)(null,null,"userName eq "+t,null,y);case 4:(null===(r=e.sent)||void 0===r?void 0:r.totalResults)>0&&(n.isValid=!1,n.errorMessages.push(Q));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),500===(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.status)&&(n.isValid=!1,n.errorMessages.push(ee));case 11:t&&!T.w3.validateInputAgainstRegEx(t,x)&&(n.isValid=!1,n.errorMessages.push(X));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),value:n&&n.userName,loading:B,tabIndex:2,maxLength:30}))),c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(O.Field,{"data-testid":"user-mgt-add-user-form-firstName-input",label:J("console:manage.features.user.forms.addUserForm.inputs.firstName.label"),name:"firstName",placeholder:J("console:manage.features.user.forms.addUserForm.inputs.firstName.placeholder"),required:!0,requiredErrorMessage:J("console:manage.features.user.forms.addUserForm.inputs.firstName.validations.empty"),type:"text",value:n&&n.firstName,tabIndex:3,maxLength:30})),c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(O.Field,{"data-testid":"user-mgt-add-user-form-lastName-input",label:J("console:manage.features.user.forms.addUserForm.inputs.lastName.label"),name:"lastName",placeholder:J("console:manage.features.user.forms.addUserForm.inputs.lastName.placeholder"),required:!0,requiredErrorMessage:J("console:manage.features.user.forms.addUserForm.inputs.lastName.validations.empty"),type:"text",value:n&&n.lastName,tabIndex:4,maxLength:30}))),c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(O.Field,{"data-testid":"user-mgt-add-user-form-email-input",label:J("console:manage.features.user.forms.addUserForm.inputs.email.label"),name:"email",placeholder:J("console:manage.features.user.forms.addUserForm.inputs.email.placeholder"),required:!0,requiredErrorMessage:J("console:manage.features.user.forms.addUserForm.inputs.email.validations.empty"),validation:function(e,t){I.I.email(e)||(t.isValid=!1,t.errorMessages.push(J("console:manage.features.user.forms.addUserForm.inputs.email.validations.invalid").toString()))},type:"email",value:n&&n.email,tabIndex:5,maxLength:50}))),a&&c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:10},c.createElement(O.Field,{type:"radio",label:J("console:manage.features.user.forms.addUserForm.buttons.radioButton.label"),name:"passwordOption",default:"create-password",listen:function(e){v(e.get("passwordOption").toString())},children:te,value:null!==(t=null===n||void 0===n?void 0:n.passwordOption)&&void 0!==t?t:"create-password",tabIndex:6}))),p&&"create-password"===p?c.createElement(c.Fragment,null,c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(O.Field,{"data-testid":"user-mgt-add-user-form-newPassword-input",className:"addon-field-wrapper",hidePassword:J("common:hidePassword"),label:J("console:manage.features.user.forms.addUserForm.inputs.newPassword.label"),name:"newPassword",placeholder:J("console:manage.features.user.forms.addUserForm.inputs.newPassword.placeholder"),required:!0,requiredErrorMessage:J("console:manage.features.user.forms.addUserForm.inputs.newPassword.validations.empty"),showPassword:J("common:showPassword"),type:"password",value:R?A:null===n||void 0===n?void 0:n.newPassword,validation:function(){var e=j(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie(),r="",y===o.UserstoreConstants.PRIMARY_USER_STORE.toLocaleLowerCase()){e.next=8;break}return e.next=5,T.w3.getUserStoreRegEx(y,N.y8.PasswordRegEx);case 5:r=e.sent,e.next=9;break;case 8:r=N.o_.PasswordJavaScriptRegEx;case 9:T.w3.validateInputAgainstRegEx(t,r)||(n.isValid=!1,n.errorMessages.push(J("console:manage.features.user.forms.addUserForm.inputs.newPassword.validations.regExViolation")));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tabIndex:6,enableReinitialize:!0,listen:oe}),c.createElement(c.Suspense,{fallback:null},c.createElement(G,{password:W,scoreWords:[J("common:tooShort"),J("common:weak"),J("common:okay"),J("common:good"),J("common:strong")],shortScoreWord:J("common:tooShort")}))),c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(u.PrimaryButton,{className:"generate-password-button",onClick:ae,type:"button",icon:"random"},J("common:generatePassword")))),c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},c.createElement(O.Field,{ref:K,"data-testid":"user-mgt-add-user-form-confirmPassword-input",className:"addon-field-wrapper",hidePassword:J("common:hidePassword"),label:J("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.label"),name:"confirmPassword",placeholder:J("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.placeholder"),required:!0,requiredErrorMessage:J("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.empty"),showPassword:J("common:showPassword"),type:"password",value:R?A:null===n||void 0===n?void 0:n.confirmPassword,validation:function(e,t,n){if(n.get("newPassword")!==e)return t.isValid=!1,void t.errorMessages.push(J("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.mismatch"));t.isValid=!0,t.errorMessages.push(null),ie()},tabIndex:7,enableReinitialize:!0})))):p&&"ask-password"===p?c.createElement(c.Fragment,null,c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:10},c.createElement(L.Z,{icon:"mail",content:"An email with a confirmation link will be sent to the provided email address for the user to set his/her own password."})))):""))}())},B=n(87289),V=n(70787),$=n.n(V),W=n(44706),Y=n(1410),K=n(84504),J=n(5554),Q=n(22946),X=n(85027),ee=n(34694);function te(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"===typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=c.lazy((function(){return n.e(1313).then(n.bind(n,61313))})),se=function(e){var t=e.onAlertFired,n=e.user,r=e.handleUserUpdate,a=e.openChangePasswordModal,i=e.handleCloseChangePasswordModal,l=e.connectorProperties,m=e.handleForcePasswordResetTrigger,f=e["data-testid"],v=(0,d.$G)().t,E=ne((0,c.useState)(!1),2),y=E[0],S=E[1],b=ne((0,c.useState)(!0),2),A=b[0],C=b[1],w=ne((0,c.useState)(""),2),R=w[0],P=w[1],I=ne((0,c.useState)("setPassword"),2),L=I[0],T=I[1],M=ne((0,O.useTrigger)(),2),Z=M[0],_=M[1],k=ne((0,c.useState)(void 0),2),D=k[0],q=k[1],x=ne((0,c.useState)("false"),2),j=x[0],F=x[1],H=ne((0,c.useState)(!1),2),G=H[0],z=H[1];(0,c.useEffect)((function(){l&&void 0===D&&q(l)}),[l]),(0,c.useEffect)((function(){if(D&&Array.isArray(D)&&(null===D||void 0===D?void 0:D.length)>0){var e,t=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=re(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}(D);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.name!==ee.vH.RECOVERY_LINK_PASSWORD_RESET&&n.name!==ee.vH.OTP_PASSWORD_RESET&&n.name!==ee.vH.OFFLINE_PASSWORD_RESET||"true"===n.value&&F(n.value)}}catch(e){t.e(e)}finally{t.f()}}}),[D]);var B=function(){P(""),T("setPassword")},V=[{label:v("console:manage.features.user.modals.changePasswordModal.passwordOptions.setPassword"),value:"setPassword"},{label:v("console:manage.features.user.modals.changePasswordModal.passwordOptions.forceReset"),value:"forceReset"}],$=function(){return L&&"setPassword"===L?c.createElement(c.Fragment,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement(O.Field,{"data-testid":"user-mgt-edit-user-form-newPassword-input",className:"addon-field-wrapper",hidePassword:v("common:hidePassword"),label:v("console:manage.features.user.forms.addUserForm.inputs.newPassword.label"),name:"newPassword",placeholder:v("console:manage.features.user.forms.addUserForm.inputs.newPassword.placeholder"),required:!0,requiredErrorMessage:v("console:manage.features.user.forms.addUserForm.inputs.newPassword.validations.empty"),showPassword:v("common:showPassword"),type:"password",value:"",listen:Y,loading:y,validation:function(e,t){A||(t.isValid=!1,t.errorMessages.push(v("console:manage.features.user.forms.addUserForm.inputs.newPassword.validations.regExViolation")))}}),c.createElement(c.Suspense,{fallback:null},c.createElement(ae,{password:R})))),c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement(O.Field,{"data-testid":"user-mgt-edit-user-form-confirmPassword-input",className:"addon-field-wrapper",hidePassword:v("common:hidePassword"),label:v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.label"),name:"confirmPassword",placeholder:v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.placeholder"),required:!0,requiredErrorMessage:v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.empty"),showPassword:v("common:showPassword"),type:"password",value:"",validation:function(e,t,n){n.get("newPassword")!==e&&(t.isValid=!1,t.errorMessages.push(v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.mismatch")))}})))):c.createElement(c.Fragment,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement("p",null,"Following are the password reset options available. Please make sure you have enabled the required configurations."),(null===D||void 0===D?void 0:D.length)>1&&c.createElement(u.EditSection,null,c.createElement(Q.Z,null,function(e){return null===e||void 0===e?void 0:e.map((function(e,t){if((null===e||void 0===e?void 0:e.name)!==ee.vH.ACCOUNT_DISABLE_INTERNAL_NOTIFICATION_MANAGEMENT&&(null===e||void 0===e?void 0:e.name)!==ee.vH.ACCOUNT_DISABLING_ENABLE&&(null===e||void 0===e?void 0:e.name)!==ee.vH.ADMIN_FORCED_PASSWORD_RESET_EXPIRY_TIME&&(null===e||void 0===e?void 0:e.name)!==ee.vH.ACCOUNT_LOCK_ON_CREATION)return c.createElement(Q.Z.Item,{key:t},c.createElement(p.Z,{color:"true"===(null===e||void 0===e?void 0:e.value)?"green":"red",name:"true"===(null===e||void 0===e?void 0:e.value)?"check circle":"times circle"}),null===e||void 0===e?void 0:e.displayName)}))}(D))))))},W=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,o,a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="","primary"===(i=(null===n||void 0===n||null===(r=n.userName)||void 0===r||null===(o=r.split("/"))||void 0===o?void 0:o.length)>1?null===n||void 0===n||null===(a=n.userName)||void 0===a?void 0:a.split("/")[0]:"primary")){e.next=7;break}return e.next=5,g.w3.getUserStoreRegEx(i,N.y8.PasswordRegEx).then((function(e){S(!0),s=e}));case 5:e.next=8;break;case 7:s=N.o_.PasswordJavaScriptRegEx;case 8:C(g.w3.validateInputAgainstRegEx(t,s));case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){te(a,r,o,s,i,"next",e)}function i(e){te(a,r,o,s,i,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Y=function(e){var t=e.get("newPassword").toString();P(t),W(t).finally((function(){S(!1)}))};return c.createElement(X.Z,{"data-testid":f,open:a,size:"tiny"},c.createElement(X.Z.Header,null,v("console:manage.features.user.modals.changePasswordModal.header")),c.createElement(X.Z.Content,null,c.createElement(O.Forms,{"data-testid":"".concat(f,"-form"),onSubmit:function(e){"setPassword"===L?function(e){var o={Operations:[{op:"replace",value:{password:e.get("newPassword").toString()}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};z(!0),(0,h.gS)(n.id,o).then((function(){t({description:v("console:manage.features.user.profile.notifications.changeUserPassword.success.description"),level:s.AlertLevels.SUCCESS,message:v("console:manage.features.user.profile.notifications.changeUserPassword.success.message")}),i(),B(),r(n.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?t({description:e.response.data.description,level:s.AlertLevels.ERROR,message:v("console:manage.features.user.profile.notifications.changeUserPassword.error.message")}):(t({description:v("console:manage.features.user.profile.notifications.changeUserPassword.genericError.description"),level:s.AlertLevels.ERROR,message:v("console:manage.features.user.profile.notifications.changeUserPassword.genericError.message")}),i(),B())})).finally((function(){z(!1)}))}(e):function(){if("false"!==j){var e,a,l,u={Operations:[{op:"add",value:(e={},a=o.ProfileConstants.SCIM2_ENT_USER_SCHEMA,l={forcePasswordReset:!0},a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e)}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};z(!0),(0,h.gS)(n.id,u).then((function(){t({description:v("console:manage.features.user.profile.notifications.forcePasswordReset.success.description"),level:s.AlertLevels.SUCCESS,message:v("console:manage.features.user.profile.notifications.forcePasswordReset.success.message")}),m(),B(),i(),r(n.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?t({description:e.response.data.description,level:s.AlertLevels.ERROR,message:v("console:manage.features.user.profile.notifications.forcePasswordReset.error.message")}):(t({description:v("console:manage.features.user.profile.notifications.forcePasswordReset.genericError.description"),level:s.AlertLevels.ERROR,message:v("console:manage.features.user.profile.notifications.forcePasswordReset.genericError.message")}),B(),i())})).finally((function(){z(!1)}))}else t({description:v("console:manage.features.user.profile.notifications.noPasswordResetOptions.error.description"),level:s.AlertLevels.WARNING,message:v("console:manage.features.user.profile.notifications.noPasswordResetOptions.error.message")})}()},submitState:Z},c.createElement(U.Z,null,(null===D||void 0===D?void 0:D.length)>1?c.createElement(c.Fragment,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement(O.Field,{"data-testid":"user-mgt-add-user-form-passwordOption-radio-button",type:"radio",label:v("console:manage.features.user.forms.addUserForm.buttons.radioButton.label"),name:"passwordOption",default:"setPassword",listen:function(e){T(e.get("passwordOption").toString())},children:V,value:"setPassword",tabIndex:4,maxWidth:60,width:60}))),$(),c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement(u.Message,{type:"warning",content:v("console:manage.features.user.modals.changePasswordModal.message")})))):c.createElement(c.Fragment,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement(O.Field,{"data-testid":"user-mgt-edit-user-form-newPassword-input",className:"addon-field-wrapper",hidePassword:v("common:hidePassword"),label:v("console:manage.features.user.forms.addUserForm.inputs.newPassword.label"),name:"newPassword",placeholder:v("console:manage.features.user.forms.addUserForm.inputs.newPassword.placeholder"),required:!0,requiredErrorMessage:v("console:manage.features.user.forms.addUserForm.inputs.newPassword.validations.empty"),showPassword:v("common:showPassword"),type:"password",value:"",listen:Y,loading:y,validation:function(e,t){A||(t.isValid=!1,t.errorMessages.push(v("console:manage.features.user.forms.addUserForm.inputs.newPassword.validations.regExViolation")))}}),c.createElement(c.Suspense,{fallback:null},c.createElement(ae,{password:R})))),c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement(O.Field,{"data-testid":"user-mgt-edit-user-form-confirmPassword-input",className:"addon-field-wrapper",hidePassword:v("common:hidePassword"),label:v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.label"),name:"confirmPassword",placeholder:v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.placeholder"),required:!0,requiredErrorMessage:v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.empty"),showPassword:v("common:showPassword"),type:"password",value:"",validation:function(e,t,n){n.get("newPassword")!==e&&(t.isValid=!1,t.errorMessages.push(v("console:manage.features.user.forms.addUserForm.inputs.confirmPassword.validations.mismatch")))}}))),c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:14},c.createElement(u.Message,{type:"warning",content:v("console:manage.features.user.modals.changePasswordModal.message")}))))))),c.createElement(X.Z.Actions,null,c.createElement(U.Z,null,c.createElement(U.Z.Row,{column:1},c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:16},c.createElement(u.PrimaryButton,{"data-testid":"".concat(f,"-save-button"),floated:"right",loading:G,disabled:G,onClick:function(){return _()}},v("console:manage.features.user.modals.changePasswordModal.button")),c.createElement(u.LinkButton,{"data-testid":"".concat(f,"-cancel-button"),floated:"left",onClick:function(){i(),B()}},v("common:cancel")))))))};se.defaultProps={"data-testid":"user-mgt-change-password"};var ie=n(67897);function le(e){return function(e){if(Array.isArray(e))return ve(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"===typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=function(e){var t,n,r,f,v=e.onAlertFired,y=e.user,S=e.handleUserUpdate,b=e.isReadOnly,A=e.allowDeleteOnly,C=e.featureConfig,w=e.connectorProperties,R=e.isReadOnlyUserStoresLoading,P=e.tenantAdmin,I=e.editUserDisclaimerMessage,L=e.adminUserType,T=e["data-testid"],M=(0,d.$G)().t,N=(0,m.I0)(),_=(0,m.v9)((function(e){return e.profile.profileSchemas})),k=(0,m.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),D=(0,m.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.username})),q=fe((0,c.useState)(new Map),2),x=q[0],j=q[1],F=fe((0,c.useState)(),2),H=F[0],G=F[1],z=fe((0,c.useState)(!1),2),V=z[0],Q=z[1],X=fe((0,c.useState)(void 0),2),te=X[0],ne=X[1],re=fe((0,c.useState)(void 0),2),oe=re[0],ae=re[1],ce=fe((0,c.useState)(!1),2),pe=ce[0],ve=ce[1],ge=fe((0,c.useState)(!1),2),he=ge[0],Ee=ge[1],ye=fe((0,c.useState)({accountDisable:"false",accountLock:"false",forcePasswordReset:"false"}),2),Se=ye[0],be=ye[1],Ae=fe((0,c.useState)(!1),2),Ce=Ae[0],we=Ae[1],Re=fe((0,c.useState)(!1),2),Pe=Re[0],Oe=Re[1],Ie=fe((0,c.useState)(!1),2),Ue=Ie[0],Le=Ie[1],Te=fe((0,c.useState)(void 0),2),Me=Te[0],Ze=Te[1],Ne=fe((0,u.useConfirmationModalAlert)(),3),_e=Ne[0],ke=Ne[1],De=Ne[2],qe=fe((0,c.useState)([]),2),xe=qe[0],je=qe[1],Fe=fe((0,c.useState)(!1),2),He=Fe[0],Ge=Fe[1],ze=null===y||void 0===y||null===(t=y.meta)||void 0===t?void 0:t.created,Be=null===y||void 0===y||null===(n=y.meta)||void 0===n?void 0:n.lastModified;(0,c.useEffect)((function(){if(Z.F.isCurrentOrganizationRoot()&&w&&Array.isArray(w)&&(null===w||void 0===w?void 0:w.length)>0){var e,t=de({},Se),n=ue(w);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.name===ee.vH.ACCOUNT_DISABLING_ENABLE?t=de(de({},t),{},{accountDisable:r.value}):r.name===ee.vH.RECOVERY_LINK_PASSWORD_RESET||r.name===ee.vH.OTP_PASSWORD_RESET||r.name===ee.vH.OFFLINE_PASSWORD_RESET?"true"===r.value&&(t=de(de({},t),{},{forcePasswordReset:r.value})):r.name===ee.vH.ACCOUNT_LOCK_ON_CREATION&&(t=de(de({},t),{},{accountLock:r.value}))}}catch(e){n.e(e)}finally{n.f()}be(t)}}),[w]),(0,c.useEffect)((function(){if(void 0!==(null===y||void 0===y?void 0:y.id)){var e=E._.SCIM2_ATTRIBUTES_DICTIONARY.get("ONETIME_PASSWORD");(0,h.M_)(null===y||void 0===y?void 0:y.id,e).then((function(e){var t;Ze(null===(t=e[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA])||void 0===t?void 0:t.oneTimePassword)}))}}),[Ce]),(0,c.useEffect)((function(){if(void 0!==(null===y||void 0===y?void 0:y.id)){var e=E._.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")+","+E._.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_DISABLED")+","+E._.SCIM2_ATTRIBUTES_DICTIONARY.get("ONETIME_PASSWORD");(0,h.M_)(null===y||void 0===y?void 0:y.id,e).then((function(e){var t,n,r,a,s;Oe(null!==(t=null===(n=e[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA])||void 0===n?void 0:n.accountLocked)&&void 0!==t&&t),Le(null!==(r=null===(a=e[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA])||void 0===a?void 0:a.accountDisabled)&&void 0!==r&&r),Ze(null===(s=e[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA])||void 0===s?void 0:s.oneTimePassword)}))}}),[y]),(0,c.useEffect)((function(){je(l.CommonUtils.getCountryList())}),[]);(0,c.useEffect)((function(){var e=l.ProfileUtils.flattenSchemas(le(_)).filter((function(e){return e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("META_VERSION"))})).sort((function(e,t){return e.displayOrder?t.displayOrder?parseInt(e.displayOrder,10)-parseInt(t.displayOrder,10):1:-1}));G(e)}),[_]),(0,c.useEffect)((function(){!function(e,t){if(!(0,B.Z)(H)&&!(0,B.Z)(t)){var n=new Map;"internal"===L?e.forEach((function(e){var r=e.name.split(".");if(1===r.length)if("emails"===r[0]){var a=r[0];if(l.ProfileUtils.isStringArray(t[a])){var s=t[a].find((function(e){return"string"===typeof e}));n.set(e.name,s)}}else{var i=r[0];if(e.extended&&t[o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA])return void n.set(e.name,t[o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA][i]);n.set(e.name,t[i])}else if("name"===r[0]){var u=r[0],c=r[1];c&&t[u]&&t[u][c]&&n.set(e.name,t[u][c])}else{var d=r[0],m=r[1];if(e.extended&&t[o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA])d&&m&&t[o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA][d]&&t[o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA][d][m]&&n.set(e.name,t[o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA][d][m]);else{var f=t[d]&&Array.isArray(t[d])&&t[d].find((function(e){return e.type===m}));"addresses"===d?n.set(e.name,f?f.formatted:""):n.set(e.name,f?f.value:"")}}})):e.forEach((function(e){var r=e.name.split(".");if(1===r.length)if("emails"===r[0]){var a=r[0];if(l.ProfileUtils.isStringArray(t[a])){var s=t[a].find((function(e){return"string"===typeof e}));n.set(e.name,s)}}else{var i=r[0];if(e.extended&&t[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA])return void n.set(e.name,t[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA][i]);n.set(e.name,t[i])}else if("name"===r[0]){var u=r[0],c=r[1];c&&t[u]&&t[u][c]&&n.set(e.name,t[u][c])}else{var d=r[0],m=r[1];if(e.extended&&t[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA])d&&m&&t[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA][d]&&t[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA][d][m]&&n.set(e.name,t[o.ProfileConstants.SCIM2_ENT_USER_SCHEMA][d][m]);else{var f=t[d]&&Array.isArray(t[d])&&t[d].find((function(e){return e.type===m}));"addresses"===d?n.set(e.name,f?f.formatted:""):n.set(e.name,f?f.value:"")}}})),j(n)}}(H,y)}),[H,y]);var Ve=function(e){var t,n,r,o,a;(ae({name:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.id,value:null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.checked}),null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.checked)?ve(!0):$e(null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.id,null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.checked)},$e=function(e,t){var n={Operations:[{op:"replace",value:me({},o.ProfileConstants.SCIM2_ENT_USER_SCHEMA,me({},e,t))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};"internal"===L&&(n={Operations:[{op:"replace",value:me({},o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA,me({},e,t))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]}),(0,h.gS)(y.id,n).then((function(){v({description:e===o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?M(t?"console:manage.features.user.profile.notifications.lockUserAccount.success.description":"console:manage.features.user.profile.notifications.unlockUserAccount.success.description"):M(t?"console:manage.features.user.profile.notifications.disableUserAccount.success.description":"console:manage.features.user.profile.notifications.enableUserAccount.success.description"),level:s.AlertLevels.SUCCESS,message:e===o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?M(t?"console:manage.features.user.profile.notifications.lockUserAccount.success.message":"console:manage.features.user.profile.notifications.unlockUserAccount.success.message",{name:y.userName}):M(t?"console:manage.features.user.profile.notifications.disableUserAccount.success.message":"console:manage.features.user.profile.notifications.enableUserAccount.success.message",{name:y.userName})}),ve(!1),S(y.id),ae(void 0)})).catch((function(t){t.response&&t.response.data&&t.response.data.description?v({description:t.response.data.description,level:s.AlertLevels.ERROR,message:e===E._.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?M("console:manage.features.user.profile.notifications.lockUserAccount.error.message"):M("console:manage.features.user.profile.notifications.disableUserAccount.error.message")}):v({description:(null===oe||void 0===oe?void 0:oe.name)===E._.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?M("console:manage.features.user.profile.notifications.lockUserAccount.genericError.description"):M("console:manage.features.user.profile.notifications.disableUserAccount.genericError.description"),level:s.AlertLevels.ERROR,message:(null===oe||void 0===oe?void 0:oe.name)===E._.SCIM2_ATTRIBUTES_DICTIONARY.get("ACCOUNT_LOCKED")?M("console:manage.features.user.profile.notifications.lockUserAccount.genericError.message"):M("console:manage.features.user.profile.notifications.disableUserAccount.genericError.message")})}))},We=function(e,t){var n,r=M("console:manage.features.user.profile.fields."+e.name.replace(".","_"),{defaultValue:e.displayName}),a=null===x||void 0===x||null===(n=x.get(e.name))||void 0===n?void 0:n.toString().split("/");return c.createElement(U.Z.Row,{columns:1,key:t},c.createElement(U.Z.Column,{mobile:12,tablet:12,computer:6},"userName"===e.name&&a.length>1?c.createElement(c.Fragment,null,"internal"===L?c.createElement(W.Z.Field,null,c.createElement("label",null,ie.commonConfig.userEditSection.showEmail?r:r+" (Email)"),c.createElement(Y.Z,{"data-testid":"".concat(T,"-profile-form-").concat(e.name,"-input"),name:e.name,required:e.required,requiredErrorMessage:r+" is required",placeholder:"Enter your "+r,type:"text",value:a[1],key:t,readOnly:!0,maxLength:30})):c.createElement(W.Z.Field,null,c.createElement("label",null,ie.commonConfig.userEditSection.showEmail?r:r+" (Email)"),c.createElement(Y.Z,{"data-testid":"".concat(T,"-profile-form-").concat(e.name,"-input"),name:e.name,label:a[0]+" / ",required:e.required,requiredErrorMessage:r+" is required",placeholder:"Enter your "+r,type:"text",value:a[1],key:t,readOnly:b||e.mutability===o.ProfileConstants.READONLY_SCHEMA,maxLength:30}))):function(e,t,n){return"BOOLEAN"===e.type.toUpperCase()?c.createElement(O.Field,{"data-testid":"".concat(T,"-profile-form-").concat(e.name,"-input"),name:e.name,required:e.required,requiredErrorMessage:t+" is required",type:"checkbox",value:x.get(e.name)?[e.name]:[],children:[{label:t,value:e.name}],readOnly:b||e.mutability===o.ProfileConstants.READONLY_SCHEMA,key:n}):"country"===e.name?c.createElement(O.Field,{"data-testid":"".concat(T,"-profile-form-").concat(e.name,"-input"),name:e.name,label:t,required:e.required,requiredErrorMessage:t+" is required",placeholder:"Select your "+t,type:"dropdown",value:x.get(e.name),children:xe?xe.map((function(e){return{"data-testid":"".concat(T,"-profile-form-country-dropdown-")+e.value,flag:e.flag,key:e.key,text:e.text,value:e.value}})):[],key:n,disabled:!1,readOnly:b||e.mutability===o.ProfileConstants.READONLY_SCHEMA,clearable:!e.required,search:!0,selection:!0,fluid:!0}):c.createElement(O.Field,{"data-testid":"".concat(T,"-profile-form-").concat(e.name,"-input"),name:e.name,label:"profileUrl"===e.name?"Profile Image URL":ie.commonConfig.userEditSection.showEmail||"userName"!==e.name?t:t+" (Email)",required:e.required,requiredErrorMessage:t+" is required",placeholder:"Enter your "+t,type:"text",value:x.get(e.name),key:n,disabled:"userName"===e.name,readOnly:b||e.mutability===o.ProfileConstants.READONLY_SCHEMA,validation:function(n,r){RegExp(e.regEx).test(n)||(r.isValid=!1,r.errorMessages.push(M("console:manage.features.users.forms.validation.formatError",{field:t})))},maxLength:30})}(e,r,t)))};return R?c.createElement(u.ContentLoader,{dimmer:!0}):c.createElement(c.Fragment,null,c.createElement(U.Z,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,null,(0,a.hasRequiredScopes)(null===C||void 0===C?void 0:C.users,null===C||void 0===C||null===(r=C.users)||void 0===r||null===(f=r.scopes)||void 0===f?void 0:f.update,k)&&!b&&"admin"!==y.userName&&"None"===L&&c.createElement(K.Z,{basic:!0,color:"orange",onClick:function(){return Ee(!0)},floated:"right"},c.createElement(p.Z,{name:"redo"}),M("console:manage.features.user.modals.changePasswordModal.button"))))),!(0,B.Z)(x)&&c.createElement(u.EmphasizedSegment,{padded:"very"},b&&!(0,B.Z)(P)&&I,c.createElement(O.Forms,{"data-testid":"".concat(T,"-form"),onSubmit:function(e){return function(e){var t={Operations:[],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]},n={op:"replace",value:{}};"internal"===L?H.forEach((function(r){if(r.mutability!==o.ProfileConstants.READONLY_SCHEMA){var a={},s=r.name.split(".");if("roles.default"!==r.name&&void 0!==e.get(r.name)&&void 0!==e.get(r.name).toString())if(l.ProfileUtils.isMultiValuedSchemaAttribute(H,s[0])||"phoneNumbers"===s[0]){var i=[],u=new Map;if(1===s.length||"phoneNumbers.mobile"===r.name){var c,d=ue(e.keys());try{for(d.s();!(c=d.n()).done;){var m=c.value;m.split(".")[0]===s[0]&&u.set(m,e.get(m))}}catch(e){d.e(e)}finally{d.f()}var f,p=ue(u);try{for(p.s();!(f=p.n()).done;){var v=fe(f.value,2),g=v[0],h=v[1],y=g.split(".");h&&""!==h&&(1===y.length?i.push(h):i.push({type:y[1],value:h}))}}catch(e){p.e(e)}finally{p.f()}a=me({},s[0],i)}}else{var S,b;if(1===s.length)a=r.extended?me({},o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA,me({},s[0],"BOOLEAN"===r.type.toUpperCase()?!(null===(S=e.get(r.name))||void 0===S||!S.includes(r.name)):e.get(s[0]))):s[0]===E._.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")?{emails:[e.get(r.name)]}:me({},s[0],e.get(s[0]));else if(r.extended)a=me({},o.ProfileConstants.SCIM2_WSO2_USER_SCHEMA,me({},s[0],me({},s[1],"BOOLEAN"===r.type.toUpperCase()?!(null===(b=e.get(r.name))||void 0===b||!b.includes(r.name)):e.get(r.name))));else if(s[0]===E._.SCIM2_SCHEMA_DICTIONARY.get("NAME"))e.get(r.name)&&(a={name:me({},s[1],e.get(r.name))});else if("addresses"===s[0])a=me({},s[0],[{formatted:e.get(r.name),type:s[1]}]);else if("emails"!==s[0]&&"phoneNumbers"!==s[0]){var A;a=me({},s[0],[{type:s[1],value:"BOOLEAN"===r.type.toUpperCase()?!(null===(A=e.get(r.name))||void 0===A||!A.includes(r.name)):e.get(r.name)}])}}n={op:"replace",value:a},"addresses"===s[0]&&(n.op="add"),t.Operations.push(n)}})):H.forEach((function(r){if(r.mutability!==o.ProfileConstants.READONLY_SCHEMA){var a={},s=r.name.split(".");if("roles.default"!==r.name&&void 0!==e.get(r.name)&&void 0!==e.get(r.name).toString())if(l.ProfileUtils.isMultiValuedSchemaAttribute(H,s[0])||"phoneNumbers"===s[0]){var i=[],u=new Map;if(1===s.length||"phoneNumbers.mobile"===r.name){var c,d=ue(e.keys());try{for(d.s();!(c=d.n()).done;){var m=c.value;m.split(".")[0]===s[0]&&u.set(m,e.get(m))}}catch(e){d.e(e)}finally{d.f()}var f,p=ue(u);try{for(p.s();!(f=p.n()).done;){var v=fe(f.value,2),g=v[0],h=v[1],y=g.split(".");h&&""!==h&&(1===y.length?i.push(h):i.push({type:y[1],value:h}))}}catch(e){p.e(e)}finally{p.f()}a=me({},s[0],i)}}else{var S,b;if(1===s.length)a=r.extended?me({},o.ProfileConstants.SCIM2_ENT_USER_SCHEMA,me({},s[0],"BOOLEAN"===r.type.toUpperCase()?!(null===(S=e.get(r.name))||void 0===S||!S.includes(r.name)):e.get(s[0]))):s[0]===E._.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")?{emails:[e.get(r.name)]}:me({},s[0],e.get(s[0]));else if(r.extended)a=me({},o.ProfileConstants.SCIM2_ENT_USER_SCHEMA,me({},s[0],me({},s[1],"BOOLEAN"===r.type.toUpperCase()?!(null===(b=e.get(r.name))||void 0===b||!b.includes(r.name)):e.get(r.name))));else if(s[0]===E._.SCIM2_SCHEMA_DICTIONARY.get("NAME"))e.get(r.name)&&(a={name:me({},s[1],e.get(r.name))});else if("addresses"===s[0])a=me({},s[0],[{formatted:e.get(r.name),type:s[1]}]);else if("emails"!==s[0]&&"phoneNumbers"!==s[0]){var A;a=me({},s[0],[{type:s[1],value:"BOOLEAN"===r.type.toUpperCase()?!(null===(A=e.get(r.name))||void 0===A||!A.includes(r.name)):e.get(r.name)}])}}n={op:"replace",value:a},"addresses"===s[0]&&(n.op="add"),t.Operations.push(n)}})),Ge(!0),(0,h.gS)(y.id,t).then((function(){v({description:M("console:manage.features.user.profile.notifications.updateProfileInfo.success.description"),level:s.AlertLevels.SUCCESS,message:M("console:manage.features.user.profile.notifications.updateProfileInfo.success.message")}),S(y.id)})).catch((function(e){var t,n,r,o,a,l,u,c;null!==e&&void 0!==e&&null!==(t=e.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail||null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&null!==(o=r.data)&&void 0!==o&&o.description?N((0,i.addAlert)({description:(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.detail)||(null===e||void 0===e||null===(u=e.response)||void 0===u||null===(c=u.data)||void 0===c?void 0:c.description),level:s.AlertLevels.ERROR,message:M("console:manage.features.user.profile.notifications.updateProfileInfo.error.message")})):N((0,i.addAlert)({description:M("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.description"),level:s.AlertLevels.ERROR,message:M("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){Ge(!1)}))}(e)}},c.createElement(U.Z,null,y.id&&c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:12,tablet:12,computer:6},c.createElement(W.Z.Field,null,c.createElement("label",null,M("console:manage.features.user.profile.fields.userId")),c.createElement(Y.Z,{name:"userID",type:"text",value:y.id,readOnly:!0})))),H&&H.map((function(e,t){if(e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ROLES_DEFAULT"))&&e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("GROUPS"))&&e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("PROFILE_URL"))&&e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED"))&&e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_DISABLED"))&&e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ONETIME_PASSWORD"))&&(ie.commonConfig.userEditSection.showEmail||e.name!==(null===o.ProfileConstants||void 0===o.ProfileConstants?void 0:o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")))&&function(e){return!(0,B.Z)(x.get(e.name))||!b&&e.mutability!==o.ProfileConstants.READONLY_SCHEMA}(e))return We(e,t)})),Me&&c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:12,tablet:12,computer:6},c.createElement(O.Field,{"data-testid":"".concat(T,"-profile-form-one-time-pw }\n                                                        -input"),name:"oneTimePassword",label:M("console:manage.features.user.profile.fields.oneTimePassword"),required:!1,requiredErrorMessage:"",type:"text",hidden:void 0===Me,value:Me&&Me,readOnly:!0}))),ze&&c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:12,tablet:12,computer:6},c.createElement(W.Z.Field,null,c.createElement("label",null,M("console:manage.features.user.profile.fields.createdDate")),c.createElement(Y.Z,{name:"createdDate",type:"text",value:ze?$()(ze).format("YYYY-MM-DD"):"",readOnly:!0})))),Be&&c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:12,tablet:12,computer:6},c.createElement(W.Z.Field,null,c.createElement("label",null,M("console:manage.features.user.profile.fields.modifiedDate")),c.createElement(Y.Z,{name:"modifiedDate",type:"text",value:Be?$()(Be).format("YYYY-MM-DD"):"",readOnly:!0})))),c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:8},!b&&c.createElement(K.Z,{"data-testid":"".concat(T,"-form-update-button"),primary:!0,type:"submit",size:"small",className:"form-button",loading:He,disabled:He},"Update")))))),c.createElement(J.Z,{hidden:!0}),function(){var e,t,n,r;return(0,a.hasRequiredScopes)(null===C||void 0===C?void 0:C.users,null===C||void 0===C||null===(e=C.users)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,k)?c.createElement(c.Fragment,null,(0,a.hasRequiredScopes)(null===C||void 0===C?void 0:C.users,null===C||void 0===C||null===(n=C.users)||void 0===n||null===(r=n.scopes)||void 0===r?void 0:r.delete,k)&&(!b||A)&&!(y.userName===P||"admin"===y.userName)&&!D.includes(y.userName)&&c.createElement(u.DangerZoneGroup,{sectionHeader:M("console:manage.features.user.editUser.dangerZoneGroup.header")},!A&&"true"===(null===Se||void 0===Se?void 0:Se.accountDisable)&&c.createElement(u.DangerZone,{"data-testid":"".concat(T,"-danger-zone"),actionTitle:M("console:manage.features.user.editUser.dangerZoneGroup.disableUserZone.actionTitle"),header:M("console:manage.features.user.editUser.dangerZoneGroup.disableUserZone.header"),subheader:M("console:manage.features.user.editUser.dangerZoneGroup.disableUserZone.subheader"),onActionClick:void 0,toggle:{checked:Ue,id:"accountDisabled",onChange:Ve}}),!A&&"true"===(null===Se||void 0===Se?void 0:Se.accountLock)&&c.createElement(u.DangerZone,{"data-testid":"".concat(T,"-danger-zone"),actionTitle:M("console:manage.features.user.editUser.dangerZoneGroup.lockUserZone.actionTitle"),header:M("console:manage.features.user.editUser.dangerZoneGroup.lockUserZone.header"),subheader:M("console:manage.features.user.editUser.dangerZoneGroup.lockUserZone.subheader"),onActionClick:void 0,toggle:{checked:Pe,id:"accountLocked",onChange:Ve}}),c.createElement(u.DangerZone,{"data-testid":"".concat(T,"-danger-zone"),actionTitle:M("console:manage.features.user.editUser.dangerZoneGroup.deleteUserZone.actionTitle"),header:M("console:manage.features.user.editUser.dangerZoneGroup.deleteUserZone.header"),subheader:ie.commonConfig.userEditSection.isGuestUser?M("extensions:manage.guest.editUser.dangerZoneGroup.deleteUserZone.subheader"):M("console:manage.features.user.editUser.dangerZoneGroup.deleteUserZone.subheader"),onActionClick:function(){Q(!0),ne(y)}}))):null}(),te&&c.createElement(u.ConfirmationModal,{"data-testid":"".concat(T,"-confirmation-modal"),onClose:function(){return Q(!1)},type:"negative",open:V,assertionHint:M("console:manage.features.user.deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:M("common:confirm"),secondaryAction:M("common:cancel"),onSecondaryActionClick:function(){Q(!1),ke(null)},onPrimaryActionClick:function(){return function(e){ie.userConfig.deleteUser(e).then((function(){v({description:M("console:manage.features.users.notifications.deleteUser.success.description"),level:s.AlertLevels.SUCCESS,message:M("console:manage.features.users.notifications.deleteUser.success.message")}),g.m8.push(g.$x.getPaths().get("USERS"))})).catch((function(e){e.response&&e.response.data&&e.response.data.description?ke({description:e.response.data.description,level:s.AlertLevels.ERROR,message:M("console:manage.features.users.notifications.deleteUser.error.message")}):ke({description:M("console:manage.features.users.notifications.deleteUser.genericError.description"),level:s.AlertLevels.ERROR,message:M("console:manage.features.users.notifications.deleteUser.genericError.message")})}))}(te)},closeOnDimmerClick:!1},c.createElement(u.ConfirmationModal.Header,{"data-testid":"".concat(T,"-confirmation-modal-header")},M("console:manage.features.user.deleteUser.confirmationModal.header")),c.createElement(u.ConfirmationModal.Message,{"data-testid":"".concat(T,"-confirmation-modal-message"),attached:!0,negative:!0},ie.commonConfig.userEditSection.isGuestUser?M("extensions:manage.guest.deleteUser.confirmationModal.message"):M("console:manage.features.user.deleteUser.confirmationModal.message")),c.createElement(u.ConfirmationModal.Content,null,c.createElement("div",{className:"modal-alert-wrapper"}," ",_e&&De),ie.commonConfig.userEditSection.isGuestUser?M("extensions:manage.guest.deleteUser.confirmationModal.content"):M("console:manage.features.user.deleteUser.confirmationModal.content"))),oe&&c.createElement(u.ConfirmationModal,{"data-testid":"".concat(T,"-confirmation-modal"),onClose:function(){ve(!1),ae(void 0)},type:"warning",open:pe,assertion:y.userName,assertionHint:oe.name===o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?M("console:manage.features.user.lockUser.confirmationModal.assertionHint"):M("console:manage.features.user.disableUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:M("common:confirm"),secondaryAction:M("common:cancel"),onSecondaryActionClick:function(){ae(void 0),ve(!1)},onPrimaryActionClick:function(){return $e(oe.name,oe.value)},closeOnDimmerClick:!1},c.createElement(u.ConfirmationModal.Header,{"data-testid":"".concat(T,"-confirmation-modal-header")},oe.name===o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?M("console:manage.features.user.lockUser.confirmationModal.header"):M("console:manage.features.user.disableUser.confirmationModal.header")),c.createElement(u.ConfirmationModal.Message,{"data-testid":"".concat(T,"-disable-confirmation-modal-message"),attached:!0,warning:!0},oe.name===o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?M("console:manage.features.user.lockUser.confirmationModal.message"):M("console:manage.features.user.disableUser.confirmationModal.message")),c.createElement(u.ConfirmationModal.Content,null,oe.name===o.ProfileConstants.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED")?M("console:manage.features.user.lockUser.confirmationModal.content"):M("console:manage.features.user.disableUser.confirmationModal.content"))),c.createElement(se,{handleForcePasswordResetTrigger:function(){return we(!0)},connectorProperties:w,handleCloseChangePasswordModal:function(){return Ee(!1)},openChangePasswordModal:he,onAlertFired:v,user:y,handleUserUpdate:S}))};ge.defaultProps={adminUserType:"None","data-testid":"user-mgt-user-profile"};var he=n(92303);function Ee(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||Se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){if(e){if("string"===typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t,n,r=e.initialValues,o=e.triggerSubmit,a=e.onSubmit,s=e.handleGroupListChange,i=e.handleTempListChange,l=e.handleInitialTempListChange,m=e.handleSetGroupId,f=(0,d.$G)().t,p=ye((0,c.useState)([]),2),v=p[0],g=p[1],h=ye((0,c.useState)(!1),2),E=h[0],y=h[1];(0,c.useEffect)((function(){g(null===r||void 0===r?void 0:r.tempGroupList)}),[null===r||void 0===r?void 0:r.tempGroupList]);var S=function(e){var t=e.split("/");return t.length>1?{labelColor:"teal",labelText:t[0].toString()}:{labelColor:"olive",labelText:"Primary"}};return c.createElement(O.Forms,{onSubmit:function(){a({groups:null===r||void 0===r?void 0:r.tempGroupList})},submitState:o},c.createElement(u.TransferComponent,{selectionComponent:!0,searchPlaceholder:f("console:manage.features.transferList.searchPlaceholder",{type:"Groups"}),handleUnelectedListSearch:function(e,t){var n=t.value,o=[];if((0,B.Z)(n))s(null===r||void 0===r?void 0:r.initialGroupList);else{var a=new RegExp((0,he.Z)(n),"i");r.initialGroupList&&r.initialGroupList.map((function(e){a.test(e.displayName)&&(o.push(e),s(o))}))}},"data-testid":"user-mgt-add-user-wizard-modal"},c.createElement(u.TransferList,{isListEmpty:!((null===r||void 0===r||null===(t=r.groupList)||void 0===t?void 0:t.length)>0),listType:"unselected",listHeaders:[f("console:manage.features.transferList.list.headers.0"),f("console:manage.features.transferList.list.headers.1"),""],handleHeaderCheckboxChange:function(){E?g([]):(g(null===r||void 0===r?void 0:r.groupList),i(null===r||void 0===r?void 0:r.groupList)),y(!E)},isHeaderCheckboxChecked:E,emptyPlaceholderContent:f("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"groups"}),"data-testid":"user-mgt-add-user-wizard-modal-unselected-groups-select-all-checkbox",emptyPlaceholderDefaultContent:f("console:manage.features.transferList.list.emptyPlaceholders.default")},null===r||void 0===r||null===(n=r.groupList)||void 0===n?void 0:n.map((function(e,t){var n,o=null===e||void 0===e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");return c.createElement(u.TransferListItem,{handleItemChange:function(){return function(e){var t,n=Ee(v);null!==n&&void 0!==n&&n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),i(n),l(n),y((null===r||void 0===r||null===(t=r.groupList)||void 0===t?void 0:t.length)===n.length)}(e)},key:t,listItem:(null===o||void 0===o?void 0:o.length)>1?o[1]:null===e||void 0===e?void 0:e.displayName,listItemId:e.id,listItemIndex:t,listItemTypeLabel:S(null===e||void 0===e?void 0:e.displayName),isItemChecked:v.includes(e),showSecondaryActions:!1,handleOpenPermissionModal:function(){return m(e.id)},"data-testid":"user-mgt-add-user-wizard-modal-unselected-groups"})})))))};function Ce(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||Re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){if(e){if("string"===typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe=function(e){var t,n,r=e.initialValues,o=e.triggerSubmit,a=e.onSubmit,s=e.handleRoleListChange,i=e.handleTempListChange,l=e.handleInitialTempListChange,m=e.handleSetRoleId,f=(0,d.$G)().t,p=we((0,c.useState)([]),2),v=p[0],g=p[1],h=we((0,c.useState)(!1),2),E=h[0],y=h[1];(0,c.useEffect)((function(){g(null===r||void 0===r?void 0:r.tempRoleList)}),[null===r||void 0===r?void 0:r.tempRoleList]);var S=function(e){var t=e.split("/");if(t.length>0)return"Application"==t[0]?{labelColor:null,labelText:"Application",name:"application-label"}:{labelColor:null,labelText:"Internal",name:"internal-label"}};return c.createElement(c.Fragment,null,c.createElement(O.Forms,{onSubmit:function(){a({roles:null===r||void 0===r?void 0:r.tempRoleList})},submitState:o},c.createElement(u.TransferComponent,{selectionComponent:!0,searchPlaceholder:f("console:manage.features.transferList.searchPlaceholder",{type:"Roles"}),handleUnelectedListSearch:function(e,t){var n=t.value,o=[];if((0,B.Z)(n))s(null===r||void 0===r?void 0:r.initialRoleList);else{var a=new RegExp((0,he.Z)(n),"i");r.initialRoleList&&r.initialRoleList.map((function(e){a.test(e.displayName)&&(o.push(e),s(o))}))}},"data-testid":"user-mgt-add-user-wizard-modal"},c.createElement(u.TransferList,{isListEmpty:!((null===r||void 0===r||null===(t=r.roleList)||void 0===t?void 0:t.length)>0),listType:"unselected",listHeaders:[f("console:manage.features.transferList.list.headers.0"),f("console:manage.features.transferList.list.headers.1"),""],handleHeaderCheckboxChange:function(){E?g([]):(g(null===r||void 0===r?void 0:r.roleList),i(null===r||void 0===r?void 0:r.roleList)),y(!E)},isHeaderCheckboxChecked:E,emptyPlaceholderContent:f("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"roles"}),"data-testid":"user-mgt-add-user-wizard-modal-unselected-roles-select-all-checkbox",emptyPlaceholderDefaultContent:f("console:manage.features.transferList.list.emptyPlaceholders.default")},null===r||void 0===r||null===(n=r.roleList)||void 0===n?void 0:n.map((function(e,t){var n,o=null===e||void 0===e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");return c.createElement(u.TransferListItem,{handleItemChange:function(){return function(e){var t,n=Ce(v);n.includes(e)?n.splice(n.indexOf(e),1):n.push(e),i(n),l(n),y((null===r||void 0===r||null===(t=r.roleList)||void 0===t?void 0:t.length)===n.length)}(e)},key:t,listItem:(null===o||void 0===o?void 0:o.length)>1?o[1]:null===e||void 0===e?void 0:e.displayName,listItemId:e.id,listItemIndex:t,listItemTypeLabel:S(null===e||void 0===e?void 0:e.displayName),isItemChecked:v.includes(e),showSecondaryActions:!0,handleOpenPermissionModal:function(){return m(e.id)},"data-testid":"user-mgt-add-user-wizard-modal-unselected-roles"})}))))))},Ie=n(24933),Ue=n(49798),Le=n(58704),Te=n(99104),Me=n(42463),Ze=n(99267);function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){if(e){if("string"===typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fe=function(e){var t=e.onAlertFired,n=e.user,r=e.handleUserUpdate,o=e.isReadOnly,a=(0,d.$G)().t,i=qe((0,c.useState)(!1),2),l=i[0],m=i[1],f=qe((0,c.useState)([]),2),v=f[0],h=f[1],E=qe((0,c.useState)([]),2),y=E[0],S=E[1],b=qe((0,c.useState)([]),2),A=b[0],C=b[1],w=qe((0,c.useState)(void 0),2),R=w[0],P=w[1],O=qe((0,c.useState)(void 0),2),I=O[0],L=O[1],T=qe((0,c.useState)(!1),2),M=T[0],Z=T[1],N=qe((0,c.useState)([]),2),_=N[0],k=N[1],D=qe((0,c.useState)(!1),2),q=D[0],x=D[1],j=qe((0,c.useState)(!1),2),F=j[0],H=j[1],G=qe((0,c.useState)([]),2),z=G[0],V=G[1];(0,c.useEffect)((function(){n&&($(),k(n.groups))}),[]),(0,c.useEffect)((function(){n&&($(),k(n.groups))}),[n]),(0,c.useEffect)((function(){n.groups&&Q()}),[n.groups&&R]),(0,c.useEffect)((function(){var e,t="Primary",r=null===n||void 0===n||null===(e=n.userName)||void 0===e?void 0:e.split("/");r.length>1&&(t=r[0]),x(!0),(0,Me.hI)(t).then((function(e){P(e.data.Resources)})).finally((function(){x(!1)}))}),[]);var $=function(){var e=new Map;n.groups&&n.groups instanceof Array?((0,Ue.Z)(n.groups,(function(t){var n,r=null===t||void 0===t||null===(n=t.display)||void 0===n?void 0:n.split("/");r[0]!==Ze.Fn&&r[0]!==Ze.eT&&e.set(t.display,t.value)})),L(e)):L(void 0)},W=function(){S(M?[]:v),Z(!M)},Q=function(){var e=R?De(R):[],t=[];(0,Ue.Z)(e,(function(e){null!==I&&void 0!==I&&I.has(e.displayName)&&t.push(e)})),S(t),V(t),h(e),C(e),Z(e.length===t.length)},ee=function(){Q(),m(!0)},te=function(){Z(!1),m(!1)},ne=function(e,t){var n=t.value,r=[];if((0,B.Z)(n))h(A);else{var o=new RegExp((0,he.Z)(n),"i");v&&v.map((function(e){o.test(e.displayName)&&(r.push(e),h(r))}))}},re=function(e){var t=null===e||void 0===e?void 0:e.split("/"),n={labelColor:"olive",labelText:Ze.$R};return t[0]!==Ze.Fn&&t[0]!==Ze.eT&&(null===t||void 0===t?void 0:t.length)>1&&(n=_e(_e({},n),{},{labelText:t[0]})),n},oe=function(e){var t,n=null===(t=e)||void 0===t?void 0:t.split("/");return 1!==(null===n||void 0===n?void 0:n.length)&&(e=n[1]),e};return c.createElement(c.Fragment,null,c.createElement(u.Heading,{as:"h4"},a("console:manage.features.user.updateUser.groups.editGroups.heading")),c.createElement(u.Heading,{subHeading:!0,ellipsis:!0,as:"h6"},a("console:manage.features.user.updateUser.groups.editGroups.subHeading")),c.createElement(J.Z,{hidden:!0}),c.createElement(U.Z,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{computer:8},(null===I||void 0===I?void 0:I.size)>0?c.createElement(u.EmphasizedSegment,{"data-testid":"user-mgt-groups-list",className:"user-role-edit-header-segment"},c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,null,c.createElement(Y.Z,{"data-testid":"user-mgt-groups-list-search-input",icon:c.createElement(p.Z,{name:"search"}),onChange:function(e,t){var r=t.value,o=[];if((0,B.Z)(r))k(n.groups);else{var a=new RegExp((0,he.Z)(r),"i");_&&(null===_||void 0===_||_.map((function(e){var t;1===(null===e||void 0===e||null===(t=e.display)||void 0===t?void 0:t.split("/")).length&&a.test(e.display)&&(o.push(e),k(o))})))}},placeholder:a("console:manage.features.user.updateUser.groups.editGroups.searchPlaceholder"),floated:"left",size:"small"}),!o&&c.createElement(K.Z,{"data-testid":"user-mgt-groups-list-update-button",size:"medium",icon:"pencil",floated:"right",onClick:ee}))),c.createElement(U.Z.Row,null,c.createElement(Le.Z,{singleLine:!0,compact:!0},c.createElement(Le.Z.Header,null,c.createElement(Le.Z.Row,null,c.createElement(Le.Z.HeaderCell,null,c.createElement("strong",null,a("console:manage.features.user.updateUser.groups.editGroups.groupList.headers.0"))),c.createElement(Le.Z.HeaderCell,null,c.createElement("strong",null,a("console:manage.features.user.updateUser.groups.editGroups.groupList.headers.1"))))),c.createElement(Le.Z.Body,null,null===_||void 0===_?void 0:_.map((function(e,t){var n,r=null===e||void 0===e||null===(n=e.display)||void 0===n?void 0:n.split("/");if(r[0]!==Ze.Fn&&r[0]!==Ze.eT)return c.createElement(Le.Z.Row,{key:t},c.createElement(Le.Z.Cell,null,1===(null===r||void 0===r?void 0:r.length)?c.createElement(Te.Z,{color:"olive"},Ze.$R):c.createElement(Te.Z,{color:"olive"},r[0])),c.createElement(Le.Z.Cell,null,1===(null===r||void 0===r?void 0:r.length)?null===e||void 0===e?void 0:e.display:r[1]))})))))):c.createElement(u.EmphasizedSegment,null,c.createElement(u.EmptyPlaceholder,{"data-testid":"user-mgt-empty-groups-list",title:a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.title"),subtitle:[a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.subTitle.0"),a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.subTitle.1"),a("console:manage.features.user.updateUser.groups.editGroups.groupList.emptyListPlaceholder.subTitle.2")],action:!o&&c.createElement(u.PrimaryButton,{"data-testid":"user-mgt-empty-groups-list-assign-group-button",onClick:ee},c.createElement(p.Z,{name:"plus"}),"Assign Group"),image:(0,g.jF)().emptyList,imageSize:"tiny"}))))),c.createElement(X.Z,{"data-testid":"user-mgt-update-groups-modal",open:l,size:"small",className:"user-roles"},c.createElement(X.Z.Header,null,a("console:manage.features.user.updateUser.groups.addGroupsModal.heading"),c.createElement(u.Heading,{subHeading:!0,ellipsis:!0,as:"h6"},a("console:manage.features.user.updateUser.groups.addGroupsModal.subHeading"))),c.createElement(X.Z.Content,{image:!0},q?c.createElement(u.ContentLoader,null):c.createElement(u.TransferComponent,{selectionComponent:!0,searchPlaceholder:a("console:manage.features.transferList.searchPlaceholder",{type:"Groups"}),handleUnelectedListSearch:ne,"data-testid":"user-mgt-update-groups-modal"},c.createElement(u.TransferList,{isListEmpty:!(v.length>0),listType:"unselected",listHeaders:[a("console:manage.features.transferList.list.headers.0"),a("console:manage.features.transferList.list.headers.1")],handleHeaderCheckboxChange:W,isHeaderCheckboxChecked:M,emptyPlaceholderContent:a("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"groups"}),"data-testid":"user-mgt-update-groups-modal-unselected-groups-select-all-checkbox",emptyPlaceholderDefaultContent:a("console:manage.features.transferList.list.emptyPlaceholders.default")},null===v||void 0===v?void 0:v.map((function(e,t){return c.createElement(u.TransferListItem,{handleItemChange:function(){return function(e){var t=De(y);null!==t&&void 0!==t&&t.includes(e)?(t.splice(t.indexOf(e),1),S(t)):(t.push(e),S(t)),Z(t.length===v.length)}(e)},key:t,listItem:oe(null===e||void 0===e?void 0:e.displayName),listItemId:null===e||void 0===e?void 0:e.id,listItemIndex:t,listItemTypeLabel:re(null===e||void 0===e?void 0:e.displayName),isItemChecked:y.includes(e),showSecondaryActions:!1,"data-testid":"user-mgt-update-groups-modal-unselected-groups"})}))))),c.createElement(X.Z.Actions,null,c.createElement(U.Z,null,c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(u.LinkButton,{"data-testid":"user-mgt-update-groups-modal-cancel-button",floated:"left",onClick:te},a("common:cancel"))),c.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(u.PrimaryButton,{"data-testid":"user-mgt-update-groups-modal-save-button",floated:"right",loading:F,disabled:F,onClick:function(){return function(e,n){var o=[];n.map((function(e){o.push(e.id)}));var i={Operations:[],schemas:["urn:ietf:params:scim:api:messages:2.0:BulkRequest"]},l={data:{Operations:[{op:"remove",path:"members[display eq "+e.userName+"]"}]},method:"PATCH"},u={data:{Operations:[{op:"add",value:{members:[{display:e.userName,value:e.id}]}}]},method:"PATCH"},c=[],d=[],m=[];I&&(m=De(I.values())),(null===o||void 0===o?void 0:o.length)>0&&o.map((function(e){var t;null!==(t=m)&&void 0!==t&&t.includes(e)&&m.splice(m.indexOf(e),1)})),m&&m.length>0&&(m.map((function(e){l=_e(_e({},l),{path:"/Groups/"+e}),c.push(l)})),c.map((function(e){i.Operations.push(e)}))),o&&(null===o||void 0===o?void 0:o.length)>0&&(o.map((function(e){z.find((function(t){return t.id===e}))||(u=_e(_e({},u),{path:"/Groups/"+e}),d.push(u))})),d.map((function(e){i.Operations.push(e)}))),H(!0),(0,g.fU)(i).then((function(){t({description:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.success.description"),level:s.AlertLevels.SUCCESS,message:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.success.message")}),te(),r(e.id)})).catch((function(e){var n,r,o,i,l,u;404!==(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null!==e&&void 0!==e&&e.response&&null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&r.data&&null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(i=o.data)&&void 0!==i&&i.description?t({description:null===(l=e.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.description,level:s.AlertLevels.ERROR,message:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.error.message")}):t({description:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.genericError.description"),level:s.AlertLevels.ERROR,message:a("console:manage.features.user.updateUser.groups.notifications.updateUserGroups.genericError.message")}))})).finally((function(){H(!1)}))}(n,y)}},a("common:save"))))))))},He=n(7626),Ge=n(86791),ze=n(25479),Be=n(6586),Ve=n(75153),$e=n(26264);function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=function(e){var t=e.roleId,n=e.handleNavigateBack,r=e.handleViewNextButton,o=e["data-testid"],a=(0,d.$G)().t,s=We((0,c.useState)(!1),2),i=s[0],l=s[1],m=We((0,c.useState)(),2),f=m[0],v=m[1];return(0,c.useEffect)((function(){t&&(t&&(0,$e.xQ)(t).then((function(e){l(!1),v(e.data)})),r(!1))}),[t]),(0,c.useEffect)((function(){f&&l(!0)}),[f]),i&&c.createElement(c.Fragment,null,c.createElement(u.Heading,{as:"h5"},a("console:manage.features.user.updateUser.roles.viewPermissionModal.heading",{role:f.displayName})),c.createElement(J.Z,{hidden:!0}),c.createElement(u.LinkButton,{"data-testid":"".concat(o,"_back_button"),floated:"left",onClick:n},c.createElement(p.Z,{name:"arrow left"}),a("console:manage.features.user.updateUser.roles.viewPermissionModal.backButton")),c.createElement(J.Z,{hidden:!0}),c.createElement(J.Z,{hidden:!0}),c.createElement(Ve.Z,{"data-testid":o},c.createElement("div",{className:"permissions-edit-container"},c.createElement($e.wB,{emphasize:!1,isReadOnly:!0,isEdit:!1,isRole:!0,roleObject:f}))))};function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nt,rt=function(e){var t=e.summary,n=e.triggerSubmit,r=e.onSubmit,o=e.onProfileImageChange,a=(0,d.$G)().t,s=et((0,c.useState)(t),2),i=s[0],l=s[1],m=et((0,c.useState)(!1),2),f=m[0],p=m[1];(0,c.useEffect)((function(){n&&r(i)}),[n]);return c.createElement(U.Z,{className:"wizard-summary"},c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},c.createElement("div",{className:"general-details"},c.createElement(u.UserAvatar,{editable:!0,name:null===i||void 0===i?void 0:i.firstName,image:null===i||void 0===i?void 0:i.profileUrl,onEditIconClick:function(){return p(!0)},onClick:function(){return p(!0)},size:"tiny"}),(null===i||void 0===i?void 0:i.firstName)&&c.createElement(u.Heading,{size:"small",className:"name"},i.firstName),(null===i||void 0===i?void 0:i.email)&&c.createElement("div",{className:"description"},i.email)))),(null===i||void 0===i?void 0:i.firstName)&&c.createElement(U.Z.Row,{className:"summary-field",columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},c.createElement("div",{className:"label"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.name"))),c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},c.createElement("div",{className:"value url"},i.firstName+" "+i.lastName))),null!==i&&void 0!==i&&i.groups&&i.groups instanceof Array&&i.groups.length>0?c.createElement(U.Z.Row,{className:"summary-field",columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},c.createElement("div",{className:"label"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.groups"))),c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},c.createElement(Te.Z.Group,null,i.groups.map((function(e,t){return c.createElement(Te.Z,{key:t,basic:!0,circular:!0},e.displayName)}))))):null,null!==i&&void 0!==i&&i.roles&&i.roles instanceof Array&&i.roles.length>0?c.createElement(U.Z.Row,{className:"summary-field",columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},c.createElement("div",{className:"label"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.roles"))),c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},c.createElement(Te.Z.Group,null,i.roles.map((function(e,t){return c.createElement(Te.Z,{key:t,basic:!0,circular:!0},e.displayName)}))))):null,(null===i||void 0===i?void 0:i.userName)&&c.createElement(U.Z.Row,{className:"summary-field",columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},c.createElement("div",{className:"label"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.username"))),c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},c.createElement("div",{className:"value url"},i.userName))),(null===i||void 0===i?void 0:i.domain)&&c.createElement(U.Z.Row,{className:"summary-field",columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},c.createElement("div",{className:"label"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.domain"))),c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},c.createElement("div",{className:"value url"},i.domain))),null!==i&&void 0!==i&&i.email&&null!==i&&void 0!==i&&i.passwordOption&&"ask-password"===(null===i||void 0===i?void 0:i.passwordOption)?c.createElement(U.Z.Row,{className:"summary-field",columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},c.createElement("div",{className:"label"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.passwordOption.label"))),c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},c.createElement("div",{className:"value url"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.passwordOption.message.0",{email:i.email})))):c.createElement(U.Z.Row,{className:"summary-field",columns:2},c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},c.createElement("div",{className:"label"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.passwordOption.label"))),c.createElement(U.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},c.createElement("div",{className:"value url"},a("console:manage.features.user.modals.addUserWizard.wizardSummary.passwordOption.message.1")))),f&&c.createElement(u.EditAvatarModal,{open:f,closeOnDimmerClick:!1,name:null===i||void 0===i?void 0:i.firstName,emails:[null===i||void 0===i?void 0:i.email],onClose:function(){return p(!1)},onCancel:function(){return p(!1)},onSubmit:function(e,t){l(Qe(Qe({},i),{},{profileUrl:t})),o(t),p(!1)},heading:a("console:common.modals.editAvatarModal.heading"),submitButtonText:a("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:a("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:a("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.content"),header:a("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:a("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:a("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:a("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:a("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:a("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}}}))},ot=n(73881),at=n(97763),st=n(50714),it=n(58107),lt=n(29850),ut=n(65841),ct=n(48185);function dt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ht(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){if(e){if("string"===typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}!function(e){e.BASIC_DETAILS="BasicDetails",e.ROLE_LIST="RoleList",e.GROUP_LIST="GroupList",e.SUMMARY="summary"}(nt||(nt={}));var yt=function(e){var t,n,r,o=e.closeWizard,a=e.currentStep,l=e.emailVerificationEnabled,f=e["data-testid"],g=(0,d.$G)().t,E=(0,m.I0)(),y=gt((0,O.useTrigger)(),2),S=y[0],b=y[1],A=gt((0,O.useTrigger)(),2),C=A[0],w=A[1],R=gt((0,O.useTrigger)(),2),P=R[0],I=R[1],L=gt((0,O.useTrigger)(),2),T=L[0],M=L[1],N=gt((0,c.useState)(void 0),2),_=N[0],k=N[1],D=gt((0,c.useState)(a),2),q=D[0],x=D[1],j=gt((0,c.useState)(void 0),2),F=j[0],H=j[1],G=gt((0,c.useState)([]),2),B=G[0],V=G[1],$=gt((0,c.useState)([]),2),W=$[0],Y=$[1],K=gt((0,c.useState)([]),2),J=K[0],Q=K[1],ee=gt((0,c.useState)([]),2),te=ee[0],ne=ee[1],re=gt((0,c.useState)([]),2),oe=re[0],ae=re[1],se=gt((0,c.useState)([]),2),ie=se[0],le=se[1],ue=gt((0,c.useState)([]),2),ce=ue[0],de=ue[1],me=gt((0,c.useState)([]),2),fe=me[0],pe=me[1],ve=gt((0,c.useState)(!1),2),ge=ve[0],he=ve[1],Ee=gt((0,c.useState)(),2),ye=Ee[0],Se=Ee[1],be=gt((0,c.useState)(!1),2),Ce=be[0],we=be[1],Re=gt((0,c.useState)(!1),2),Pe=Re[0],Ie=Re[1],Ue=gt((0,c.useState)(!0),2),Le=Ue[0],Te=Ue[1],Ze=(0,m.v9)((function(e){return e.organization.organization})),Ne=(0,c.useMemo)((function(){return Z.F.isRootOrganization(Ze)}),[Ze]),_e=gt((0,u.useWizardAlert)(),3),ke=_e[0],De=_e[1],qe=_e[2];(0,c.useEffect)((function(){3!=q&&he(!1),Te(!0)}),[q]),(0,c.useEffect)((function(){ye&&Ce&&he(!0)}),[Ce]),(0,c.useEffect)((function(){0===J.length&&(Ne?(0,lt.Sd)(null).then((function(e){V(e.data.Resources),Q(e.data.Resources)})):(0,st.Sr)(Ze.id,null,100,null).then((function(e){if(e.Resources){var t=e.Resources.filter((function(e){return e.displayName!==it.Rw.ORG_CREATOR_ROLE_NAME}));V(t),Q(t)}})))}),[]),(0,c.useEffect)((function(){void 0!==_&&(x(q-1),k(void 0))}),[_]),(0,c.useEffect)((function(){var e,t;F&&null!==(e=F[nt.BASIC_DETAILS])&&void 0!==e&&e.domain&&xe(F&&(null===(t=F[nt.BASIC_DETAILS])||void 0===t?void 0:t.domain))}),[F&&(null===(t=F[nt.BASIC_DETAILS])||void 0===t?void 0:t.domain)]);var xe=function(e){(0,Me.hI)(e).then((function(e){ae(e.data.Resources),de(e.data.Resources)}))},je=function(){switch(q){case 0:b();break;case 1:I();break;case 2:Z.F.isCurrentOrganizationRoot()?w():M();break;case 3:M()}},Fe=function(e){var t,n="";n="primary"!==e.domain?e.domain+"/"+e.userName:e.userName;var r=(0,ct.N)(),a=e.newPassword;e.passwordOption&&"ask-password"!==e.passwordOption?r={emails:[{primary:!0,value:e.email}],name:{familyName:e.lastName,givenName:e.firstName},password:a,profileUrl:e.profileUrl,userName:n}:(pt(t={emails:[{primary:!0,value:e.email}],name:{familyName:e.lastName,givenName:e.firstName},password:e.newPassword,profileUrl:e.profileUrl},v.SCIMConfigs.scim.enterpriseSchema,{askPassword:"true"}),pt(t,"userName",n),r=t),Ie(!0),(0,h.cn)(r).then((function(e){var t,n;E((0,i.addAlert)({description:g("console:manage.features.users.notifications.addUser.success.description"),level:s.AlertLevels.SUCCESS,message:g("console:manage.features.users.notifications.addUser.success.message")})),null!==F&&void 0!==F&&null!==(t=F.RoleList)&&void 0!==t&&t.roles&&null!==F&&void 0!==F&&null!==(n=F.GroupList)&&void 0!==n&&n.groups&&function(e,t,n){var r=[],o=[],a={Operations:[{op:"add",value:{users:[{display:e.userName,value:e.id}]}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]},i={Operations:[{op:"add",value:{members:[{display:e.userName,value:e.id}]}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};if(t.length>0){t.map((function(e){r.push(e.id)}));var l,u=vt(r);try{for(u.s();!(l=u.n()).done;){var c=l.value;(0,lt.dB)(c,a).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data&&e.response.data.detail?De({description:g("console:manage.features.users.notifications.addUser.error.description",{description:e.response.data.detail}),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.error.message")}):De({description:g("console:manage.features.users.notifications.addUser.genericError.description"),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.genericError.message")}):De({description:g("console:manage.features.users.notifications.addUser.error.description"),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.error.message")})}))}}catch(e){u.e(e)}finally{u.f()}}if(n.length>0){n.map((function(e){o.push(e.id)}));var d,m=vt(o);try{for(m.s();!(d=m.n()).done;){var f=d.value;(0,Me.fF)(f,i).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data&&e.response.data.detail?De({description:g("console:manage.features.users.notifications.addUser.error.description",{description:e.response.data.detail}),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.error.message")}):De({description:g("console:manage.features.users.notifications.addUser.genericError.description"),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.genericError.message")}):De({description:g("console:manage.features.users.notifications.addUser.error.description"),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.error.message")})}))}}catch(e){m.e(e)}finally{m.f()}}}(e.data,F.RoleList.roles,F.GroupList.groups),o(),at.m.push(ot.$x.getPaths().get("USER_EDIT").replace(":id",e.data.id))})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data&&e.response.data.detail?(o(),E((0,i.addAlert)({description:g("console:manage.features.users.notifications.addUser.error.description",{description:e.response.data.detail}),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.error.message")}))):(o(),E((0,i.addAlert)({description:g("console:manage.features.users.notifications.addUser.genericError.description"),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.genericError.message")}))):(o(),E((0,i.addAlert)({description:g("console:manage.features.users.notifications.addUser.error.description"),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.notifications.addUser.error.message")})))})).finally((function(){Ie(!1)}))},He=function(e,t){x(q+1),H(ft(ft({},F),{},pt({},t,e)))},Ge=[{content:c.createElement(z,{triggerSubmit:S,initialValues:F&&F[nt.BASIC_DETAILS],emailVerificationEnabled:l,onSubmit:function(e){return He(e,nt.BASIC_DETAILS)}}),icon:(0,ut.JP)().general,title:g("console:manage.features.user.modals.addUserWizard.steps.basicDetails")},{content:c.createElement(Ae,{triggerSubmit:P,onSubmit:function(e){return He(e,nt.GROUP_LIST)},initialValues:{groupList:oe,initialGroupList:ce,initialTempGroupList:fe,tempGroupList:ie},handleGroupListChange:function(e){return function(e){ae(e)}(e)},handleTempListChange:function(e){le(e)},handleInitialTempListChange:function(e){pe(e)},handleInitialGroupListChange:function(e){return function(e){de(e)}(e)},handleSetGroupId:null}),icon:(0,ut.JP)().groups,title:g("console:manage.features.user.modals.addUserWizard.steps.groups")},{content:ge?c.createElement(Ke,{"data-testid":"".concat(f,"-role-permission"),handleNavigateBack:function(){he(!ge),we(!1)},handleViewNextButton:function(e){Te(e)},roleId:ye}):c.createElement(Oe,{triggerSubmit:C,onSubmit:function(e){return He(e,nt.ROLE_LIST)},initialValues:{initialRoleList:J,initialTempRoleList:te,roleList:B,tempRoleList:W},handleRoleListChange:function(e){return function(e){V(e)}(e)},handleTempListChange:function(e){Y(e)},handleInitialTempListChange:function(e){ne(e)},handleInitialRoleListChange:function(e){return function(e){Q(e)}(e)},handleSetRoleId:function(e){return function(e){Se(e),we(!0)}(e)}}),icon:(0,ut.JP)().roles,title:g("console:manage.features.user.modals.addUserWizard.steps.roles")},{content:c.createElement(rt,{triggerSubmit:T,onSubmit:function(e){Fe(e)},summary:function(){if(F){for(var e=ft({},F),t={},n=0,r=Object.values(e);n<r.length;n++){var o=r[n];t=ft(ft({},t),o)}return(0,Be.Z)((0,ze.Z)(t))}}(),onProfileImageChange:function(e){H(ft(ft({},F),{},pt({},nt.BASIC_DETAILS,ft(ft({},F[nt.BASIC_DETAILS]),{},{profileUrl:e}))))}}),icon:(0,ut.JP)().summary,title:g("console:manage.features.user.modals.addUserWizard.steps.summary")}],Ve=Z.F.isCurrentOrganizationRoot()?[].concat(Ge):[].concat(dt(Ge.slice(0,2)),dt(Ge.slice(3)));return c.createElement(X.Z,{"data-testid":f,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:o,closeOnDimmerClick:!1,closeOnEscape:!0},c.createElement(X.Z.Header,{className:"wizard-header"},g("console:manage.features.user.modals.addUserWizard.title"),F&&null!==(n=F[nt.BASIC_DETAILS])&&void 0!==n&&n.firstName?" - "+(null===(r=F[nt.BASIC_DETAILS])||void 0===r?void 0:r.firstName):"",c.createElement(u.Heading,{as:"h6"},g("console:manage.features.user.modals.addUserWizard.subTitle"))),c.createElement(X.Z.Content,{className:"steps-container"},c.createElement(u.Steps.Group,{current:q},Ve.map((function(e,t){return c.createElement(u.Steps.Step,{key:t,icon:e.icon,title:e.title})})))),c.createElement(X.Z.Content,{className:"content-container",scrolling:!0},ke&&qe,Ve[q].content),c.createElement(X.Z.Actions,null,c.createElement(U.Z,null,c.createElement(U.Z.Row,{column:1},c.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(u.LinkButton,{"data-testid":"".concat(f,"-cancel-button"),floated:"left",onClick:function(){return o()}},g("common:cancel"))),c.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},q<Ve.length-1&&Le&&c.createElement(u.PrimaryButton,{"data-testid":"".concat(f,"-next-button"),floated:"right",onClick:je},g("console:manage.features.user.modals.addUserWizard.buttons.next"),c.createElement(p.Z,{name:"arrow right"})),q===Ve.length-1&&c.createElement(u.PrimaryButton,{"data-testid":"".concat(f,"-finish-button"),floated:"right",onClick:je,loading:Pe,disabled:Pe},"Finish"),q>0&&c.createElement(u.LinkButton,{"data-testid":"".concat(f,"-previous-button"),floated:"right",onClick:function(){k(q)}},c.createElement(p.Z,{name:"arrow left"}),g("console:manage.features.user.modals.addUserWizard.buttons.previous")))))))};function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||Rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){if(e){if("string"===typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}yt.defaultProps={currentStep:0,emailVerificationEnabled:!1};var Ot=function(e){var t=e.onAlertFired,n=e.user,r=e.handleUserUpdate,o=e.isReadOnly,a=e.isGroupAndRoleSeparationEnabled,i=e.showDomain,l=e.permissionsToHide,f=e.hideApplicationRoles,v=(0,d.$G)().t,h=wt((0,c.useState)(!1),2),E=h[0],y=h[1],S=wt((0,c.useState)([]),2),b=S[0],A=S[1],C=wt((0,c.useState)([]),2),w=C[0],R=C[1],P=wt((0,c.useState)([]),2),O=P[0],I=P[1],L=wt((0,c.useState)(void 0),2),T=L[0],M=L[1],N=wt((0,c.useState)(void 0),2),_=N[0],k=N[1],D=wt((0,c.useState)(!1),2),q=D[0],x=D[1],j=wt((0,c.useState)(!1),2),F=j[0],H=j[1],G=wt((0,c.useState)(""),2),z=G[0],V=G[1],$=wt((0,c.useState)(!1),2),W=$[0],Q=$[1],ee=wt((0,c.useState)(!1),2),te=ee[0],ne=ee[1],re=wt((0,c.useState)(),2),oe=re[0],ae=re[1],se=wt((0,c.useState)(!1),2),ie=se[0],le=se[1],ue=wt((0,c.useState)(!1),2),ce=ue[0],de=ue[1],me=wt((0,c.useState)([]),2),fe=me[0],pe=me[1],ve=wt((0,c.useState)([]),2),ge=ve[0],Ee=ve[1],ye=wt((0,c.useState)(!1),2),Se=ye[0],be=ye[1],Ae=(0,m.v9)((function(e){return e.organization.organization})),Ce=(0,c.useMemo)((function(){return Z.F.isRootOrganization(Ae)}),[Ae]);(0,c.useEffect)((function(){z&&W&&qe()}),[W]),(0,c.useEffect)((function(){oe&&ie&&ne(!0)}),[ie]),(0,c.useEffect)((function(){pe(ge)}),[ge]),(0,c.useEffect)((function(){if(n){if(!f)return Ee(n.roles),Pe(),void we();Ee(n.roles.filter((function(e){var t,n;return 2!==(null===(t=e.display)||void 0===t?void 0:t.split("/").length)&&"Application"!==(null===(n=e.display)||void 0===n?void 0:n.split("/")[0])}))),Pe(),we()}}),[n]),(0,c.useEffect)((function(){n&&Re()}),[n.roles&&T]),(0,c.useEffect)((function(){de(!0),Ce?(0,$e.Sd)(null).then((function(e){var t=e.data.Resources;f&&t&&t instanceof Array&&(e.data.Resources=t.filter((function(e){var t;return(null===(t=e.displayName)||void 0===t||!t.includes($e.Fn))&&e}))),M(e.data.Resources)})).finally((function(){de(!1)})):(0,st.Sr)(Ae.id,null,100,null).then((function(e){var t=e.Resources;f&&t&&t instanceof Array&&(e.Resources=t.filter((function(e){var t;return(null===(t=e.displayName)||void 0===t||!t.includes($e.Fn))&&e}))),M(e.Resources)})).finally((function(){de(!1)}))}),[]);var we=function(){if(a)pe(f?ge:null===n||void 0===n?void 0:n.roles);else{var e,t=[];null===n||void 0===n||null===(e=n.groups)||void 0===e||e.map((function(e){var n,r=null===e||void 0===e||null===(n=e.display)||void 0===n?void 0:n.split("/");if((null===r||void 0===r?void 0:r.length)>1&&(r[0]==$e.Fn||r[0]==$e.eT)){if(f&&"Application"===e[0]&&2===e.length)return;t.push(e)}})),Ee(t),pe(t)}},Re=function(){var e=T?Ct(T):[],t=[];if(e&&_){var n=Array.from(null===_||void 0===_?void 0:_.values());(0,Ue.Z)(e,(function(e){null!==n&&void 0!==n&&n.includes(e.id)&&t.push(e)}))}R(t),A(e),I(e),x(e.length===t.length)},Pe=function(){var e=new Map;if(a)n.roles&&n.roles instanceof Array&&((0,Ue.Z)(n.roles,(function(t){var n,r=null===t||void 0===t||null===(n=t.display)||void 0===n?void 0:n.split("/");if((null===r||void 0===r?void 0:r.length)>=1&&null!==t&&void 0!==t&&t.value){if(f&&"Application"===r[0]&&2===r.length)return;e.set(null===t||void 0===t?void 0:t.display,null===t||void 0===t?void 0:t.value)}})),k(e));else{var t=new Map;n.groups&&n.groups instanceof Array&&((0,Ue.Z)(n.groups,(function(e){var n,r=null===e||void 0===e||null===(n=e.display)||void 0===n?void 0:n.split("/");if((null===r||void 0===r?void 0:r.length)>=1){if(f&&"Application"===e[0]&&2===e.length)return;null===t||void 0===t||t.set(e.display,e.value)}})),k(t))}},Oe=function(e,n){var o,a=[];n.map((function(e){a.push(e.id)}));var i={Operations:[],failOnErrors:1,schemas:["urn:ietf:params:scim:api:messages:2.0:BulkRequest"]},l={data:{Operations:[{op:"remove",path:"users[value eq "+e.id+"]"}],schemas:["urn:ietf:params:scim:schemas:core:2.0:Role"]},method:"PATCH"},u={data:{Operations:[{op:"add",value:{users:[{value:e.id}]}}],schemas:["urn:ietf:params:scim:schemas:core:2.0:Role"]},method:"PATCH"},c=[],d=[],m=[],f=[];_&&(m=Ct(_.values())),(null===a||void 0===a?void 0:a.length)>0&&a.map((function(e){var t;null!==(t=m)&&void 0!==t&&t.includes(e)?m.splice(m.indexOf(e),1):f.push(e)})),m&&(null===(o=m)||void 0===o?void 0:o.length)>0&&(m.map((function(e){l=bt(bt({},l),{path:"/Roles/"+e}),c.push(l)})),c.map((function(e){i.Operations.push(e)}))),f&&(null===f||void 0===f?void 0:f.length)>0&&(f.map((function(e){u=bt(bt({},u),{path:"/Roles/"+e}),d.push(u)})),d.map((function(e){i.Operations.push(e)}))),be(!0),(0,g.fU)(i).then((function(){t({description:v("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.success.description"),level:s.AlertLevels.SUCCESS,message:v("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.success.message")}),y(!1),r(e.id)})).catch((function(e){var n,r,o,a,i,l;404!==(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null!==e&&void 0!==e&&e.response&&null!==e&&void 0!==e&&null!==(r=e.response)&&void 0!==r&&r.data&&null!==e&&void 0!==e&&null!==(o=e.response)&&void 0!==o&&null!==(a=o.data)&&void 0!==a&&a.description?t({description:null===(i=e.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.description,level:s.AlertLevels.ERROR,message:v("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.error.message")}):t({description:v("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.genericError.description"),level:s.AlertLevels.ERROR,message:v("console:manage.features.user.updateUser.roles.notifications.updateUserRoles.genericError.message")}))})).finally((function(){be(!1)}))},Ie=function(e,t){var n=t.value,r=!1,o=[];if((0,B.Z)(n))A(O);else{var a=new RegExp((0,he.Z)(n),"i");b&&b.map((function(e){r=a.test(e.displayName),!i&&e.displayName.split("/").length>1&&(r=a.test(e.displayName.split("/")[1])),r&&(o.push(e),A(o))}))}},Me=function(){R(q?[]:b),x(!q)},Ze=function(){Re(),y(!0)},Ne=function(){x(!1),y(!1)},_e=function(e){var t=null===e||void 0===e?void 0:e.split("/");if((null===t||void 0===t?void 0:t.length)>0)return"Application"==t[0]?{labelColor:null,labelText:"Application",name:"application-label"}:{labelColor:null,labelText:"Internal",name:"internal-label"}},ke=function(){ne(!te),le(!1)},De=function(){H(!1),Q(!1)},qe=function(){H(!0)};return c.createElement(c.Fragment,null,c.createElement(u.Heading,{as:"h4"},v("console:manage.features.user.updateUser.roles.editRoles.heading")),c.createElement(u.Heading,{subHeading:!0,ellipsis:!0,as:"h6"},v("console:manage.features.user.updateUser.roles.editRoles.subHeading")),c.createElement(J.Z,{hidden:!0}),c.createElement(U.Z,null,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{computer:10,tablet:16,mobile:16},!ce&&(null===_||void 0===_?void 0:_.size)>0?c.createElement(u.EmphasizedSegment,{clearing:!0,"data-testid":"user-mgt-roles-list",className:"user-role-edit-header-segment"},c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,null,c.createElement(Y.Z,{"data-testid":"user-mgt-roles-list-search-input",icon:c.createElement(p.Z,{name:"search"}),onChange:function(e,t){var n=t.value,r=!1,o=[];if((0,B.Z)(n))pe(ge);else{var a=new RegExp((0,he.Z)(n),"i");fe&&(null===fe||void 0===fe||fe.map((function(e){var t,n=null===e||void 0===e||null===(t=e.display)||void 0===t?void 0:t.split("/");(null===n||void 0===n?void 0:n.length)>=1&&(r=a.test(e.display),!i&&(null===n||void 0===n?void 0:n.length)>1&&(r=a.test(n[1])),r&&(o.push(e),pe(o)))})))}},placeholder:v("console:manage.features.user.updateUser.roles.editRoles.searchPlaceholder"),floated:"left",size:"small"}),!o&&c.createElement(K.Z,{"data-testid":"user-mgt-roles-list-update-button",size:"medium",icon:"pencil",floated:"right",onClick:Ze}))),c.createElement(U.Z.Row,null,c.createElement(Le.Z,{singleLine:!0,compact:!0},c.createElement(Le.Z.Header,null,c.createElement(Le.Z.Row,null,i&&c.createElement(Le.Z.HeaderCell,null,c.createElement("strong",null,v("console:manage.features.user.updateUser.roles.editRoles.roleList.headers.0"))),c.createElement(Le.Z.HeaderCell,null,c.createElement("strong",null,v("console:manage.features.user.updateUser.roles.editRoles.roleList.headers.1"))),c.createElement(Le.Z.HeaderCell,null))),c.createElement(Le.Z.Body,null,null===fe||void 0===fe?void 0:fe.map((function(e){var t,n=null===e||void 0===e||null===(t=e.display)||void 0===t?void 0:t.split("/");if((null===n||void 0===n?void 0:n.length)>=1&&null!==e&&void 0!==e&&e.value)return c.createElement(Le.Z.Row,null,i&&("Application"==n[0]?c.createElement(Le.Z.Cell,null,c.createElement(Te.Z,{className:"application-label"},$e.Fn)):c.createElement(Le.Z.Cell,null,c.createElement(Te.Z,{className:"internal-label"},$e.eT))),c.createElement(Le.Z.Cell,{width:8},1==(null===n||void 0===n?void 0:n.length)?n[0]:n[1]),c.createElement(Le.Z.Cell,{textAlign:"right"},c.createElement(He.Z,{content:"View permissions",position:"top right",trigger:c.createElement(p.Z,{"data-testid":"user-mgt-roles-list-\n                                                                                        ".concat(n[1],"-\n                                                                                        permissions-button"),color:"grey",className:"mr-2",name:"key",onClick:function(){return function(e){V(e),Q(!0)}(e.value)}})})))})))))):0===(null===_||void 0===_?void 0:_.size)?c.createElement(u.EmphasizedSegment,null,c.createElement(u.EmptyPlaceholder,{"data-testid":"user-mgt-user-empty-roles-list",title:v("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.title"),subtitle:[v("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.subTitle.0"),v("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.subTitle.1"),v("console:manage.features.user.updateUser.roles.editRoles.roleList.emptyListPlaceholder.subTitle.2")],action:!o&&c.createElement(u.PrimaryButton,{"data-testid":"user-mgt-user-empty-roles-list-assign-group-button",onClick:Ze},c.createElement(p.Z,{name:"plus"}),"Assign Role"),image:(0,g.jF)().emptyList,imageSize:"tiny"})):c.createElement(u.ContentLoader,null))),c.createElement(Ge.r,{"data-testid":"user-mgt-roles-list-roles-permission-modal",openRolePermissionModal:F,handleCloseRolePermissionModal:De,roleId:z,permissionsToHide:l}),c.createElement(X.Z,{"data-testid":"user-mgt-update-roles-modal",open:E,size:"small",className:"user-roles"},c.createElement(X.Z.Header,null,v("console:manage.features.user.updateUser.roles.addRolesModal.heading"),c.createElement(u.Heading,{subHeading:!0,ellipsis:!0,as:"h6"},v("console:manage.features.user.updateUser.roles.addRolesModal.subHeading"))),te?c.createElement(c.Fragment,null,c.createElement(X.Z.Content,null,c.createElement(Ke,{"data-testid":"user-mgt-update-roles-modal-unselected-role-permissions",handleNavigateBack:ke,roleId:oe})),c.createElement(J.Z,{hidden:!0})):c.createElement(X.Z.Content,{image:!0},ce?c.createElement(u.ContentLoader,null):c.createElement(u.TransferComponent,{selectionComponent:!0,searchPlaceholder:v("console:manage.features.transferList.searchPlaceholder",{type:"Roles"}),handleUnelectedListSearch:Ie,"data-testid":"user-mgt-update-roles-modal"},c.createElement(u.TransferList,{isListEmpty:!((null===b||void 0===b?void 0:b.length)>0),listType:"unselected",listHeaders:i?[v("console:manage.features.transferList.list.headers.0"),v("console:manage.features.transferList.list.headers.1"),""]:[v("console:manage.features.transferList.list.headers.1"),""],handleHeaderCheckboxChange:Me,isHeaderCheckboxChecked:q,emptyPlaceholderContent:v("console:manage.features.transferList.list.emptyPlaceholders.users.roles.unselected",{type:"roles"}),"data-testid":"user-mgt-update-roles-modal-unselected-roles-select-all-checkbox",emptyPlaceholderDefaultContent:v("console:manage.features.transferList.list.emptyPlaceholders.default")},null===b||void 0===b?void 0:b.map((function(e,t){var n,r=null===e||void 0===e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");if((null===r||void 0===r?void 0:r.length)>=1)return c.createElement(u.TransferListItem,{handleItemChange:function(){return function(e){var t=Ct(w);null!==t&&void 0!==t&&t.includes(e)?(t.splice(t.indexOf(e),1),R(t)):(t.push(e),R(t)),x(t.length===b.length)}(e)},key:t,listItem:(null===r||void 0===r?void 0:r.length)>1?r[1]:r[0],listItemId:e.id,listItemIndex:t,listItemTypeLabel:i?_e(null===e||void 0===e?void 0:e.displayName):null,isItemChecked:w.includes(e),showSecondaryActions:!0,handleOpenPermissionModal:function(){return function(e){ae(e),le(!0)}(e.id)},"data-testid":"user-mgt-update-roles-modal-unselected-roles"})}))))),c.createElement(X.Z.Actions,null,c.createElement(U.Z,null,c.createElement(U.Z.Row,{column:2},c.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(u.LinkButton,{"data-testid":"user-mgt-update-roles-modal-cancel-button",floated:"left",onClick:Ne},v("common:cancel"))),c.createElement(U.Z.Column,{mobile:8,tablet:8,computer:8},c.createElement(u.PrimaryButton,{"data-testid":"user-mgt-update-roles-modal-save-button",floated:"right",loading:Se,disabled:Se,onClick:function(){return Oe(n,w)}},v("common:save")))))))))};function It(e){return function(e){if(Array.isArray(e))return Tt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||Lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){if(e){if("string"===typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tt(e,t):void 0}}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ot.defaultProps={showDomain:!0,hideApplicationRoles:!1};var Mt=function(e){var t=e.defaultActiveIndexes,n=e.isLoading,o=e.user,l=e.showSessionTerminationButton,f=e["data-testid"],v=new a.UserAgentParser,E=(0,d.$G)().t,y=(0,m.I0)(),S=Ut((0,c.useState)(void 0),2),b=S[0],A=S[1],C=Ut((0,c.useState)(void 0),2),w=C[0],R=C[1],P=Ut((0,c.useState)(!1),2),O=P[0],I=P[1],L=Ut((0,c.useState)(t),2),T=L[0],M=L[1],Z=Ut((0,c.useState)(!1),2),N=Z[0],_=Z[1],k=Ut((0,c.useState)(!1),2),D=k[0],q=k[1],x=(0,m.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.username})).split("@");x.pop();var j=x.join("@");(0,c.useEffect)((function(){o&&o.id&&F(o.id)}),[o]);var F=function(e){I(!0),(0,h.c7)(e).then((function(e){A(e.data)})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?y((0,i.addAlert)({description:e.response.data.description||e.response.data.detail,level:s.AlertLevels.ERROR,message:E("console:manage.features.users.userSessions.notifications.getUserSessions.error.message")})):y((0,i.addAlert)({description:E("console:manage.features.users.userSessions.notifications.getUserSessions.genericError.description"),level:s.AlertLevels.ERROR,message:E("console:manage.features.users.userSessions.notifications.getUserSessions.genericError.message")}))})).finally((function(){I(!1)}))},H=function(e){for(var t=0,n=Object.values({desktop:{icon:"computer",values:["desktop"]},mobile:{icon:"mobile alternate",values:["mobile"]},tablet:{icon:"tablet alternate",values:["tablet"]}});t<n.length;t++){var r=n[t];if(r.values.includes(e))return r.icon}return"computer"},G=function(e){for(var t=0,n=Object.values({android:{icon:"android",values:["Android"]},ios:{icon:"apple",values:["iOS"]},linux:{icon:"linux",values:["Linux"]},mac:{icon:"apple",values:["Mac OS"]},windows:{icon:"windows",values:["Windows [Phone/Mobile]"]}});t<n.length;t++){var r=n[t];if(r.values.includes(e))return r.icon}},z=function(e){for(var t=0,n=Object.values({chrome:{icon:"chrome",values:["Chrome","Chrome Headless","Chrome WebView","Chromium"]},edge:{icon:"edge",values:["Edge"]},firefox:{icon:"firefox",values:["Firefox"]},opera:{icon:"opera",values:["Opera Coast","Opera Mini","Opera Mobi","Opera Tablet","Opera"]},safari:{icon:"safari",values:["Mobile Safari","Safari"]}});t<n.length;t++){var r=n[t];if(r.values.includes(e))return r.icon}},B=function(e,t){var n=t.index,r=It(T);if(r.includes(n)){var o=r.indexOf(n);r.splice(o,1)}else r.push(n);M(r)},V=function(e){var t=e.split("/"),n=e;return t.length>1&&!ie.userstoresConfig.userstoreDomain.appendToUsername&&(n=t[1]),n.split("@").length>1?n.split("@")[0].concat("@").concat(n.split("@")[1]):n.split("@")[0]};return n||O?c.createElement(u.ContentLoader,null):b&&b.sessions&&Array.isArray(b.sessions)&&b.sessions.length>0?c.createElement(U.Z,{"data-testid":f},c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:16},l&&c.createElement(r.di,{when:r.TA.USER_EDIT},c.createElement(u.DangerButton,{floated:"right","data-testid":"".concat(f,"-terminate-all-button"),onClick:function(){return q(!0)}},E("console:manage.features.users.userSessions.components.sessionDetails.actions.terminateAllSessions"))))),c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,{mobile:16,tablet:16,computer:16},c.createElement(u.SegmentedAccordion,{fluid:!0,"data-testid":"".concat(f,"-accordion")},b.sessions.map((function(e,t){return v.uaString=e.userAgent,c.createElement(c.Fragment,{key:e.id},c.createElement(u.SegmentedAccordion.Title,{id:e.id,"data-testid":"".concat(f,"-").concat(e.id,"-title"),active:T.includes(t),index:t,onClick:B,content:c.createElement(c.Fragment,null,c.createElement(u.GenericIcon,{icon:c.createElement(p.Z,{name:H(v.device.type),size:"big",color:"grey"}),transparent:!0,spaced:"right",floated:"left","data-testid":"".concat(f,"-").concat(e.id,"-title-icon")}),c.createElement(Q.Z.Content,null,c.createElement(Q.Z.Header,null,v.browser.name,"on",v.os.name),c.createElement(Q.Z.Description,null,c.createElement(u.Text,{size:11},E("console:manage.features.users.userSessions.components.sessionDetails.labels.lastAccessed",{date:$()(parseInt(e.lastAccessTime,10)).fromNow()}))))),hideChevron:!1}),c.createElement(u.SegmentedAccordion.Content,{active:T.includes(t),"data-testid":"".concat(f,"-").concat(e.id,"-content")},function(e){return v.uaString=e.userAgent,c.createElement(U.Z.Row,null,c.createElement(U.Z.Column,null,c.createElement(Q.Z.Content,null,c.createElement(U.Z,{padded:!0},c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{width:5},E("console:manage.features.users.userSessions.components.sessionDetails.labels.os")),c.createElement(U.Z.Column,{width:11},c.createElement(Q.Z.Description,null,c.createElement(p.Z,{name:G(v.os.name),color:"grey"}),v.os.name," ",v.os.version))),c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{width:5},E("console:manage.features.users.userSessions.components.sessionDetails.labels.browser")),c.createElement(U.Z.Column,{width:11},c.createElement(Q.Z.Description,null,c.createElement(p.Z,{name:z(v.browser.name),color:"grey"}),v.browser.name," ",v.browser.version))),c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{width:5},E("console:manage.features.users.userSessions.components.sessionDetails.labels.ip")),c.createElement(U.Z.Column,{width:11},c.createElement(Q.Z.Description,{"data-hj-suppress":""},e.ip))),v.device.vendor?c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{width:5},E("console:manage.features.users.userSessions.components.sessionDetails.labels.deviceModel")),c.createElement(U.Z.Column,{width:11},c.createElement(Q.Z.Description,null,v.device.vendor," ",v.device.model))):null,c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{width:5},E("console:manage.features.users.userSessions.components.sessionDetails.labels.loginTime")),c.createElement(U.Z.Column,{width:11},c.createElement(Q.Z.Description,null,$()(parseInt(e.loginTime,10)).format("lll")))),c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{width:5},E("console:manage.features.users.userSessions.components.sessionDetails.labels.lastAccessed")),c.createElement(U.Z.Column,{width:11},c.createElement(Q.Z.Description,null,$()(parseInt(e.lastAccessTime,10)).fromNow()))),e.applications&&e.applications.length>0?c.createElement(U.Z.Row,{columns:2},c.createElement(U.Z.Column,{width:5},E("console:manage.features.users.userSessions.components.sessionDetails.labels.activeApplication")),c.createElement(U.Z.Column,{mobile:16,computer:11},e.applications.map((function(e,t){return c.createElement(Q.Z.Description,{className:"pb-2",key:t},c.createElement(Te.Z,{className:"micro spaced-right",circular:!0,color:"green",size:"mini"}),c.createElement(d.cC,{i18nKey:"console:manage.features.users.userSessions.components.sessionDetails.labels.loggedInAs",tOptions:{app:e.appName,user:V(e.subject)}},"Logged in on ",c.createElement("strong",null,e.appName)," as ",c.createElement("strong",null,e.subject.split("@")[0])))})))):null,c.createElement(U.Z.Row,{columns:1},c.createElement(U.Z.Column,{width:16},l&&c.createElement(r.di,{when:r.TA.USER_EDIT},c.createElement(u.DangerZoneGroup,{sectionHeader:E("common:dangerZone")},c.createElement(u.DangerZone,{actionTitle:E("console:manage.features.users.userSessions.dangerZones.terminate.actionTitle"),header:E("console:manage.features.users.userSessions.dangerZones.terminate.header"),subheader:E("console:manage.features.users.userSessions.dangerZones.terminate.subheader"),onActionClick:function(){R(e),_(!0)},"data-testid":"".concat(f,"-terminate-button")})))))))))}(e)))}))))),(N||D)&&c.createElement(u.ConfirmationModal,{onClose:function(){N?_(!1):q(!1)},type:"warning",open:N||D,assertion:V(o.userName),assertionHint:E(N?"console:manage.features.users.confirmations.terminateSession.assertionHint":"console:manage.features.users.confirmations.terminateAllSessions.assertionHint"),assertionType:"checkbox",primaryAction:E("common:confirm"),secondaryAction:E("common:cancel"),onSecondaryActionClick:function(){N?_(!1):q(!1)},onPrimaryActionClick:function(){if(N)return e=w.id,(0,h.PI)(o.id,e).then((function(){y((0,i.addAlert)({description:E("console:manage.features.users.userSessions.notifications.terminateUserSession.success.description"),level:s.AlertLevels.SUCCESS,message:E("console:manage.features.users.userSessions.notifications.terminateUserSession.success.message")}))})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?y((0,i.addAlert)({description:e.response.data.description||e.response.data.detail,level:s.AlertLevels.ERROR,message:E("console:manage.features.users.userSessions.notifications.terminateUserSession.error.message")})):y((0,i.addAlert)({description:E("console:manage.features.users.userSessions.notifications.terminateUserSession.genericError.description"),level:s.AlertLevels.ERROR,message:E("console:manage.features.users.userSessions.notifications.terminateUserSession.genericError.message")}))})).finally((function(){F(o.id)})),void _(!1);var e;(0,h.rc)(o.id).then((function(){j===(null===o||void 0===o?void 0:o.userName)&&g.m8.push(window.AppUtils.getConfig().routes.logout),y((0,i.addAlert)({description:E("console:manage.features.users.userSessions.notifications.terminateAllUserSessions.success.description"),level:s.AlertLevels.SUCCESS,message:E("console:manage.features.users.userSessions.notifications.terminateAllUserSessions.success.message")}))})).catch((function(e){F(o.id),e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?y((0,i.addAlert)({description:e.response.data.description||e.response.data.detail,level:s.AlertLevels.ERROR,message:E("console:manage.features.users.userSessions.notifications.terminateAllUserSessions.error.message")})):y((0,i.addAlert)({description:E("console:manage.features.users.userSessions.notifications.terminateAllUserSessions.genericError.description"),level:s.AlertLevels.ERROR,message:E("console:manage.features.users.userSessions.notifications.terminateAllUserSessions.genericError.message")}))})).finally((function(){j!==(null===o||void 0===o?void 0:o.userName)&&F(o.id)})),q(!1)},"data-testid":N?"session-terminate-confirmation-modal":"all-sessions-terminate-confirmation-modal",closeOnDimmerClick:!1},c.createElement(u.ConfirmationModal.Header,{"data-testid":N?"session-terminate-confirmation-modal-header":"all-sessions-terminate-confirmation-modal-header"},E(N?"console:manage.features.users.confirmations.terminateSession.header":"console:manage.features.users.confirmations.terminateAllSessions.header")),c.createElement(u.ConfirmationModal.Message,{attached:!0,warning:!0,"data-testid":N?"session-terminate-confirmation-modal-message":"all-sessions-terminate-confirmation-modal-message"},E(N?"console:manage.features.users.confirmations.terminateSession.message":"console:manage.features.users.confirmations.terminateAllSessions.message")),c.createElement(u.ConfirmationModal.Content,{"data-testid":N?"session-terminate-confirmation-modal-content":"all-sessions-terminate-confirmation-modal-content"},E(N?"console:manage.features.users.confirmations.terminateSession.content":"console:manage.features.users.confirmations.terminateAllSessions.content")))):c.createElement(u.EmptyPlaceholder,{image:(0,g.jF)().emptyList,imageSize:"tiny",title:E("console:manage.features.users.userSessions.placeholders.emptyListPlaceholder.title"),subtitle:[E("console:manage.features.users.userSessions.placeholders.emptyListPlaceholder.subtitles")]})};Mt.defaultProps={"data-testid":"user-sessions",defaultActiveIndexes:[-1],showSessionTerminationButton:!0};var Zt=n(26072);function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kt=function(e){var t=e.user,n=e.handleUserUpdate,r=e.featureConfig,l=e.readOnlyUserStores,f=e.connectorProperties,p=e.isReadOnlyUserStoresLoading,g=(0,d.$G)().t,h=(0,m.I0)(),y=(0,m.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),S=(0,m.v9)((function(e){var t,n;return null===e||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.ui)||void 0===n?void 0:n.isGroupAndRoleSeparationEnabled})),b=Nt((0,c.useState)(!1),2),A=b[0],C=b[1],w=Nt((0,c.useState)(!1),2),R=w[0],P=w[1],O=Nt((0,c.useState)(!1),2),I=O[0],U=O[1],L=Nt((0,c.useState)(!1),2),T=L[0],M=L[1],N=Nt((0,c.useState)(!1),2),_=N[0],k=N[1],D=Nt((0,c.useState)(t),2),q=D[0],x=D[1],j=(0,m.v9)((function(e){return e.organization.organization})),F=(0,c.useMemo)((function(){return Z.F.isRootOrganization(j)}),[j]);(0,c.useEffect)((function(){t&&!(0,Ie.Z)(q,t)&&x(t)}),[t]),(0,c.useEffect)((function(){var e,t,n,s,i,u=(null===q||void 0===q||null===(e=q.userName)||void 0===e?void 0:e.split("/").length)>1?null===q||void 0===q||null===(t=q.userName)||void 0===t?void 0:t.split("/")[0]:o.UserstoreConstants.PRIMARY_USER_STORE;(!(0,a.isFeatureEnabled)(null===r||void 0===r?void 0:r.users,E._.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!==l&&void 0!==l&&l.includes(null===u||void 0===u?void 0:u.toString())||!(0,a.hasRequiredScopes)(null===r||void 0===r?void 0:r.users,null===r||void 0===r||null===(n=r.users)||void 0===n||null===(s=n.scopes)||void 0===s?void 0:s.update,y)||null!==(i=q[v.SCIMConfigs.scim.enterpriseSchema])&&void 0!==i&&i.userSourceId)&&C(!0)}),[q,l]),(0,c.useEffect)((function(){Z.F.isCurrentOrganizationRoot()&&G()}),[q]);var H=function(e){h((0,i.addAlert)(e))},G=function(){M(!0),(0,ee.Un)().then((function(e){var t=Zt.h.getState().profile.profileInfo.userName,n=null===e||void 0===e?void 0:e.realmConfig.adminUser;t===n&&P(!0),(null===q||void 0===q?void 0:q.userName)===n&&U(!0)})).catch((function(e){k(!0),e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?h((0,i.addAlert)({description:e.response.data.description||e.response.data.detail,level:s.AlertLevels.ERROR,message:g("console:manage.features.users.userSessions.notifications.getAdminUser.error.message")})):h((0,i.addAlert)({description:g("console:manage.features.users.userSessions.notifications.getAdminUser.genericError.description"),level:s.AlertLevels.ERROR,message:g("console:manage.features.users.userSessions.notifications.getAdminUser.genericError.message")}))})).finally((function(){M(!1)}))};return c.createElement(u.ResourceTab,{panes:[{menuItem:g("console:manage.features.users.editUser.tab.menuItems.0"),render:function(){return c.createElement(u.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(ge,{onAlertFired:H,user:q,handleUserUpdate:n,isReadOnly:A,connectorProperties:f,isReadOnlyUserStoresLoading:p}))}},{menuItem:g("console:manage.features.users.editUser.tab.menuItems.1"),render:function(){return c.createElement(u.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(Fe,{onAlertFired:H,user:q,handleUserUpdate:n,isReadOnly:A}))}},F?{menuItem:g("console:manage.features.users.editUser.tab.menuItems.2"),render:function(){return c.createElement(u.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(Ot,{isGroupAndRoleSeparationEnabled:S,onAlertFired:H,user:q,handleUserUpdate:n,isReadOnly:A}))}}:null,Z.F.isCurrentOrganizationRoot()&&{menuItem:g("console:manage.features.users.editUser.tab.menuItems.3"),render:function(){return c.createElement(u.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(Mt,{user:q,showSessionTerminationButton:!T&&!_&&(I&&R||!I&&R||!I&&!R)}))}}]})},Dt=function(e){var t,n,r,o,a,s,i,l,u=e.handleMetaColumnChange,m=e.userListMetaContent,p=e["data-testid"],v=(0,d.$G)().t;return c.createElement(O.Forms,{onSubmit:null,onChange:function(e,t){return function(e,t){var n=[];t.forEach((function(e){e[0]&&n.push(e[0])})),u(n)}(0,t)}},c.createElement(f.Z,{as:"h6"},v("console:manage.features.users.usersList.metaOptions.heading")),c.createElement(J.Z,null),c.createElement(Q.Z,{relaxed:!0},c.createElement(Q.Z.Item,null,c.createElement(O.Field,{"data-testid":"".concat(p,"-name"),name:"name",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:v("console:manage.features.users.usersList.metaOptions.columns.name"),value:"name"}],value:[null===m||void 0===m||null===(t=m.get("name"))||void 0===t?void 0:t.toString()],defaultChecked:!0,disabled:!0})),c.createElement(Q.Z.Item,null,c.createElement(O.Field,{"data-testid":"".concat(p,"-emails"),name:"emails",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:v("console:manage.features.users.usersList.metaOptions.columns.emails"),value:"emails"}],value:[null===m||void 0===m||null===(n=m.get("emails"))||void 0===n?void 0:n.toString()],defaultChecked:!0,disabled:!0})),c.createElement(Q.Z.Item,null,c.createElement(O.Field,{"data-testid":"".concat(p,"-username"),name:"userName",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:v("console:manage.features.users.usersList.metaOptions.columns.userName"),value:"userName"}],value:null!==m&&void 0!==m&&null!==(r=m.get("userName"))&&void 0!==r&&r.toString()?[null===m||void 0===m||null===(o=m.get("userName"))||void 0===o?void 0:o.toString()]:null})),c.createElement(Q.Z.Item,null,c.createElement(O.Field,{"data-testid":"".concat(p,"-id"),name:"id",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:v("console:manage.features.users.usersList.metaOptions.columns.id"),value:"id"}],value:null!==m&&void 0!==m&&null!==(a=m.get("id"))&&void 0!==a&&a.toString()?[null===m||void 0===m||null===(s=m.get("id"))||void 0===s?void 0:s.toString()]:null})),c.createElement(Q.Z.Item,null,c.createElement(O.Field,{"data-testid":"".concat(p,"-lastModified"),name:"meta.lastModified",required:!1,requiredErrorMessage:"",type:"checkbox",children:[{label:v("console:manage.features.users.usersList.metaOptions.columns.lastModified"),value:"meta.lastModified"}],value:null!==m&&void 0!==m&&null!==(i=m.get("meta.lastModified"))&&void 0!==i&&i.toString()?[null===m||void 0===m||null===(l=m.get("meta.lastModified"))||void 0===l?void 0:l.toString()]:null}))))}},86791:function(e,t,n){n.d(t,{r:function(){return g}});var r=n(96462),o=n(68905),a=n(64805),s=n(83913),i=n(85027),l=n(23177),u=n(84504),c=n(12847),d=n(50714),m=n(6997),f=n(26264);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.openRolePermissionModal,n=e.handleCloseRolePermissionModal,v=e.roleId,g=e.permissionsToHide,h=e["data-testid"],E=(0,a.$G)().t,y=p((0,o.useState)(!1),2),S=y[0],b=y[1],A=p((0,o.useState)(),2),C=A[0],w=A[1],R=(0,s.v9)((function(e){return e.organization.organization})),P=(0,o.useMemo)((function(){return m.F.isRootOrganization(R)}),[R]);(0,o.useEffect)((function(){v&&v&&(P?(0,f.xQ)(v).then((function(e){b(!1),w(e.data)})):(0,d.us)(R.id,v).then((function(e){b(!1),w(e.data)})))}),[v]),(0,o.useEffect)((function(){C&&b(!0)}),[C]);return S&&o.createElement(i.Z,{"data-testid":h,open:t,size:"small",className:"user-roles"},o.createElement(i.Z.Header,null,E("console:manage.features.user.updateUser.roles.viewPermissionModal.heading",{role:C.displayName})),o.createElement(i.Z.Content,{image:!0},o.createElement("div",{className:"permissions-edit-container fluid"},o.createElement(f.wB,{isReadOnly:!0,emphasize:!1,isEdit:!1,permissionsToHide:g,isRole:!0,roleObject:C}))),o.createElement(i.Z.Actions,null,o.createElement(l.Z,null,o.createElement(l.Z.Row,{column:2},o.createElement(l.Z.Column,{mobile:8,tablet:8,computer:8},o.createElement(r.LinkButton,{"data-testid":"".concat(h,"-back-button"),floated:"left",onClick:n},"Cancel")),o.createElement(l.Z.Column,{floated:"right",mobile:8,tablet:8,computer:8},o.createElement(u.Z,{"data-testid":"".concat(h,"-edit-button"),color:"orange",basic:!0,onClick:function(){c.m8.push(c.$x.getPaths().get("ROLE_EDIT").replace(":id",v))}},E("console:manage.features.user.updateUser.roles.viewPermissionModal.editButton")))))))}},65841:function(e,t,n){n.d(t,{JP:function(){return u},sl:function(){return r}});var r=function(e){return{bulk:"".concat(e,"/scim2/Bulk"),groups:"".concat(e,"/scim2/Groups"),schemas:"".concat(e,"/scim2/Schemas"),userSessions:"".concat(e,"/api/users/v1/{0}/sessions"),userStores:"".concat(e,"/api/server/v1/userstores"),users:"".concat(e,"/scim2/Users")}},o=n(64408),a=(n(35681),n(87751)),s=n(99986),i=n(30392),l=n(91689),u=function(){return{general:o.r,groups:a.r,roles:i.r,summary:s.r,user:l.r}}},70677:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(25460);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));s(i,"DEFAULT_ROLE_LIST_ITEM_LIMIT",10),s(i,"DEFAULT_EMAIL_TEMPLATE_TYPE_ITEM_LIMIT",10),s(i,"DEFAULT_USER_LIST_ATTRIBUTES",["name","emails","userName","profileUrl","meta.lastModified"]),s(i,"FEATURE_DICTIONARY",(new Map).set("USER_CREATE","users.create").set("USER_UPDATE","users.update").set("USER_DELETE","users.delete").set("USER_READ","users.read")),s(i,"USER_INFO_UPDATE_ERROR","Could not update the user information."),s(i,"GET_USER_SESSIONS_REQUEST_INVALID_STATUS_CODE_ERROR","Received an invalid status code while retrieving the user sessions."),s(i,"GET_USER_SESSIONS_REQUEST_ERROR","Could not retrieve the user sessions due to some error."),s(i,"TERMINATE_USER_SESSION_REQUEST_INVALID_STATUS_CODE_ERROR","Received an invalid status code while terminating the user sessions."),s(i,"TERMINATE_USER_SESSION_REQUEST_ERROR","Could not terminate the user session due to some error."),s(i,"TERMINATE_ALL_USER_SESSIONS_REQUEST_INVALID_STATUS_CODE_ERROR","Received an invalid status code while terminating all the user sessions."),s(i,"TERMINATE_ALL_USER_SESSIONS_ERROR","Could not terminate all the user sessions due to some error."),s(i,"SCIM2_SCHEMA_DICTIONARY",(new Map).set("EMAILS","emails").set("USERNAME","userName").set("NAME","name")),s(i,"SCIM2_ATTRIBUTES_DICTIONARY",(new Map).set("ACCOUNT_LOCKED",r.SCIMConfigs.scimEnterpriseUserClaimUri.accountLocked).set("ACCOUNT_DISABLED",r.SCIMConfigs.scimEnterpriseUserClaimUri.accountDisabled).set("ONETIME_PASSWORD",r.SCIMConfigs.scimEnterpriseUserClaimUri.oneTimePassword))},1581:function(e,t,n){n.d(t,{MN:function(){return o.MN},h8:function(){return r.h8},Fp:function(){return r.Fp},sl:function(){return a.sl}});var r=n(53988),o=n(46811),a=n(65841);n(70677),n(48185),n(75461),n(74217)},48185:function(e,t,n){n.d(t,{N:function(){return a}});var r=n(25460);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){var e;return o(e={emails:[{primary:!1,value:""}],name:{familyName:"",givenName:""},password:"",profileUrl:""},r.SCIMConfigs.scim.enterpriseSchema,{askPassword:""}),o(e,"userName",""),e}},74217:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var r=n(8890),o=n(88742),a=n(26278),s=n(96462),i=n(68905),l=n(64805),u=n(83913),c=n(15922),d=n(12847),m=n(6997),f=n(92818),p=n(17036),v=n(53988),g=n(46811);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isAuthenticatedUser",value:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)}}],(n=null)&&h(t.prototype,n),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(){var e,t,n=(0,l.$G)().t,h=(0,u.I0)(),S=(0,u.v9)((function(e){return e.config.ui.features})),b=(0,u.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),A=(0,u.v9)((function(e){return e.profile.profileInfo})),C=y((0,i.useState)(o.emptyProfileInfo),2),w=C[0],R=C[1],P=y((0,i.useState)(!1),2),O=P[0],I=P[1],U=y((0,i.useState)(void 0),2),L=U[0],T=U[1],M=y((0,i.useState)(!1),2),Z=M[0],N=M[1],_=y((0,i.useState)(void 0),2),k=_[0],D=_[1],q=y((0,i.useState)(!1),2),x=q[0],j=q[1],F=y((0,i.useState)(!1),2),H=F[0],G=F[1];(0,i.useEffect)((function(){if(m.F.isCurrentOrganizationRoot()){var e=[];(0,f.aA)(p.v.ACCOUNT_MANAGEMENT_CATEGORY_ID).then((function(t){t.map((function(t){t.id!==p.v.ACCOUNT_DISABLING_CONNECTOR_ID&&t.id!==p.v.ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID||t.properties.map((function(t){e.push(t)}))})),(0,f.aA)(p.v.USER_ONBOARDING_CONNECTOR_ID).then((function(t){t.map((function(t){t.id===p.v.SELF_SIGN_UP_CONNECTOR_ID&&t.properties.map((function(t){t.name===p.v.ACCOUNT_LOCK_ON_CREATION&&e.push(t)}))})),D(e)}))}))}}),[]),(0,i.useEffect)((function(){var e=d.m8.location.pathname.split("/"),t=e[e.length-1];z(t)}),[]),(0,i.useEffect)((function(){m.F.isCurrentOrganizationRoot()&&(j(!0),d.w3.getReadOnlyUserStores().then((function(e){T(e)})).finally((function(){j(!1)})))}),[w]);var z=function(e){I(!0),(0,v.M_)(e,null).then((function(e){R(e)})).catch((function(){})).finally((function(){I(!1)}))},B=function(e){z(e),E.isAuthenticatedUser(A,w)&&h((0,c.G)())};return i.createElement(s.PageLayout,{isLoading:O,title:(0,r.resolveUserDisplayName)(w,null,"Administrator"),pageTitle:"Edit User",description:n(""+w.emails&&void 0!==w.emails?function(e){var t="";return e&&Array.isArray(e)&&e.length>0&&(t=e.find((function(e){return"string"===typeof e}))),t}(null===w||void 0===w?void 0:w.emails):w.userName),image:i.createElement(s.UserAvatar,{editable:(0,r.hasRequiredScopes)(null===S||void 0===S?void 0:S.users,null===S||void 0===S||null===(e=S.users)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,b),name:(0,r.resolveUserDisplayName)(w),size:"tiny",image:null===w||void 0===w?void 0:w.profileUrl,onClick:function(){var e,t;return(0,r.hasRequiredScopes)(null===S||void 0===S?void 0:S.users,null===S||void 0===S||null===(e=S.users)||void 0===e||null===(t=e.scopes)||void 0===t?void 0:t.update,b)&&N(!0)}}),backButton:{"data-testid":"user-mgt-edit-user-back-button",onClick:function(){d.m8.push(d.$x.getPaths().get("USERS"))},text:n("console:manage.pages.usersEdit.backButton")},titleTextAlign:"left",bottomMargin:!1},i.createElement(g.Xk,{featureConfig:S,user:w,handleUserUpdate:B,readOnlyUserStores:L,connectorProperties:k,isReadOnlyUserStoresLoading:x}),Z&&i.createElement(s.EditAvatarModal,{open:Z,name:(0,r.resolveUserDisplayName)(w),emails:(0,r.resolveUserEmails)(null===w||void 0===w?void 0:w.emails),onClose:function(){return N(!1)},closeOnDimmerClick:!1,onCancel:function(){return N(!1)},onSubmit:function(e,t){var r={Operations:[{op:"replace",value:{profileUrl:t}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};G(!0),(0,v.gS)(null===w||void 0===w?void 0:w.id,r).then((function(){h((0,a.addAlert)({description:n("console:manage.features.user.profile.notifications.updateProfileInfo.success.description"),level:o.AlertLevels.SUCCESS,message:n("console:manage.features.user.profile.notifications.updateProfileInfo.success.message")})),B(null===w||void 0===w?void 0:w.id)})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?h((0,a.addAlert)({description:e.response.data.description||e.response.data.detail,level:o.AlertLevels.ERROR,message:n("console:manage.features.user.profile.notifications.updateProfileInfo.error.message")})):h((0,a.addAlert)({description:n("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.description"),level:o.AlertLevels.ERROR,message:n("console:manage.features.user.profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){N(!1),G(!1)}))},imageUrl:null===A||void 0===A?void 0:A.profileUrl,isSubmitting:H,heading:n("console:common.modals.editAvatarModal.heading"),submitButtonText:n("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:n("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:n("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.content"),header:n("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:n("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:n("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:n("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:n("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:n("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}}}))}},75461:function(e,t,n){n.r(t);var r=n(69883),o=n(3844),a=n(8890),s=n(88742),i=n(26278),l=n(95823),u=n(96462),c=n(68905),d=n(64805),m=n(83913),f=n(70515),p=n(7626),v=n(74364),g=n(12847),h=n(10783),E=n(6997),y=n(34694),S=n(12558),b=n(53988),A=n(46811),C=n(70677);function w(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){var t=e["data-testid"],n=(0,d.$G)().t,R=(0,m.I0)(),L=(0,m.v9)((function(e){return e.config.ui.features})),T=I((0,c.useState)(""),2),M=T[0],Z=T[1],N=I((0,c.useState)(0),2),_=N[0],k=N[1],D=I((0,c.useState)(g.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),q=D[0],x=D[1],j=I((0,c.useState)(!1),2),F=j[0],H=j[1],G=I((0,c.useState)({}),2),z=G[0],B=G[1],V=I((0,c.useState)([]),1)[0],$=I((0,c.useState)(!1),2),W=$[0],Y=$[1],K=I((0,c.useState)(void 0),2),J=K[0],Q=K[1],X=I((0,c.useState)([]),2),ee=X[0],te=X[1],ne=I((0,c.useState)(void 0),2),re=ne[0],oe=ne[1],ae=I((0,c.useState)(!1),2),se=ae[0],ie=ae[1],le=I((0,c.useState)(!1),2),ue=le[0],ce=le[1],de=I((0,c.useState)(void 0),2),me=de[0],fe=de[1],pe=I((0,c.useState)(!1),2),ve=pe[0],ge=pe[1],he=I((0,c.useState)(void 0),2),Ee=he[0],ye=he[1],Se=I((0,c.useState)(void 0),2),be=Se[0],Ae=Se[1],Ce=I((0,c.useState)(void 0),2),we=Ce[0],Re=Ce[1],Pe=(0,c.useRef)(!0),Oe=(0,m.v9)((function(e){return e.auth.username})),Ie=g.h.getState().config.deployment.tenant,Ue=JSON.parse(l.LocalStorageUtils.getValueFromLocalStorage(Ie)),Le=function(e,t,r,o,a){ce(!0);var l=e+1;(0,b.Fp)(l,t,r,o,a).then((function(e){var t,n=P({},e);n.Resources=null===n||void 0===n||null===(t=n.Resources)||void 0===t?void 0:t.map((function(e){if((e.userName.split("/").length>1?e.userName.split("/")[0]:"Primary")!==S.XS){var t=null;if((null===e||void 0===e?void 0:e.emails)instanceof Array){var r=null===e||void 0===e?void 0:e.emails[0];t="string"===typeof r?r:null===r||void 0===r?void 0:r.value}return e.emails=[t],e}var o=w(n.Resources);o.splice(o.indexOf(e),1),n.Resources=o})),B(Te(n,l,1)),ge(!1)})).catch((function(e){var t,r,o,a,l,u,c,d,m,f,p;null!==e&&void 0!==e&&null!==(t=e.response)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.description?R((0,i.addAlert)({description:null!==(o=null!==(a=null===e||void 0===e||null===(l=e.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.description)&&void 0!==a?a:null===e||void 0===e||null===(c=e.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.detail)&&void 0!==o?o:n("console:manage.features.users.notifications.fetchUsers.error.description"),level:s.AlertLevels.ERROR,message:null!==(m=null===e||void 0===e||null===(f=e.response)||void 0===f||null===(p=f.data)||void 0===p?void 0:p.message)&&void 0!==m?m:n("console:manage.features.users.notifications.fetchUsers.error.message")})):(R((0,i.addAlert)({description:n("console:manage.features.users.notifications.fetchUsers.genericError.description"),level:s.AlertLevels.ERROR,message:n("console:manage.features.users.notifications.fetchUsers.genericError.message")})),ge(!0),B({Resources:[],itemsPerPage:10,links:[],startIndex:1,totalResults:0}))})).finally((function(){ce(!1)}))};(0,c.useEffect)((function(){Pe.current?Pe.current=!1:void 0!==Ee&&H(!0)}),[Ee]),(0,c.useEffect)((function(){E.F.isCurrentOrganizationRoot()&&g.w3.getReadOnlyUserStores().then((function(e){fe(e)}))}),[re]),(0,c.useEffect)((function(){if(null!==a.CommonHelpers.lookupKey(Ue,Oe)){var e=a.CommonHelpers.lookupKey(Ue,Oe)[1],t=new Map;if(e.identityAppsSettings.userPreferences.userListColumns.length<1){var n=C._.DEFAULT_USER_LIST_ATTRIBUTES;Ze(n),n.map((function(e){"id"===e?t.set(e,""):t.set(e,e)})),Q(t)}e.identityAppsSettings.userPreferences.userListColumns.map((function(e){t.set(e,e)})),Q(t)}}),[]);var Te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e;return r.itemsPerPage===t?(r.Resources.splice(-1,n),Ae(!0)):Ae(!1),r},Me=function(e){var t,n=[],r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=U(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}(e[Symbol.iterator]());try{for(r.s();!(t=r.n()).done;){var o=t.value;""!==o&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return n.includes(C._.SCIM2_SCHEMA_DICTIONARY.get("USERNAME"))||n.push(C._.SCIM2_SCHEMA_DICTIONARY.get("USERNAME")),n.toString()};(0,c.useEffect)((function(){E.F.isCurrentOrganizationRoot()&&(!function(){var e=[{key:-2,text:n("console:manage.features.users.userstores.userstoreOptions.all"),value:"all"},{key:-1,text:n("console:manage.features.users.userstores.userstoreOptions.primary"),value:"primary"}],t={key:null,text:"",value:""};(0,o.getUserStoreList)(g.h.getState().config.endpoints.userStores).then((function(n){e===[]&&e.push(t),n.data.map((function(n,r){n.name!==S.XS&&(0,g.YZ)(n.id).then((function(o){var a;"true"===(null===(a=o.properties.find((function(e){return"Disabled"===e.name})))||void 0===a?void 0:a.value)||(t={key:r,text:n.name,value:n.name},e.push(t))}))})),te(e)})),te(e)}(),(0,y.Un)().then((function(e){Re(null===e||void 0===e?void 0:e.realmConfig)})))}),[]),(0,c.useEffect)((function(){var e=J?Me(null===J||void 0===J?void 0:J.values()):null;Le(q,_,null,e,re)}),[re]),(0,c.useEffect)((function(){if(J){var e=Me(null===J||void 0===J?void 0:J.values());Le(q,_,null,e,re)}}),[_,q]),(0,c.useEffect)((function(){if(W){var e=Me(null===J||void 0===J?void 0:J.values());Le(q,_,null,e,re),Y(!1)}}),[W]);var Ze=function(e){if(null!==a.CommonHelpers.lookupKey(Ue,Oe)){var t=a.CommonHelpers.lookupKey(Ue,Oe)[1],n=P(P({},Ue),{},O({},Oe,P(P({},t),{},{identityAppsSettings:P(P({},t.identityAppsSettings),{},{userPreferences:P(P({},t.identityAppsSettings.userPreferences),{},{userListColumns:e})})})));l.LocalStorageUtils.setValueInLocalStorage(Ie,JSON.stringify(n))}},Ne=function(e){var t=Me(J.values());"userName sw "!==e?(Z(e),Le(q,_,e,t,re)):Le(q,_,null,t,re)},_e=function(){E.F.isCurrentOrganizationRoot()?(0,y.Qy)(y.vH.USER_ONBOARDING_CONNECTOR_ID).then((function(e){var t=(null===e||void 0===e?void 0:e.connectors).find((function(e){return e.id===y.vH.USER_EMAIL_VERIFICATION_CONNECTOR_ID})).properties.find((function(e){return e.name===y.vH.EMAIL_VERIFICATION_ENABLED}));ye("true"===t.value)})).catch((function(e){var t,r,o,a,l,u,c;c={description:null!==(t=null===e||void 0===e||null===(r=e.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.description)&&void 0!==t?t:n("console:manage.features.governanceConnectors.notifications.getConnector.genericError.description"),level:s.AlertLevels.ERROR,message:null!==(a=null===e||void 0===e||null===(l=e.response)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.message)&&void 0!==a?a:n("console:manage.features.governanceConnectors.notifications.getConnector.genericError.message")},R((0,i.addAlert)(c))})):ye(!1)};return c.createElement(u.PageLayout,{action:(ue||!(!M&&(null===z||void 0===z?void 0:z.totalResults)<=0))&&c.createElement(r.di,{when:r.TA.USER_WRITE},c.createElement(u.PrimaryButton,{"data-testid":"user-mgt-user-list-add-user-button",onClick:function(){return _e()}},c.createElement(f.Z,{name:"add"}),n("console:manage.features.users.buttons.addNewUserBtn"))),title:n("console:manage.pages.users.title"),pageTitle:n("console:manage.pages.users.title"),description:n("console:manage.pages.users.subTitle"),"data-testid":"".concat(t,"-page-layout")},c.createElement(u.ListLayout,{advancedSearch:c.createElement(g.nC,{onFilter:Ne,filterAttributeOptions:[{key:0,text:n("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:n("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],filterAttributePlaceholder:n("console:manage.features.users.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:n("console:manage.features.users.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:n("console:manage.features.users.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:n("console:manage.features.users.advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:se}),currentListSize:z.itemsPerPage,listItemLimit:q,onItemsPerPageDropdownChange:function(e,t){x(t.value)},"data-testid":"user-mgt-user-list-layout",onPageChange:function(e,t){k((t.activePage-1)*q)},rightActionPanel:c.createElement(c.Fragment,null,c.createElement(p.Z,{className:"list-options-popup",flowing:!0,basic:!0,content:c.createElement(A.Sx,{"data-testid":"user-mgt-user-list-meta-columns",handleMetaColumnChange:function(e){e.push("profileUrl");var t=new Map;Ze(e),e.map((function(e){t.set(e,e)})),Q(t),Y(!0)},userListMetaContent:J}),position:"bottom left",on:"click",pinned:!0,trigger:c.createElement(u.Button,{"data-testid":"user-mgt-user-list-meta-columns-button",className:"meta-columns-button",basic:!0},c.createElement(f.Z,{name:"columns"}),n("console:manage.features.users.buttons.metaColumnBtn"))}),c.createElement(h.Yr,null,c.createElement(v.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:ee&&ee,onChange:function(e,t){"all"===t.value?oe(null):oe(t.value)},defaultValue:"all"}))),showPagination:!0,showTopActionPanel:ue||!(!M&&!ve&&ee.length<3&&(null===z||void 0===z?void 0:z.totalResults)<=0),totalPages:Math.ceil(z.totalResults/q),totalListSize:z.totalResults,paginationOptions:{disableNextButton:!be}},ve?c.createElement(u.EmptyPlaceholder,{subtitle:[n("console:manage.features.users.placeholders.userstoreError.subtitles.0"),n("console:manage.features.users.placeholders.userstoreError.subtitles.1")],title:n("console:manage.features.users.placeholders.userstoreError.title"),image:(0,g.jF)().genericError,imageSize:"tiny"}):c.createElement(A.to,{advancedSearch:c.createElement(g.nC,{onFilter:Ne,filterAttributeOptions:[{key:0,text:n("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:n("console:manage.features.users.advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],filterAttributePlaceholder:n("console:manage.features.users.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:n("console:manage.features.users.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:n("console:manage.features.users.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:n("console:manage.features.users.advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:se}),usersList:z,onUserDelete:function(){Y(!0)},userMetaListContent:J,isLoading:ue,realmConfigs:we,onEmptyListPlaceholderActionClick:function(){return H(!0)},onSearchQueryClear:function(){ie(!se),Z(""),Le(q,_,null,null,null)},searchQuery:M,"data-testid":"user-mgt-user-list",readOnlyUserStores:me,featureConfig:L}),F&&c.createElement(A.Gb,{"data-testid":"user-mgt-add-user-wizard-modal",closeWizard:function(){H(!1),ye(void 0)},listOffset:_,listItemLimit:q,updateList:function(){return Y(!0)},rolesList:V,emailVerificationEnabled:Ee})))};T.defaultProps={"data-testid":"users"},t.default=T},30864:function(e,t,n){n.d(t,{yS:function(){return f},oA:function(){return d},E4:function(){return u},YZ:function(){return c},GN:function(){return i},_V:function(){return l},Xv:function(){return m},M7:function(){return p}});var r=n(19486),o=n(88742),a=(n(79949),n(26072)),s=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),i=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.GET,params:e,url:a.h.getState().config.endpoints.userStores};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n,r;if("Resource not found."!==(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message))return Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}))},l=function(){var e={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.GET,url:"".concat(a.h.getState().config.endpoints.userStores,"/meta/types")};return s(e).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},u=function(e,t){var n={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json",params:t},method:o.HttpMethods.GET,params:t,url:"".concat(a.h.getState().config.endpoints.userStores,"/meta/types/").concat(e)};return s(n).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},c=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.GET,url:"".concat(a.h.getState().config.endpoints.userStores,"/").concat(e)};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},d=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.DELETE,url:"".concat(a.h.getState().config.endpoints.userStores,"/").concat(e)};return s(t).then((function(e){return 204!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},m=function(e,t){var n={data:t,headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.PATCH,url:"".concat(a.h.getState().config.endpoints.userStores,"/").concat(e)};return s(n).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},f=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.POST,url:"".concat(a.h.getState().config.endpoints.userStores)};return s(t).then((function(e){return 201!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},p=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.POST,url:"".concat(a.h.getState().config.endpoints.userStores,"/test-connection")};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}},5949:function(e,t,n){n.d(t,{x7:function(){return F},iq:function(){return ue},NY:function(){return re},YV:function(){return Q},HD:function(){return $},vu:function(){return he},rO:function(){return b}});var r=n(57002),o=n(8890),a=n(88742),s=n(26278),i=n(96462),l=n(68905),u=n(64805),c=n(83913),d=n(70515),m=n(82791),f=n(7626),p=n(12847),v=n(30864),g=n(80726),h=n(63706),E=n(67897);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.advancedSearch,n=e.defaultListItemLimit,S=e.isLoading,b=e.featureConfig,A=e.list,C=e.onEmptyListPlaceholderActionClick,w=e.onSearchQueryClear,R=e.searchQuery,P=e.selection,O=e.showListItemActions,I=e.update,U=e["data-testid"],L=y((0,l.useState)(!1),2),T=L[0],M=L[1],Z=y((0,l.useState)(null),2),N=Z[0],_=Z[1],k=y((0,l.useState)(""),2),D=k[0],q=k[1],x=(0,c.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),j=(0,c.I0)(),F=(0,u.$G)().t,H=function(){M(!1),q(""),_(null)},G=function(){return R?l.createElement(i.EmptyPlaceholder,{action:l.createElement(i.LinkButton,{onClick:w},F("console:manage.placeholders.emptySearchResult.action")),image:(0,p.jF)().emptySearch,imageSize:"tiny",title:F("console:manage.placeholders.emptySearchResult.title"),subtitle:[F("console:manage.placeholders.emptySearchResult.subtitles.0",{query:R}),F("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(U,"-empty-search-placeholder")}):0===(null===A||void 0===A?void 0:A.length)?E.userstoresConfig.userstoreList.renderEmptyPlaceholder(C)?E.userstoresConfig.userstoreList.renderEmptyPlaceholder(C):l.createElement(i.EmptyPlaceholder,{action:l.createElement(i.PrimaryButton,{onClick:C},l.createElement(d.Z,{name:"add"}),F("console:manage.features.userstores.placeholders.emptyList.action")),image:(0,p.jF)().newList,imageSize:"tiny",title:F("console:manage.features.userstores.placeholders.emptyList.title"),subtitle:[F("console:manage.features.userstores.placeholders.emptyList.subtitles")],"data-testid":"".concat(U,"-empty-placeholder")}):null},z=function(e){E.userstoresConfig.onUserstoreEdit(e)?p.m8.push(p.$x.getPaths().get("USERSTORES_EDIT").replace(":id",e)):p.m8.push(p.$x.getPaths().get("USERSTORES_EDIT").replace(":id",e).replace("edit-user-store",E.userstoresConfig.userstoreEdit.remoteUserStoreEditPath))};return l.createElement(l.Fragment,null,T&&l.createElement(i.ConfirmationModal,{onClose:H,type:"negative",open:T,assertion:D,assertionHint:F("console:manage.features.userstores.confirmation.hint"),assertionType:"checkbox",primaryAction:F("common:confirm"),secondaryAction:F("common:cancel"),onSecondaryActionClick:H,onPrimaryActionClick:function(){(0,v.oA)(N).then((function(){j((0,s.addAlert)({description:F("console:manage.features.userstores.notifications.deleteUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:F("console:manage.features.userstores.notifications.deleteUserstore.success.message")})),j((0,s.addAlert)({description:F("console:manage.features.userstores.notifications.delay.description"),level:a.AlertLevels.WARNING,message:F("console:manage.features.userstores.notifications.delay.message")})),I()})).catch((function(e){var t,n;j((0,s.addAlert)({description:null!==(t=null===e||void 0===e?void 0:e.description)&&void 0!==t?t:F("console:manage.features.userstores.notifications.deleteUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:null!==(n=null===e||void 0===e?void 0:e.message)&&void 0!==n?n:F("console:manage.features.userstores.notifications.deleteUserstore.genericError.message")}))})).finally((function(){H()}))},"data-testid":"".concat(U,"-delete-confirmation-modal"),closeOnDimmerClick:!1},l.createElement(i.ConfirmationModal.Header,{"data-testid":"".concat(U,"-delete-confirmation-modal-header")},F("console:manage.features.userstores.confirmation.header")),l.createElement(i.ConfirmationModal.Message,{attached:!0,negative:!0,"data-testid":"".concat(U,"-delete-confirmation-modal-message")},F("console:manage.features.userstores.confirmation.message")),l.createElement(i.ConfirmationModal.Content,{"data-testid":"".concat(U,"-delete-confirmation-modal-content")},F("console:manage.features.userstores.confirmation.content"))),l.createElement(i.DataTable,{className:"userstores-table",externalSearch:t,isLoading:S,loadingStateOptions:{count:null!==n&&void 0!==n?n:p.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:O?[{icon:function(){return"pencil alternate"},onClick:function(e,t){return z(null===t||void 0===t?void 0:t.id)},popupText:function(){return F("common:edit")},renderer:"semantic-icon"},{hidden:function(e){var t,n;return!(0,o.hasRequiredScopes)(null===b||void 0===b?void 0:b.userStores,null===b||void 0===b||null===(t=b.userStores)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.delete,x)||e.id==h.kL},icon:function(){return"trash alternate"},onClick:function(e,t){return n=null===t||void 0===t?void 0:t.id,r=null===t||void 0===t?void 0:t.name,_(n),q(r),void M(!0);var n,r},popupText:function(){return F("common:delete")},renderer:"semantic-icon"}]:[],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return l.createElement(m.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(U,"-item-heading")},l.createElement(i.GenericIcon,{bordered:!0,defaultIcon:!0,relaxed:"very",size:"micro",shape:"rounded",spaced:"right",hoverable:!1,icon:(0,g.oy)().header.default}),l.createElement(m.Z.Content,null,e.enabled?l.createElement(f.Z,{trigger:l.createElement(d.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:F("common:enabled"),inverted:!0}):l.createElement(f.Z,{trigger:l.createElement(d.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:F("common:disabled"),inverted:!0})),l.createElement(m.Z.Content,null,(null===e||void 0===e?void 0:e.name)===h.XS?r.UserstoreConstants.CUSTOMER_USER_STORE_MAPPING:null===e||void 0===e?void 0:e.name,l.createElement(m.Z.Subheader,null,e.description)))},title:F("common:name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:F("common:actions")}],data:A,onRowClick:function(e,t){z(null===t||void 0===t?void 0:t.id)},placeholders:G(),selectable:P,showHeader:!1,transparent:!S&&null!==G(),"data-testid":U}))};b.defaultProps={"data-testid":"userstores-list",selection:!0,showListItemActions:!0};var A=n(26776),C=n(85027),w=n(23177),R=n(5554),P=n(84504);function O(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(e){var t,n,r,o=e.submitState,i=e.onSubmit,f=e.values,p=e.type,g=e.connectionProperties,E=e.basicProperties,y=e["data-testid"],S=I((0,l.useState)(!1),2),b=S[0],C=S[1],U=I((0,l.useState)(!1),2),L=U[0],T=U[1],M=I((0,l.useState)(null),2),Z=M[0],N=M[1],_=I((0,l.useState)(!1),2),k=_[0],D=_[1],q=I((0,l.useState)(void 0),2),x=q[0],j=q[1],F=(0,u.$G)().t,H=(0,c.I0)();!function(e){e.TESTING="spinner",e.FAILED="remove",e.SUCCESSFUL="check",e.INITIAL="bolt"}(r||(r={}));var G;!function(e){e[e.TESTING=0]="TESTING",e[e.INITIAL=1]="INITIAL",e[e.SUCCESSFUL=2]="SUCCESSFUL",e[e.FAILED=3]="FAILED"}(G||(G={}));var z=function(){return k?G.TESTING:L?G.SUCCESSFUL:b?G.FAILED:G.INITIAL};return l.createElement(w.Z,{"data-testid":y},l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(A.Forms,{onSubmit:function(e){e.get(h.rr)&&e.set(h.rr,"false"===e.get(h.rr)?"true":"false"),i(e)},submitState:o,onChange:function(e,t){N(t)}},l.createElement(A.Field,{label:F("console:manage.features.userstores.forms.general.name.label"),name:"name",type:"text",required:!0,requiredErrorMessage:F("console:manage.features.userstores.forms.general.name.requiredErrorMessage"),placeholder:F("console:manage.features.userstores.forms.general.name.placeholder"),value:null===f||void 0===f||null===(t=f.get("name"))||void 0===t?void 0:t.toString(),"data-testid":"".concat(y,"-form-name-input"),validation:function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,(0,v.GN)(null);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),H((0,s.addAlert)({description:(null===e.t0||void 0===e.t0?void 0:e.t0.description)||F("console:manage.features.userstores.notifications.fetchUserstores.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||F("console:manage.features.userstores.notifications.fetchUserstores.genericError.message")}));case 10:r.find((function(e){return e.name===t}))&&(n.isValid=!1,n.errorMessages.push(F("console:manage.features.userstores.forms.general.name.validationErrorMessages.alreadyExistsErrorMessage")));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){O(a,r,o,s,i,"next",e)}function i(e){O(a,r,o,s,i,"throw",e)}s(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()}),l.createElement(A.Field,{label:F("console:manage.features.userstores.forms.general.description.label"),name:"description",type:"text",required:!1,requiredErrorMessage:"",placeholder:F("console:manage.features.userstores.forms.general.description.placeholder"),value:null===f||void 0===f||null===(n=f.get("description"))||void 0===n?void 0:n.toString(),"data-testid":"".concat(y,"-form-description-textarea")}),null===E||void 0===E?void 0:E.map((function(e,t){var n,r,o,a,s,i,u,c,d=e.description.split("#")[0]===h.rr,m=d?void 0!==x?x?"Enabled":"Disabled":null!==f&&void 0!==f&&f.get(null===e||void 0===e?void 0:e.name)?"false"===(null===f||void 0===f?void 0:f.get(null===e||void 0===e?void 0:e.name))?"Enabled":"Disabled":"false"===e.defaultValue?"Enabled":"Disabled":e.description.split("#")[0],p="password"===e.attributes.find((function(e){return"type"===e.name})).value,v="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return p?l.createElement(A.Field,{key:t,label:m,name:e.name,type:"password",required:!0,requiredErrorMessage:F("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:m}),placeholder:F("console:manage.features.userstores.forms.custom.placeholder",{name:m}),showPassword:F("common:showPassword"),hidePassword:F("common:hidePassword"),value:null!==(r=null===f||void 0===f||null===(o=f.get(null===e||void 0===e?void 0:e.name))||void 0===o?void 0:o.toString())&&void 0!==r?r:e.defaultValue,"data-testid":"".concat(y,"-form-basic-properties-password-input-").concat(e.name)}):v?l.createElement(A.Field,{key:t,label:m,name:e.name,type:"toggle",required:!1,requiredErrorMessage:F("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:m}),placeholder:F("console:manage.features.userstores.forms.custom.placeholder",{name:m}),value:d?null!==f&&void 0!==f&&f.get(null===e||void 0===e?void 0:e.name)?"false"===(null===f||void 0===f||null===(a=f.get(null===e||void 0===e?void 0:e.name))||void 0===a?void 0:a.toString())?"true":"false":"false"===e.defaultValue?"true":"false":null!==(s=null===f||void 0===f||null===(i=f.get(null===e||void 0===e?void 0:e.name))||void 0===i?void 0:i.toString())&&void 0!==s?s:e.defaultValue,toggle:!0,"data-testid":"".concat(y,"-form-basic-properties-toggle-").concat(e.name),listen:function(t){var n=t.get(e.name).toString();"Disabled"===e.name&&j("false"!==n)}}):l.createElement(A.Field,{key:t,label:m,name:e.name,type:"text",required:!0,requiredErrorMessage:F("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:m}),placeholder:F("console:manage.features.userstores.forms.custom.placeholder",{name:m}),value:null!==(u=null===f||void 0===f||null===(c=f.get(null===e||void 0===e?void 0:e.name))||void 0===c?void 0:c.toString())&&void 0!==u?u:e.defaultValue,"data-testid":"".concat(y,"-form-basic-properties-text-input-").concat(e.name)})})),l.createElement(R.Z,{hidden:!0}),null===g||void 0===g?void 0:g.map((function(e,t){var n,r,o,a,s,i,u,c=e.description.split("#")[0],d="password"===e.attributes.find((function(e){return"type"===e.name})).value,m="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return d?l.createElement(A.Field,{key:t,label:c,name:e.name,className:"addon-field-wrapper",type:"password",required:!0,requiredErrorMessage:F("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:c}),placeholder:F("console:manage.features.userstores.forms.custom.placeholder",{name:c}),showPassword:F("common:showPassword"),hidePassword:F("common:hidePassword"),value:null!==(r=null===f||void 0===f||null===(o=f.get(null===e||void 0===e?void 0:e.name))||void 0===o?void 0:o.toString())&&void 0!==r?r:e.defaultValue,"data-testid":"".concat(y,"-form-connection-properties-password-input-").concat(e.name)}):m?l.createElement(A.Field,{key:t,label:c,name:e.name,type:"toggle",required:!1,requiredErrorMessage:F("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:c}),placeholder:F("console:manage.features.userstores.forms.custom.placeholder",{name:c}),value:null!==(a=null===f||void 0===f||null===(s=f.get(null===e||void 0===e?void 0:e.name))||void 0===s?void 0:s.toString())&&void 0!==a?a:e.defaultValue,toggle:!0,"data-testid":"".concat(y,"-form-connection-properties-toggle-").concat(e.name)}):l.createElement(A.Field,{key:t,label:c,name:e.name,type:"text",required:!0,requiredErrorMessage:F("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:c}),placeholder:F("console:manage.features.userstores.forms.custom.placeholder",{name:c}),value:null!==(i=null===f||void 0===f||null===(u=f.get(null===e||void 0===e?void 0:e.name))||void 0===u?void 0:u.toString())&&void 0!==i?i:e.defaultValue,"data-testid":"".concat(y,"-form-connection-properties-text-input-").concat(e.name)})}))),l.createElement(R.Z,{hidden:!0}),(null===p||void 0===p?void 0:p.typeName.includes(h.lH))&&l.createElement(P.Z,{className:"test-button",basic:!0,onClick:function(){D(!0);var e={connectionPassword:null===Z||void 0===Z?void 0:Z.get("password").toString(),connectionURL:null===Z||void 0===Z?void 0:Z.get("url").toString(),driverName:null===Z||void 0===Z?void 0:Z.get("driverName").toString(),username:null===Z||void 0===Z?void 0:Z.get("userName").toString()};(0,v.M7)(e).then((function(e){D(!1),null!==e&&void 0!==e&&e.connection?(C(!1),T(!0)):(T(!1),C(!0))})).catch((function(){D(!1),T(!1),C(!0)}))},color:z()===G.SUCCESSFUL?"green":z()===G.FAILED?"red":null,"data-testid":"".concat(y,"-test-connection-button")},l.createElement(d.Z,{size:"small",loading:k,name:k?r.TESTING:L?r.SUCCESSFUL:b?r.FAILED:r.INITIAL,color:z()===G.SUCCESSFUL?"green":z()===G.FAILED?"red":null}),F("console:manage.features.userstores.forms.connection.testButton")),b&&l.createElement(m.Z,{as:"h6",color:"red"},F("console:manage.features.userstores.forms.connection.connectionErrorMessage")))))};L.defaultProps={"data-testid":"userstore-general-details"};var T=function(e){var t=e.data,n=e.connectionProperties,r=e.userProperties,o=e.groupProperties,a=e.basicProperties,s=e.type,i=e["data-testid"],c=(0,u.$G)().t,d=function(e,t,n){return l.createElement(w.Z.Row,{key:n,className:"summary-field",columns:2},l.createElement(w.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},l.createElement("div",{className:"label"},e)),l.createElement(w.Z.Column,{className:"overflow-wrap",mobile:16,tablet:8,computer:8,textAlign:"left"},l.createElement("div",{className:"value"},t)))};return l.createElement(w.Z,{className:"wizard-summary","data-testid":i},l.createElement(w.Z.Row,null,l.createElement(w.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},l.createElement("div",{className:"general-details"},l.createElement("h3",null,null===t||void 0===t?void 0:t.name),l.createElement("div",{className:"description"},null===t||void 0===t?void 0:t.description)))),s?d("Userstore Type",s):null,l.createElement(R.Z,{horizontal:!0},c("console:manage.features.userstores.wizard.steps.general")),null===a||void 0===a?void 0:a.map((function(e,n){var r,o,a;if("password"!==(null===(r=e.attributes.find((function(e){return"type"===e.name})))||void 0===r?void 0:r.value))return d(e.description.split("#")[0],null===t||void 0===t||null===(o=t.properties)||void 0===o||null===(a=o.find((function(t){return t.name===e.name})))||void 0===a?void 0:a.value,n)})),null===n||void 0===n?void 0:n.map((function(e,n){var r,o,a;if("password"!==(null===(r=e.attributes.find((function(e){return"type"===e.name})))||void 0===r?void 0:r.value))return d(e.description.split("#")[0],null===t||void 0===t||null===(o=t.properties)||void 0===o||null===(a=o.find((function(t){return t.name===e.name})))||void 0===a?void 0:a.value,n)})),l.createElement(R.Z,{horizontal:!0},c("console:manage.features.userstores.wizard.steps.user")),null===r||void 0===r?void 0:r.map((function(e,n){var r,o,a;if("password"!==(null===(r=e.attributes.find((function(e){return"type"===e.name})))||void 0===r?void 0:r.value))return d(e.description.split("#")[0],null===t||void 0===t||null===(o=t.properties)||void 0===o||null===(a=o.find((function(t){return t.name===e.name})))||void 0===a?void 0:a.value,n)})),l.createElement(R.Z,{horizontal:!0},c("console:manage.features.userstores.wizard.steps.group")),null===o||void 0===o?void 0:o.map((function(e,n){var r,o,a;if("password"!==(null===(r=e.attributes.find((function(e){return"type"===e.name})))||void 0===r?void 0:r.value))return d(e.description.split("#")[0],null===t||void 0===t||null===(o=t.properties)||void 0===o||null===(a=o.find((function(t){return t.name===e.name})))||void 0===a?void 0:a.value,n)})))};T.defaultProps={"data-testid":"userstore-summary"};var M=function(e){var t=e.submitState,n=e.onSubmit,r=e.values,o=e.properties,a=e["data-testid"],s=(0,u.$G)().t;return l.createElement(w.Z,{"data-testid":a},l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(A.Forms,{onSubmit:function(e){n(e)},submitState:t},o.map((function(e,t){var n,o,i,u,c,d=e.description.split("#")[0];return"boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value)?l.createElement(A.Field,{key:t,label:d,name:e.name,type:"toggle",required:!1,requiredErrorMessage:s("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:d}),placeholder:s("console:manage.features.userstores.forms.custom.placeholder",{name:d}),value:null!==(o=null===r||void 0===r||null===(i=r.get(null===e||void 0===e?void 0:e.name))||void 0===i?void 0:i.toString())&&void 0!==o?o:e.defaultValue,toggle:!0,"data-testid":"".concat(a,"-form-toggle-").concat(e.name)}):l.createElement(A.Field,{key:t,label:d,name:e.name,type:"text",required:!0,requiredErrorMessage:s("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:d}),placeholder:s("console:manage.features.userstores.forms.custom.placeholder",{name:d}),value:null!==(u=null===r||void 0===r||null===(c=r.get(null===e||void 0===e?void 0:e.name))||void 0===c?void 0:c.toString())&&void 0!==u?u:e.defaultValue,"data-testid":"".concat(a,"-form-text-input-").concat(e.name)})}))))))};function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}M.defaultProps={"data-testid":"userstore-user-details"};var _=function(e){var t=e.submitState,n=e.onSubmit,r=e.values,o=e.properties,a=e["data-testid"],s=Z((0,l.useState)(!1),2),i=s[0],c=s[1],d=(0,u.$G)().t;return l.createElement(w.Z,{"data-testid":a},l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(A.Forms,{onSubmit:function(e){n(e)},submitState:t},o.map((function(e,t){var n,o,s,u,m,f,p,v=e.description.split("#")[0],g="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value),h="ReadGroups"===e.name;return g?h?l.createElement(A.Field,{key:t,label:v,name:e.name,type:"toggle",required:!1,requiredErrorMessage:d("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:v}),placeholder:d("console:manage.features.userstores.forms.custom.placeholder",{name:v}),value:null!==(o=null===r||void 0===r||null===(s=r.get(null===e||void 0===e?void 0:e.name))||void 0===s?void 0:s.toString())&&void 0!==o?o:e.defaultValue,toggle:!0,listen:function(t){c("false"===t.get(e.name).toString())},"data-testid":"".concat(a,"-form-master-toggle-").concat(e.name)}):l.createElement(A.Field,{key:t,label:v,name:e.name,type:"toggle",required:!1,requiredErrorMessage:d("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:v}),placeholder:d("console:manage.features.userstores.forms.custom.placeholder",{name:v}),value:null!==(u=null===r||void 0===r||null===(m=r.get(null===e||void 0===e?void 0:e.name))||void 0===m?void 0:m.toString())&&void 0!==u?u:e.defaultValue,toggle:!0,disabled:i,"data-testid":"".concat(a,"-form-toggle-").concat(e.name)}):l.createElement(A.Field,{key:t,label:v,name:e.name,type:"text",required:!i,requiredErrorMessage:d("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:v}),placeholder:d("console:manage.features.userstores.forms.custom.placeholder",{name:v}),value:null!==(f=null===r||void 0===r||null===(p=r.get(null===e||void 0===e?void 0:e.name))||void 0===p?void 0:p.toString())&&void 0!==f?f:e.defaultValue,disabled:i,"data-testid":"".concat(a,"-form-text-input-").concat(e.name)})}))))))};_.defaultProps={"data-testid":"userstore-group-details"};var k=n(63068);function D(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"===typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=function(e){var t,n,r,o,m,f,E,y,S=e.open,b=e.onClose,R=e.type,P=e["data-testid"],O=q((0,l.useState)(0),2),I=O[0],U=O[1],Z=q((0,l.useState)(null),2),N=Z[0],x=Z[1],j=q((0,l.useState)(null),2),F=j[0],H=j[1],G=q((0,l.useState)(null),2),z=G[0],B=G[1],V=q((0,l.useState)(null),2),$=V[0],W=V[1],Y=q((0,l.useState)(null),2),K=Y[0],J=Y[1],Q=q((0,l.useState)(!1),2),X=Q[0],ee=Q[1],te=q((0,A.useTrigger)(),2),ne=te[0],re=te[1],oe=q((0,A.useTrigger)(),2),ae=oe[0],se=oe[1],ie=q((0,A.useTrigger)(),2),le=ie[0],ue=ie[1],ce=(0,c.I0)(),de=(0,u.$G)().t,me=q((0,i.useWizardAlert)(),3),fe=me[0],pe=me[1],ve=me[2];(0,l.useEffect)((function(){R&&J((0,k.Y)(R.properties))}),[R]),(0,l.useEffect)((function(){$&&U(3)}),[$]),(0,l.useEffect)((function(){z&&ge()}),[z]);var ge=function(){var e,t,n={description:null===N||void 0===N||null===(e=N.get("description"))||void 0===e?void 0:e.toString(),name:null===N||void 0===N||null===(t=N.get("name"))||void 0===t?void 0:t.toString(),properties:he(),typeId:null===R||void 0===R?void 0:R.typeId};W(n)},he=function(){var e=K.connection.required.map((function(e){var t;return{name:e.name,value:null===(t=N.get(e.name))||void 0===t?void 0:t.toString()}})),t=K.user.required.map((function(e){var t;return{name:e.name,value:null===(t=F.get(e.name))||void 0===t?void 0:t.toString()}})),n=K.group.required.map((function(e){var t;return{name:e.name,value:null===(t=z.get(e.name))||void 0===t?void 0:t.toString()}})),r=K.basic.required.map((function(e){var t;return{name:e.name,value:null===(t=N.get(e.name))||void 0===t?void 0:t.toString()}})),o=R.properties.Advanced.map((function(e){return{name:e.name,value:e.defaultValue}}));o.push.apply(o,D(R.properties.Mandatory.map((function(e){return{name:e.name,value:e.defaultValue}}))).concat(D(R.properties.Optional.map((function(e){return{name:e.name,value:e.defaultValue}})))));var a=[].concat(D(e),D(t),D(n),D(r));return o.map((function(e){var t=a.find((function(t){return t.name===e.name}));return t||e}))},Ee=[{content:l.createElement(L,{submitState:ne,onSubmit:function(e){x(e),U(1)},values:N,type:R,connectionProperties:null===K||void 0===K||null===(t=K.connection)||void 0===t?void 0:t.required,basicProperties:null===K||void 0===K||null===(n=K.basic)||void 0===n?void 0:n.required,"data-testid":"".concat(P,"-general-details")}),icon:(0,g.OU)().general,title:de("console:manage.features.userstores.wizard.steps.general")},{content:l.createElement(M,{submitState:ae,onSubmit:function(e){H(e),U(2)},values:F,properties:null===K||void 0===K||null===(r=K.user)||void 0===r?void 0:r.required,"data-testid":"".concat(P,"-user-details")}),icon:(0,g.OU)().general,title:de("console:manage.features.userstores.wizard.steps.user")},{content:l.createElement(_,{submitState:le,onSubmit:function(e){B(e)},values:z,properties:null===K||void 0===K||null===(o=K.group)||void 0===o?void 0:o.required,"data-testid":"".concat(P,"-group-details")}),icon:(0,g.OU)().general,title:de("console:manage.features.userstores.wizard.steps.group")},{content:l.createElement(T,{data:$,connectionProperties:null===K||void 0===K||null===(m=K.connection)||void 0===m?void 0:m.required,userProperties:null===K||void 0===K||null===(f=K.user)||void 0===f?void 0:f.required,groupProperties:null===K||void 0===K||null===(E=K.group)||void 0===E?void 0:E.required,basicProperties:null===K||void 0===K||null===(y=K.basic)||void 0===y?void 0:y.required,type:null===R||void 0===R?void 0:R.typeName,"data-testid":"".concat(P,"-summary")}),icon:(0,g.OU)().general,title:de("console:manage.features.userstores.wizard.steps.summary")}],ye=function(){switch(I){case 0:re();break;case 1:se();break;case 2:ue();break;case 3:ee(!0),(0,v.yS)($).then((function(){ce((0,s.addAlert)({description:de("console:manage.features.userstores.notifications.addUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:de("console:manage.features.userstores.notifications.addUserstore.success.message")})),ce((0,s.addAlert)({description:de("console:manage.features.userstores.notifications.delay.description"),level:a.AlertLevels.WARNING,message:de("console:manage.features.userstores.notifications.delay.message")})),b(),p.m8.push(p.$x.getPaths().get("USERSTORES"))})).catch((function(e){var t,n,r,o;403===(null===(t=e.response)||void 0===t?void 0:t.status)&&(null===(n=e.response.data)||void 0===n?void 0:n.code)===h.u4.ERROR_CREATE_LIMIT_REACHED.getErrorCode()&&pe({code:h.u4.ERROR_CREATE_LIMIT_REACHED.getErrorCode(),description:de(h.u4.ERROR_CREATE_LIMIT_REACHED.getErrorDescription()),level:a.AlertLevels.ERROR,message:de(h.u4.ERROR_CREATE_LIMIT_REACHED.getErrorMessage()),traceId:h.u4.ERROR_CREATE_LIMIT_REACHED.getErrorTraceId()}),pe({description:null!==(r=null===e||void 0===e?void 0:e.description)&&void 0!==r?r:de("console:manage.features.userstores.notifications.addUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:null!==(o=null===e||void 0===e?void 0:e.message)&&void 0!==o?o:de("console:manage.features.userstores.notifications.addUserstore.genericError.message")})})).finally((function(){ee(!1)}))}};return l.createElement(C.Z,{open:S,onClose:b,dimmer:"blurring",size:"small",className:"wizard application-create-wizard","data-testid":P,closeOnDimmerClick:!1},l.createElement(C.Z.Header,{className:"wizard-header"},de("console:manage.features.userstores.wizard.header",{type:h.Gw[R.typeName]}),N&&N.get("name")?" - "+N.get("name"):""),l.createElement(C.Z.Content,{className:"steps-container","data-testid":"".concat(P,"-steps")},l.createElement(i.Steps.Group,{current:I},Ee.map((function(e,t){return l.createElement(i.Steps.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(P,"-step-").concat(t)})})))),l.createElement(C.Z.Content,{className:"content-container",scrolling:!0},fe&&ve,Ee[I].content),l.createElement(C.Z.Actions,null,l.createElement(w.Z,null,l.createElement(w.Z.Row,{column:1},l.createElement(w.Z.Column,{mobile:8,tablet:8,computer:8},l.createElement(i.LinkButton,{floated:"left",onClick:function(){return b()}},de("common:cancel"))),l.createElement(w.Z.Column,{mobile:8,tablet:8,computer:8},I<Ee.length-1&&l.createElement(i.PrimaryButton,{floated:"right",onClick:ye,"data-testid":"".concat(P,"-next-button")},de("common:next")," ",l.createElement(d.Z,{name:"arrow right"})),I===Ee.length-1&&l.createElement(i.PrimaryButton,{floated:"right",onClick:ye,"data-testid":"".concat(P,"-finish-button"),loading:X,disabled:X},de("common:finish")),I>0&&l.createElement(i.LinkButton,{floated:"right",onClick:function(){U(I-1)},"data-testid":"".concat(P,"-previous-button")},l.createElement(d.Z,{name:"arrow left"})," ",de("common:previous")))))))};F.defaultProps={"data-testid":"add-userstore-wizard"};var H=n(15409);function G(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"===typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t,n,r=e.id,o=e.properties,m=e.update,f=e["data-testid"],p=z((0,l.useState)(!1),2),g=p[0],E=p[1],y=z((0,l.useState)(null),2),S=y[0],b=y[1],C=z((0,l.useState)(!1),2),R=C[0],P=C[1],O=(0,c.I0)(),I=(0,u.$G)().t;(0,l.useEffect)((function(){if(o){var e=new Map;o.optional.sql.delete.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.insert.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.select.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.update.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),b(e)}}),[o]);return l.createElement(i.EmphasizedSegment,{padded:"very"},l.createElement(A.Forms,{onSubmit:function(e){var t=null===o||void 0===o?void 0:o.required.filter((function(t){return e.has(t.name)})).map((function(t){return{operation:"REPLACE",path:"/properties/".concat(t.name),value:e.get(t.name).toString()}})),n=g?null===o||void 0===o?void 0:o.optional.nonSql.filter((function(t){return e.has(t.name)})).map((function(t){return{operation:"REPLACE",path:"/properties/".concat(t.name),value:e.get(t.name).toString()}})):null,i=g?null===o||void 0===o?void 0:o.optional.sql.insert.filter((function(e){return S.has(e.name)&&""!==S.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:S.get(e.name).toString()}})):null,l=g?null===o||void 0===o?void 0:o.optional.sql.update.filter((function(e){return S.has(e.name)&&""!==S.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:S.get(e.name).toString()}})):null,u=g?null===o||void 0===o?void 0:o.optional.sql.delete.filter((function(e){return S.has(e.name)&&""!==S.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:S.get(e.name).toString()}})):null,c=g?null===o||void 0===o?void 0:o.optional.sql.select.filter((function(e){return S.has(e.name)&&""!==S.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:S.get(e.name).toString()}})):null,d=g?[].concat(G(t),G(n),G(u),G(i),G(l),G(c)):t;P(!0),(0,v.Xv)(r,d).then((function(){O((0,s.addAlert)({description:I("console:manage.features.userstores.notifications.updateUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:I("console:manage.features.userstores.notifications.updateUserstore.success.message")})),O((0,s.addAlert)({description:I("console:manage.features.userstores.notifications.updateDelay.description"),level:a.AlertLevels.WARNING,message:I("console:manage.features.userstores.notifications.updateDelay.message")})),m()})).catch((function(e){O((0,s.addAlert)({description:(null===e||void 0===e?void 0:e.description)||I("console:manage.features.userstores.notifications.updateUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||I("console:manage.features.userstores.notifications.updateUserstore.genericError.message")}))})).finally((function(){P(!1)}))}},l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},null===o||void 0===o||null===(t=o.required)||void 0===t?void 0:t.map((function(e,t){var n,o,a,s,i=e.description.split("#")[0],u="password"===e.attributes.find((function(e){return"type"===e.name})).value,c="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return u?l.createElement(A.Field,{name:e.name,type:"password",key:t,required:!0,disabled:r===h.kL,label:i,requiredErrorMessage:I("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),showPassword:I("common:showPassword"),hidePassword:I("common:hidePassword"),placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-password-input-").concat(e.name)}):c?l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"toggle",key:t,required:!1,disabled:r===h.kL,label:e.description.split("#")[0],requiredErrorMessage:I("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),toggle:!0,placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-toggle-").concat(e.name)}):"DisplayNameAttribute"==e.name?H.userstoresConfig.userstoreEdit.userDetails.showDisplayName&&r!==h.kL&&l.createElement(A.Field,{name:e.name,value:null!==(a=e.value)&&void 0!==a?a:e.defaultValue,type:"text",key:t,required:!0,label:e.description.split("#")[0],requiredErrorMessage:I("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-text-input-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(s=e.value)&&void 0!==s?s:e.defaultValue,type:"text",key:t,required:!0,label:e.description.split("#")[0],requiredErrorMessage:I("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-text-input-").concat(e.name)})}))))),((null===o||void 0===o?void 0:o.optional.sql.delete.length)>0||(null===o||void 0===o?void 0:o.optional.sql.insert.length)>0||(null===o||void 0===o?void 0:o.optional.sql.select.length)>0||(null===o||void 0===o?void 0:o.optional.sql.update.length)>0)&&r!==h.kL&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:8,textAlign:"center"},l.createElement(i.LinkButton,{type:"button",onClick:function(){E(!g)},"data-testid":"".concat(f,"-show-more-button")},l.createElement(d.Z,{name:g?"chevron up":"chevron down"}),I(g?"common:showLess":"common:showMore")))),g&&(null===o||void 0===o?void 0:o.optional.nonSql.length)>0&&l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},null===o||void 0===o||null===(n=o.optional)||void 0===n?void 0:n.nonSql.map((function(e,t){var n,o,a,s,i=""!==e.value,u=e.description.split("#")[0],c="password"===e.attributes.find((function(e){return"type"===e.name})).value,d="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value),m="UniqueID"===e.name;return i?c?l.createElement(A.Field,{name:e.name,type:"password",key:t,required:!1,disabled:r===h.kL,label:u,requiredErrorMessage:I("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),showPassword:I("common:showPassword"),hidePassword:I("common:hidePassword"),placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-non-sql-password-input-").concat(e.name)}):d?l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"toggle",key:t,required:!1,disabled:r===h.kL,label:e.description.split("#")[0],requiredErrorMessage:I("console:manage.features.userstores.forms.edit.connection.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),toggle:!0,placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-non-sql-toggle-").concat(e.name)}):m?l.createElement(A.Field,{name:e.name,hidden:!0,value:null!==(a=e.value)&&void 0!==a?a:e.defaultValue,type:"text",key:t,required:!1,disabled:r===h.kL,label:e.description.split("#")[0],requiredErrorMessage:I("console:manage.features.userstores.forms.edit.connection.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-non-sql-text-input-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(s=e.value)&&void 0!==s?s:e.defaultValue,type:"text",key:t,required:!1,disabled:r===h.kL,label:e.description.split("#")[0],requiredErrorMessage:I("console:manage.features.userstores.forms.edit.connection.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:I("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-non-sql-text-input-").concat(e.name)}):l.createElement(l.Fragment,null)}))))),g&&r!==h.kL&&((null===o||void 0===o?void 0:o.optional.sql.delete.length)>0||(null===o||void 0===o?void 0:o.optional.sql.insert.length)>0||(null===o||void 0===o?void 0:o.optional.sql.select.length)>0||(null===o||void 0===o?void 0:o.optional.sql.update.length)>0)&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:16},l.createElement(he,{onChange:function(e,t){var n=new Map(S);n.set(e,t),b(n)},properties:null===o||void 0===o?void 0:o.optional.sql,values:S,"data-testid":"".concat(f,"-sql-editor")}))),l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(i.PrimaryButton,{type:"submit","data-testid":"".concat(f,"-form-submit-button"),loading:R,disabled:R},"Update")))))};function W(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||K(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){if(e){if("string"===typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}$.defaultProps={"data-testid":"userstore-user-details-edit"};var Q=function(e){var t,n,r=e.id,o=e.properties,m=e.update,f=e["data-testid"],p=Y((0,l.useState)(!1),2),g=p[0],y=p[1],S=Y((0,l.useState)(!0),2),b=S[0],C=S[1],R=Y((0,l.useState)(null),2),P=R[0],O=R[1],I=Y((0,l.useState)(!1),2),U=I[0],L=I[1],T=(0,c.I0)(),M=(0,u.$G)().t;(0,l.useEffect)((function(){if(o){var e=new Map;o.optional.sql.delete.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.insert.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.select.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.update.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),O(e)}}),[o]),(0,l.useEffect)((function(){if(o){var e=null===o||void 0===o?void 0:o.required.find((function(e){return"ReadGroups"===e.name}));C(!("true"===(null===e||void 0===e?void 0:e.value)))}}),[o]);return l.createElement(i.EmphasizedSegment,{padded:"very"},l.createElement(A.Forms,{onSubmit:function(e){var t=null===o||void 0===o?void 0:o.required.map((function(t){var n;return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})),n=g?null===o||void 0===o?void 0:o.optional.nonSql.map((function(t){var n;return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})):null,i=g?null===o||void 0===o?void 0:o.optional.sql.insert.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,l=g?null===o||void 0===o?void 0:o.optional.sql.update.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,u=g?null===o||void 0===o?void 0:o.optional.sql.delete.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,c=g?null===o||void 0===o?void 0:o.optional.sql.select.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,d=g?[].concat(W(t),W(n),W(u),W(i),W(l),W(c)):t;L(!0),(0,v.Xv)(r,d).then((function(){T((0,s.addAlert)({description:M("console:manage.features.userstores.notifications.updateUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:M("console:manage.features.userstores.notifications.updateUserstore.success.message")})),T((0,s.addAlert)({description:M("console:manage.features.userstores.notifications.updateDelay.description"),level:a.AlertLevels.WARNING,message:M("console:manage.features.userstores.notifications.updateDelay.message")})),m()})).catch((function(e){T((0,s.addAlert)({description:(null===e||void 0===e?void 0:e.description)||M("console:manage.features.userstores.notifications.updateUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||M("console:manage.features.userstores.notifications.updateUserstore.genericError.message")}))})).finally((function(){L(!1)}))}},l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},null===o||void 0===o||null===(t=o.required)||void 0===t?void 0:t.map((function(e,t){var n,o,a,s,i=e.description.split("#")[0],u="password"===e.attributes.find((function(e){return"type"===e.name})).value,c="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value),d="ReadGroups"===e.name;return u?l.createElement(A.Field,{name:e.name,type:"password",key:t,required:!0,label:i,requiredErrorMessage:"".concat(e.description.split("#")[0]," is  required"),showPassword:M("common:showPassword"),hidePassword:M("common:hidePassword"),placeholder:M("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-password-input-").concat(e.name)}):c?r!==h.kL&&(d?l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:M("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),listen:function(t){C("false"===t.get(e.name).toString())},toggle:!0,placeholder:M("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-toggle-master-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(a=e.value)&&void 0!==a?a:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:M("console:manage.features.userstores.forms.edit.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:b,toggle:!0,placeholder:M("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-toggle-").concat(e.name)})):l.createElement(A.Field,{name:e.name,value:null!==(s=e.value)&&void 0!==s?s:e.defaultValue,type:"text",key:t,required:!b,label:e.description.split("#")[0],requiredErrorMessage:M("console:manage.features.userstores.forms.edit.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:!(!E.userstoresConfig.userstoreEdit.groupDetails.showToggles||r===h.kL)&&b,placeholder:M("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-text-input-").concat(e.name)})}))))),!b&&((null===o||void 0===o?void 0:o.optional.nonSql.length)>0||(null===o||void 0===o?void 0:o.optional.sql.delete.length)>0||(null===o||void 0===o?void 0:o.optional.sql.insert.length)>0||(null===o||void 0===o?void 0:o.optional.sql.select.length)>0||(null===o||void 0===o?void 0:o.optional.sql.update.length)>0)&&r!==h.kL&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:8,textAlign:"center"},l.createElement(i.LinkButton,{type:"button",onClick:function(){y(!g)},"data-testid":"".concat(f,"-show-more-button")},l.createElement(d.Z,{name:g?"chevron up":"chevron down"}),M(g?"common:showLess":"common:showMore")))),!b&&g&&(null===o||void 0===o?void 0:o.optional.nonSql.length)>0&&l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},null===o||void 0===o||null===(n=o.optional)||void 0===n?void 0:n.nonSql.map((function(e,t){var n,r,o,a=e.description.split("#")[0],s="password"===e.attributes.find((function(e){return"type"===e.name})).value,i="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return s?l.createElement(A.Field,{name:e.name,type:"password",key:t,required:!1,label:a,requiredErrorMessage:M("console:manage.features.userstores.forms.edit.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),showPassword:M("common:showPassword"),hidePassword:M("common:hidePassword"),placeholder:M("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-non-sql-password-input-").concat(e.name)}):i?l.createElement(A.Field,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:M("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:b,toggle:!0,placeholder:M("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-non-sql-toggle-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:M("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:b,placeholder:M("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(f,"-form-non-sql-text-input-").concat(e.name)})}))))),!b&&g&&((null===o||void 0===o?void 0:o.optional.sql.delete.length)>0||(null===o||void 0===o?void 0:o.optional.sql.insert.length)>0||(null===o||void 0===o?void 0:o.optional.sql.select.length)>0||(null===o||void 0===o?void 0:o.optional.sql.update.length)>0)&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:16},l.createElement(he,{onChange:function(e,t){var n=new Map(P);n.set(e,t),O(n)},properties:null===o||void 0===o?void 0:o.optional.sql,values:P,"data-testid":"".concat(f,"-sql-editor")}))),l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(i.PrimaryButton,{type:"submit",loading:U,disabled:U||b,"data-testid":"".concat(f,"-form-submit-button")},"Update")))))};function X(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"===typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Q.defaultProps={"data-testid":"userstore-group-details-edit"};var re=function(e){var t,n,r,o=e.id,m=e.properties,f=e.type,p=e.update,g=e["data-testid"],E=ee((0,l.useState)(null),2),y=E[0],S=E[1],b=ee((0,l.useState)(!1),2),C=b[0],R=b[1],O=ee((0,l.useState)(!1),2),I=O[0],U=O[1],L=ee((0,l.useState)(!1),2),T=L[0],M=L[1],Z=ee((0,l.useState)(!1),2),N=Z[0],_=Z[1],k=ee((0,l.useState)(null),2),D=k[0],q=k[1],x=ee((0,l.useState)(!1),2),j=x[0],F=x[1],H=(0,c.I0)(),G=(0,u.$G)().t;!function(e){e.TESTING="spinner",e.FAILED="remove",e.SUCCESSFUL="check",e.INITIAL="bolt"}(r||(r={}));var z;!function(e){e[e.TESTING=0]="TESTING",e[e.INITIAL=1]="INITIAL",e[e.SUCCESSFUL=2]="SUCCESSFUL",e[e.FAILED=3]="FAILED"}(z||(z={}));var B=function(){return N?z.TESTING:T?z.SUCCESSFUL:I?z.FAILED:z.INITIAL};(0,l.useEffect)((function(){if(m){var e=new Map;m.optional.sql.delete.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),m.optional.sql.insert.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),m.optional.sql.select.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),m.optional.sql.update.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),q(e)}}),[m]);return l.createElement(i.EmphasizedSegment,{padded:"very"},l.createElement(A.Forms,{onChange:function(e,t){S(t)},onSubmit:function(e){var t=null===m||void 0===m?void 0:m.required.map((function(t){return{operation:"REPLACE",path:"/properties/".concat(t.name),value:e.get(t.name).toString()}})),n=C?null===m||void 0===m?void 0:m.optional.nonSql.map((function(t){return{operation:"REPLACE",path:"/properties/".concat(t.name),value:e.get(t.name).toString()}})):null,r=C?null===m||void 0===m?void 0:m.optional.sql.insert.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:D.get(e.name).toString()}})):null,i=C?null===m||void 0===m?void 0:m.optional.sql.update.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:D.get(e.name).toString()}})):null,l=C?null===m||void 0===m?void 0:m.optional.sql.delete.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:D.get(e.name).toString()}})):null,u=C?null===m||void 0===m?void 0:m.optional.sql.select.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:D.get(e.name).toString()}})):null,c=C?[].concat(X(t),X(n),X(l),X(r),X(i),X(u)):t;F(!0),(0,v.Xv)(o,c).then((function(){H((0,s.addAlert)({description:G("console:manage.features.userstores.notifications.updateUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:G("console:manage.features.userstores.notifications.updateUserstore.success.message")})),H((0,s.addAlert)({description:G("console:manage.features.userstores.notifications.updateDelay.description"),level:a.AlertLevels.WARNING,message:G("console:manage.features.userstores.notifications.updateDelay.message")})),p()})).catch((function(e){H((0,s.addAlert)({description:(null===e||void 0===e?void 0:e.description)||G("console:manage.features.userstores.notifications.updateUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||G("console:manage.features.userstores.notifications.updateUserstore.genericError.message")}))})).finally((function(){F(!1)}))}},l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},null===m||void 0===m||null===(t=m.required)||void 0===t?void 0:t.map((function(e,t){var n,r,o,a=e.description.split("#")[0],s="password"===e.attributes.find((function(e){return"type"===e.name})).value,i="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return s?l.createElement(A.Field,{name:e.name,className:"addon-field-wrapper",type:"password",key:t,required:!0,label:a,requiredErrorMessage:"".concat(e.description.split("#")[0]," is  required"),showPassword:G("common:showPassword"),hidePassword:G("common:hidePassword"),placeholder:G("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(g,"-form-password-input-").concat(e.name)}):i?l.createElement(A.Field,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:G("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:G("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(g,"-form-toggle-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!0,label:e.description.split("#")[0],requiredErrorMessage:G("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:G("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(g,"-form-text-input-").concat(e.name)})})))),(null===f||void 0===f?void 0:f.typeName.includes(h.lH))&&l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(P.Z,{className:"test-button",basic:!0,type:"button",color:B()===z.SUCCESSFUL?"green":B()===z.FAILED?"red":null,onClick:function(){if(_(!0),f.typeName.includes(h.lH)){var e,t,n,r,o,i,l,u,c={connectionPassword:null!==(e=null===y||void 0===y?void 0:y.get("password").toString())&&void 0!==e?e:null===m||void 0===m||null===(t=m.required.find((function(e){return"password"===e.name})))||void 0===t?void 0:t.value,connectionURL:null!==(n=null===y||void 0===y?void 0:y.get("url").toString())&&void 0!==n?n:null===m||void 0===m||null===(r=m.required.find((function(e){return"url"===e.name})))||void 0===r?void 0:r.value,driverName:null!==(o=null===y||void 0===y?void 0:y.get("driverName").toString())&&void 0!==o?o:null===m||void 0===m||null===(i=m.required.find((function(e){return"driverName"===e.name})))||void 0===i?void 0:i.value,username:null!==(l=null===y||void 0===y?void 0:y.get("userName").toString())&&void 0!==l?l:null===m||void 0===m||null===(u=m.required.find((function(e){return"userName"===e.name})))||void 0===u?void 0:u.value};(0,v.M7)(c).then((function(e){_(!1),null!==e&&void 0!==e&&e.connection?(H((0,s.addAlert)({description:G("console:manage.features.userstores.notifications.testConnection.success.description"),level:a.AlertLevels.SUCCESS,message:G("console:manage.features.userstores.notifications.testConnection.success.message")})),U(!1),M(!0)):(H((0,s.addAlert)({description:G("console:manage.features.userstores.notifications.testConnection.genericError.description"),level:a.AlertLevels.ERROR,message:G("console:manage.features.userstores.notifications.testConnection.genericError.message")})),M(!1),U(!0))})).catch((function(e){H((0,s.addAlert)({description:(null===e||void 0===e?void 0:e.description)||G("console:manage.features.userstores.notifications.testConnection.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||G("console:manage.features.userstores.notifications.testConnection.genericError.message")})),_(!1),M(!1),U(!0)}))}},"data-testid":"".concat(g,"-test-connection-button")},l.createElement(d.Z,{size:"small",loading:N,name:N?r.TESTING:T?r.SUCCESSFUL:I?r.FAILED:r.INITIAL,color:B()===z.SUCCESSFUL?"green":B()===z.FAILED?"red":null}),G("console:manage.features.userstores.forms.connection.testButton"))))),((null===m||void 0===m?void 0:m.optional.nonSql.length)>0||(null===m||void 0===m?void 0:m.optional.sql.delete.length)>0||(null===m||void 0===m?void 0:m.optional.sql.insert.length)>0||(null===m||void 0===m?void 0:m.optional.sql.select.length)>0||(null===m||void 0===m?void 0:m.optional.sql.update.length)>0)&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:8,textAlign:"center"},l.createElement(i.LinkButton,{type:"button",onClick:function(){R(!C)},"data-testid":"".concat(g,"-show-more-button")},l.createElement(d.Z,{name:C?"chevron up":"chevron down"}),G(C?"common:showLess":"common:showMore")))),C&&(null===m||void 0===m?void 0:m.optional.nonSql.length)>0&&l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},null===m||void 0===m||null===(n=m.optional.nonSql)||void 0===n?void 0:n.map((function(e,t){var n,r,o,a=e.description.split("#")[0],s="password"===e.attributes.find((function(e){return"type"===e.name})).value,i="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return s?l.createElement(A.Field,{name:e.name,type:"password",key:t,required:!1,label:a,requiredErrorMessage:"".concat(e.description.split("#")[0]," is  required"),showPassword:G("common:showPassword"),hidePassword:G("common:hidePassword"),placeholder:G("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(g,"-form--non-sql-password-input-").concat(e.name)}):i?l.createElement(A.Field,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:G("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:G("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(g,"-form--non-sql-toggle-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:G("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:G("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(g,"-form--non-sql-text-input-").concat(e.name)})}))))),C&&((null===m||void 0===m?void 0:m.optional.sql.delete.length)>0||(null===m||void 0===m?void 0:m.optional.sql.insert.length)>0||(null===m||void 0===m?void 0:m.optional.sql.select.length)>0||(null===m||void 0===m?void 0:m.optional.sql.update.length)>0)&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:16},l.createElement(he,{onChange:function(e,t){var n=new Map(D);n.set(e,t),q(n)},properties:null===m||void 0===m?void 0:m.optional.sql,values:D,"data-testid":"".concat(g,"-sql-editor")}))),l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(i.PrimaryButton,{type:"submit","data-testid":"".concat(g,"-form-submit-button"),loading:j,disabled:j},G("common:update"))))))};re.defaultProps={"data-testid":"userstore-connection-details-edit"};var oe=n(4740);function ae(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){if(e){if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t,n,o,m,f=e.userStore,g=e.id,y=e.properties,S=e.update,b=e["data-testid"],C=se((0,l.useState)(null),2),P=C[0],O=C[1],I=se((0,l.useState)(!1),2),U=I[0],L=I[1],T=se((0,l.useState)(!1),2),M=T[0],Z=T[1],N=se((0,l.useState)(void 0),2),_=N[0],k=N[1],D=se((0,l.useState)(!1),2),q=D[0],x=D[1],j=(0,u.$G)().t,F=(0,c.I0)();(0,l.useEffect)((function(){if(y){var e=new Map;y.optional.sql.delete.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),y.optional.sql.insert.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),y.optional.sql.select.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),y.optional.sql.update.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),O(e)}}),[y]);return l.createElement(l.Fragment,null,M&&l.createElement(i.ConfirmationModal,{onClose:function(){return Z(!1)},type:"negative",open:M,assertion:null===f||void 0===f?void 0:f.name,assertionHint:l.createElement("p",null,l.createElement(u.cC,{i18nKey:"console:manage.features.userstores.confirmation.hint"},"Please type",l.createElement("strong",{"data-testid":"".concat(b,"-delete-confirmation-modal-assertion")},{name:null===f||void 0===f?void 0:f.name})," to confirm.")),assertionType:"input",primaryAction:j("console:manage.features.userstores.confirmation.confirm"),secondaryAction:j("common:cancel"),onSecondaryActionClick:function(){return Z(!1)},onPrimaryActionClick:function(){(0,v.oA)(g).then((function(){F((0,s.addAlert)({description:j("console:manage.features.userstores.notifications.deleteUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:j("console:manage.features.userstores.notifications.deleteUserstore.success.message")})),F((0,s.addAlert)({description:j("console:manage.features.userstores.notifications.delay.description"),level:a.AlertLevels.WARNING,message:j("console:manage.features.userstores.notifications.delay.message")})),p.m8.push(p.$x.getPaths().get("USERSTORES"))})).catch((function(e){var t,n;F((0,s.addAlert)({description:null!==(t=null===e||void 0===e?void 0:e.description)&&void 0!==t?t:j("console:manage.features.userstores.notifications.deleteUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:null!==(n=null===e||void 0===e?void 0:e.message)&&void 0!==n?n:j("console:manage.features.userstores.notifications.deleteUserstore.genericError.message")}))})).finally((function(){Z(!1)}))},"data-testid":"".concat(b,"-delete-confirmation-modal"),closeOnDimmerClick:!1},l.createElement(i.ConfirmationModal.Header,{"data-testid":"".concat(b,"-delete-confirmation-modal-header")},j("console:manage.features.userstores.confirmation.header")),l.createElement(i.ConfirmationModal.Message,{attached:!0,warning:!0,"data-testid":"".concat(b,"-delete-confirmation-modal-message")},j("console:manage.features.userstores.confirmation.message")),l.createElement(i.ConfirmationModal.Content,{"data-testid":"".concat(b,"-delete-confirmation-modal-content")},j("console:manage.features.userstores.confirmation.content"))),l.createElement(i.EmphasizedSegment,{padded:"very"},l.createElement(A.Forms,{onSubmit:function(e){var t,n={operation:"REPLACE",path:"/description",value:null===(t=e.get("description"))||void 0===t?void 0:t.toString()},r=null===y||void 0===y?void 0:y.required.map((function(t){var n;if(t.name!==h.rr)return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})).filter(Boolean);r.push(n);var o=U?null===y||void 0===y?void 0:y.optional.nonSql.map((function(t){var n;return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})):null,i=U?null===y||void 0===y?void 0:y.optional.sql.insert.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,l=U?null===y||void 0===y?void 0:y.optional.sql.update.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,u=U?null===y||void 0===y?void 0:y.optional.sql.delete.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,c=U?null===y||void 0===y?void 0:y.optional.sql.select.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=P.get(e.name))||void 0===t?void 0:t.toString()}})):null,d=U?[].concat(ae(r),ae(o),ae(u),ae(i),ae(l),ae(c)):r;x(!0),(0,v.Xv)(g,d).then((function(){F((0,s.addAlert)({description:j("console:manage.features.userstores.notifications.updateUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:j("console:manage.features.userstores.notifications.updateUserstore.success.message")})),F((0,s.addAlert)({description:j("console:manage.features.userstores.notifications.updateDelay.description"),level:a.AlertLevels.WARNING,message:j("console:manage.features.userstores.notifications.updateDelay.message")})),S()})).catch((function(e){F((0,s.addAlert)({description:(null===e||void 0===e?void 0:e.description)||j("console:manage.features.userstores.notifications.updateUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||j("console:manage.features.userstores.notifications.updateUserstore.genericError.message")}))})).finally((function(){x(!1)}))}},l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(A.Field,{label:j("console:manage.features.userstores.forms.general.name.label"),name:"name",type:"text",required:!1,requiredErrorMessage:j("console:manage.features.userstores.forms.general.name.requiredErrorMessage"),placeholder:j("console:manage.features.userstores.forms.general.name.placeholder"),value:(null===f||void 0===f?void 0:f.name)===h.XS?r.UserstoreConstants.CUSTOMER_USER_STORE_MAPPING:null===f||void 0===f?void 0:f.name,disabled:!0,"data-testid":"".concat(b,"-form-name-input")}),E.userstoresConfig.userstoreEdit.basicDetails.showType&&g!==h.kL&&l.createElement(A.Field,{label:j("console:manage.features.userstores.forms.general.type.label"),name:"type",type:"text",disabled:!0,required:!1,requiredErrorMessage:j("console:manage.features.userstores.forms.general.type.requiredErrorMessage"),value:null===f||void 0===f?void 0:f.typeName,"data-testid":"".concat(b,"-form-type-input")}),l.createElement(A.Field,{label:j("console:manage.features.userstores.forms.general.description.label"),name:"description",disabled:g==h.kL,type:"textarea",required:!1,requiredErrorMessage:"",placeholder:j("console:manage.features.userstores.forms.general.description.placeholder"),value:null===f||void 0===f?void 0:f.description,"data-testid":"".concat(b,"-form-description-textarea")}))),l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},g!==h.kL?null===y||void 0===y||null===(t=y.required)||void 0===t?void 0:t.map((function(e,t){var n,r,o;if(!(e.description.split("#")[0]===h.rr)){var a=e.description.split("#")[0],s="password"===e.attributes.find((function(e){return"type"===e.name})).value,i="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return s?l.createElement(A.Field,{name:e.name,type:"password",key:t,required:!0,label:a,requiredErrorMessage:j("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:j("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),showPassword:j("common:showPassword"),hidePassword:j("common:hidePassword"),"data-testid":"".concat(b,"-form-password-input-").concat(e.name)}):i?l.createElement(A.Field,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:j("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:j("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(b,"-form-toggle-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!0,label:e.description.split("#")[0],requiredErrorMessage:j("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:j("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(b,"-form-text-input-").concat(e.name)})}})):null)),(null===y||void 0===y?void 0:y.optional.nonSql.length)>0||(null===y||void 0===y?void 0:y.optional.sql.delete.length)>0||(null===y||void 0===y?void 0:y.optional.sql.insert.length)>0||(null===y||void 0===y?void 0:y.optional.sql.select.length)>0||(null===y||void 0===y?void 0:y.optional.sql.update.length)>0&&l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8,textAlign:"center"},l.createElement(i.LinkButton,{type:"button",onClick:function(){L(!U)},"data-testid":"".concat(b,"-show-more-button")},l.createElement(d.Z,{name:U?"chevron up":"chevron down"}),j(U?"common:showLess":"common:showMore")))),U&&(null===y||void 0===y?void 0:y.optional.nonSql.length)>0&&l.createElement(w.Z,null,l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},null===y||void 0===y||null===(n=y.optional)||void 0===n?void 0:n.nonSql.map((function(e,t){var n,r,o,a=e.description.split("#")[0],s="password"===e.attributes.find((function(e){return"type"===e.name})).value,i="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return s?l.createElement(A.Field,{name:e.name,type:"password",key:t,required:!1,label:a,requiredErrorMessage:j("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:j("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),showPassword:j("common:showPassword"),hidePassword:j("common:hidePassword"),"data-testid":"".concat(b,"-form-non-sql-password-input-").concat(e.name)}):i?l.createElement(A.Field,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:j("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:j("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(b,"-form-non-sql-toggle-").concat(e.name)}):l.createElement(A.Field,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:j("console:manage.features.userstores.forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:j("console:manage.features.userstores.forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(b,"-form-non-sql-text-input-").concat(e.name)})}))))),(null===y||void 0===y?void 0:y.optional.sql.delete.length)>0||(null===y||void 0===y?void 0:y.optional.sql.insert.length)>0||(null===y||void 0===y?void 0:y.optional.sql.select.length)>0||(null===y||void 0===y?void 0:y.optional.sql.update.length)>0&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:16},l.createElement(he,{onChange:function(e,t){var n=new Map(P);n.set(e,t),O(n)},properties:null===y||void 0===y?void 0:y.optional.sql,values:P,"data-testid":"".concat(b,"-sql-editor")}))),l.createElement(w.Z.Row,{columns:1},l.createElement(w.Z.Column,{width:8},l.createElement(i.PrimaryButton,{"data-testid":"".concat(b,"-form-submit-button"),loading:q,disabled:q},j("common:update"))))))),l.createElement(R.Z,{hidden:!0}),g!==h.kL&&l.createElement(w.Z,{columns:1},l.createElement(w.Z.Column,{width:16},l.createElement(oe.v9,{sectionHeader:j("common:dangerZone"),"ata-testid":"".concat(b,"-danger-zone-group")},l.createElement(i.DangerZone,{actionTitle:j("console:manage.features.userstores.dangerZone.disable.actionTitle"),header:j("console:manage.features.userstores.dangerZone.disable.header"),subheader:j("console:manage.features.userstores.dangerZone.disable.subheader"),onActionClick:void 0,"data-testid":"".concat(b,"-delete-danger-zone"),toggle:{checked:void 0!==_?_:"false"===(null===y||void 0===y||null===(o=y.required)||void 0===o||null===(m=o.find((function(e){return(null===e||void 0===e?void 0:e.name)===h.rr})))||void 0===m?void 0:m.value),onChange:function(e,t){var n,r,o=null===y||void 0===y||null===(n=y.required)||void 0===n||null===(r=n.find((function(e){return(null===e||void 0===e?void 0:e.name)===h.rr})))||void 0===r?void 0:r.name,i={operation:"REPLACE",path:"/properties/".concat(o),value:t.checked?"false":"true"};(0,v.Xv)(g,[i]).then((function(){k(t.checked),F((0,s.addAlert)({description:j("console:manage.features.userstores.notifications.updateUserstore.success.description"),level:a.AlertLevels.SUCCESS,message:j("console:manage.features.userstores.notifications.updateUserstore.success.message")})),F((0,s.addAlert)({description:j("console:manage.features.userstores.notifications.updateDelay.description"),level:a.AlertLevels.WARNING,message:j("console:manage.features.userstores.notifications.updateDelay.message")})),S()})).catch((function(e){F((0,s.addAlert)({description:(null===e||void 0===e?void 0:e.description)||j("console:manage.features.userstores.notifications.updateUserstore.genericError.description"),level:a.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||j("console:manage.features.userstores.notifications.updateUserstore.genericError.message")}))}))}}}),l.createElement(i.DangerZone,{actionTitle:j("console:manage.features.userstores.dangerZone.delete.actionTitle"),header:j("console:manage.features.userstores.dangerZone.delete.header"),subheader:j("console:manage.features.userstores.dangerZone.delete.subheader"),onActionClick:function(){return Z(!0)},"data-testid":"".concat(b,"-delete-danger-zone")})))))};ue.defaultProps={"data-testid":"userstore-basic-details-edit"};var ce=n(72499),de=n(75153),me=n(43776),fe=n(30372),pe=n(5091);function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var he=function(e){var t=e.onChange,n=e.properties,r=e.values,o=e["data-testid"],a=ve((0,l.useState)(!0),2),s=a[0],c=a[1],m=ve((0,l.useState)(-1),2),p=m[0],v=m[1],g=ve((0,l.useState)(""),2),h=g[0],E=g[1],y=ve((0,l.useState)(""),2),S=y[0],b=y[1],A=ve((0,l.useState)(""),2),C=A[0],w=A[1],R=ve((0,l.useState)(!0),2),P=R[0],O=R[1],I=ve((0,l.useState)(!1),2),U=I[0],L=I[1],T=(0,l.useRef)(null),M=(0,l.useRef)(null),Z=(0,u.$G)().t;(0,l.useEffect)((function(){var e,t,n,r="100%";s&&(r="calc(100% - ".concat(null===T||void 0===T||null===(e=T.current)||void 0===e||null===(t=e.ref)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.clientWidth,"px)"));M.current.style.width=r}),[s]);return l.createElement("div",{className:"script-editor-with-template-panel"},l.createElement(ce.Z.Pushable,{className:"script-editor-section"},l.createElement(ce.Z,{as:de.Z,className:"script-templates-panel",animation:"overlay",icon:"labeled",direction:"left",vertical:!0,secondary:!0,visible:s,ref:T,"data-testid":"".concat(o,"-sidebar")},l.createElement(i.Heading,{as:"h6",bold:!0},"SQL Query Types"),n&&l.createElement(me.Z,{as:fe.Z,className:"template-category-menu",fluid:!0,secondary:!0,vertical:!0,"data-testid":"".concat(o,"-query-types-accordion")},n.insert.length>0&&l.createElement(fe.Z.Item,null,l.createElement(me.Z.Title,{active:0===p,className:"category-name",content:Z("console:manage.features.userstores.sqlEditor.create"),index:p,icon:l.createElement(d.Z,{className:"angle right caret-icon"}),onClick:function(){return v(0===p?-1:0)},"data-testid":"".concat(o,"-insert-query-accordion-title")}),l.createElement(me.Z.Content,{className:"template-list",active:0===p,"data-testid":"".concat(o,"-insert-query-accordion-content")},n.insert.map((function(e,t){return l.createElement(fe.Z.Item,{key:t,onClick:function(){E(e.name),w(r.get(e.name)),b(r.get(e.name))},active:e.name===h,"data-testid":"".concat(o,"-insert-query")},l.createElement(f.Z,{trigger:l.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))),n.select.length>0&&l.createElement(fe.Z.Item,null,l.createElement(me.Z.Title,{active:1===p,className:"category-name",content:Z("console:manage.features.userstores.sqlEditor.read"),index:p,icon:l.createElement(d.Z,{className:"angle right caret-icon"}),onClick:function(){return v(1===p?-1:1)},"data-testid":"".concat(o,"-select-query-accordion-title")}),l.createElement(me.Z.Content,{className:"template-list",active:1===p,"data-testid":"".concat(o,"-select-query-accordion-content")},n.select.map((function(e,t){return l.createElement(fe.Z.Item,{key:t,onClick:function(){E(e.name),w(r.get(e.name)),b(r.get(e.name))},active:e.name===h,"data-testid":"".concat(o,"-select-query")},l.createElement(f.Z,{trigger:l.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))),n.update.length>0&&l.createElement(fe.Z.Item,null,l.createElement(me.Z.Title,{active:2===p,className:"category-name",content:Z("console:manage.features.userstores.sqlEditor.update"),index:p,icon:l.createElement(d.Z,{className:"angle right caret-icon"}),onClick:function(){return v(2===p?-1:2)},"data-testid":"".concat(o,"-update-query-accordion-title")}),l.createElement(me.Z.Content,{className:"template-list",active:2===p,"data-testid":"".concat(o,"-update-query-accordion-content")},n.update.map((function(e,t){return l.createElement(fe.Z.Item,{key:t,onClick:function(){E(e.name),w(r.get(e.name)),b(r.get(e.name))},active:e.name===h,"data-testid":"".concat(o,"-update-query")},l.createElement(f.Z,{trigger:l.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))),n.delete.length>0&&l.createElement(fe.Z.Item,null,l.createElement(me.Z.Title,{active:3===p,className:"category-name",content:Z("console:manage.features.userstores.sqlEditor.delete"),index:p,icon:l.createElement(d.Z,{className:"angle right caret-icon"}),onClick:function(){return v(3===p?-1:3)},"data-testid":"".concat(o,"-delete-query-accordion-title")}),l.createElement(me.Z.Content,{className:"template-list",active:3===p,"data-testid":"".concat(o,"-delete-query-accordion-content")},n.delete.map((function(e,t){return l.createElement(fe.Z.Item,{key:t,onClick:function(){E(e.name),w(r.get(e.name)),b(r.get(e.name))},active:e.name===h,"data-testid":"".concat(o,"-delete-query")},l.createElement(f.Z,{trigger:l.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))))),l.createElement(ce.Z.Pusher,null,l.createElement("div",{className:"script-editor-container",ref:M},l.createElement(fe.Z,{attached:"top",className:"action-panel",secondary:!0},l.createElement(fe.Z.Menu,{position:"left"},l.createElement(fe.Z.Item,{onClick:function(){return c(!s)},className:"action hamburger ml-3","data-testid":"".concat(o,"-sidebar-toggle")},l.createElement(d.Z,{name:"bars"}))),l.createElement(fe.Z.Item,{className:"action mr-3",position:"right"},l.createElement(i.Tooltip,{compact:!0,trigger:l.createElement("div",null,l.createElement(i.GenericIcon,{hoverable:!0,defaultIcon:!0,transparent:!0,size:"micro",hoverType:"rounded",icon:P?(0,pe.YT)().lightMode:(0,pe.YT)().darkMode,onClick:function(){return O(!P)},"data-testid":"".concat(o,"-code-editor-theme-toggle")})),content:Z(P?"common:lightMode":"common:darkMode"),size:"mini"}))),l.createElement("div",{className:"code-editor-wrapper"},l.createElement(i.CodeEditor,{lint:!0,sourceCode:S,options:{lineWrapping:!0,mode:"text/x-sql"},showLineNumbers:!1,onChange:function(e,t,n){w(n),L(n!==S)},theme:P?"dark":"light","data-testid":"".concat(o,"-code-editor")})),l.createElement(fe.Z,{attached:"bottom",className:"action-panel",secondary:!0},l.createElement(fe.Z.Item,{position:"right"},l.createElement(i.LinkButton,{type:"button",disabled:!U,onClick:function(){w(S);var e=S;b(""),setTimeout((function(){b(e),L(!1)}),1)},"data-testid":"".concat(o,"-reset-button")},Z("console:manage.features.userstores.sqlEditor.reset")),l.createElement(i.PrimaryButton,{type:"button",onClick:function(){t(h,C)},"data-testid":"".concat(o,"-save-button")},Z("common:save"))))))))};he.defaultProps={"data-testid":"sql-editor"}},80726:function(e,t,n){n.d(t,{OU:function(){return c},jw:function(){return d},oy:function(){return f},BN:function(){return r},wZ:function(){return m}});var r=function(e){return{userStores:"".concat(e,"/api/server/v1/userstores")}},o=n(64408),a=n(50834),s=n(28711),i=n(32329),l=n(63975),u=n(51507),c=function(){return{general:o.r}},d=function(){return a.r},m=function(){return{ad:s.r,default:i.r,jdbc:l.r,ldap:u.r}},f=function(){return{header:{default:a.r}}}},63706:function(e,t,n){n.d(t,{XS:function(){return E},kL:function(){return u},ET:function(){return d},Lh:function(){return c},rr:function(){return h},lH:function(){return l},o_:function(){return v},y8:function(){return g},Gw:function(){return f},W5:function(){return p},ug:function(){return m},u4:function(){return i}});var r=n(68131);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));s(i,"ERROR_CREATE_LIMIT_REACHED",new r.IdentityAppsError("SUS-60011","console:manage.features.userstores.notifications.apiLimitReachedError.error.description","console:manage.features.userstores.notifications.apiLimitReachedError.error.message","165d6b4b-d384-4335-9706-19ab034a5397")),s(i,"RESOURCE_NOT_FOUND_ERROR_MESSAGE","Resource not found.");var l="JDBC",u="REVGQVVMVA",c="default",d="This is a custom userstore manager implementation",m={ActiveDirectoryUserStoreManager:"Active Directory based userstore.",CarbonRemoteUserStoreManger:"Userstore on another Identity Server instance.",JDBCUserStoreManager:"Java Database Connectivity based userstore.",ReadOnlyLDAPUserStoreManager:"Lightweight Directory Access Protocol based userstore which is read only.",ReadWriteLDAPUserStoreManager:"Lightweight Directory Access Protocol based userstore which can both be read and written to",UniqueIDActiveDirectoryUserStoreManager:"Active Directory based userstore.",UniqueIDJDBCUserStoreManager:"Java Database Connectivity based userstore.",UniqueIDReadOnlyLDAPUserStoreManager:"Lightweight Directory Access Protocol based userstore which is read only.",UniqueIDReadWriteLDAPUserStoreManager:"Lightweight Directory Access Protocol based userstore which can both be read and written to"},f={ActiveDirectoryUserStoreManager:"Active Directory",CarbonRemoteUserStoreManger:"Carbon Remote",JDBCUserStoreManager:"JDBC",ReadOnlyLDAPUserStoreManager:"Read Only LDAP",ReadWriteLDAPUserStoreManager:"Read Write LDAP",UniqueIDActiveDirectoryUserStoreManager:"Active Directory",UniqueIDJDBCUserStoreManager:"JDBC",UniqueIDReadOnlyLDAPUserStoreManager:"Read Only LDAP",UniqueIDReadWriteLDAPUserStoreManager:"Read Write LDAP"},p={ActiveDirectoryUserStoreManager:"ad",CarbonRemoteUserStoreManger:"default",JDBCUserStoreManager:"jdbc",ReadOnlyLDAPUserStoreManager:"ldap",ReadWriteLDAPUserStoreManager:"ldap",UniqueIDActiveDirectoryUserStoreManager:"ad",UniqueIDJDBCUserStoreManager:"jdbc",UniqueIDReadOnlyLDAPUserStoreManager:"ldap",UniqueIDReadWriteLDAPUserStoreManager:"ldap"},v={PasswordJavaScriptRegEx:"^[\\S]{5,30}$",RolenameJavaScriptRegEx:"^[\\S]{3,30}$",UsernameJavaScriptRegEx:"^[\\S]{3,30}$"},g={PasswordRegEx:"PasswordJavaScriptRegEx",RolenameRegEx:"RolenameJavaScriptRegEx",UsernameRegEx:"UsernameJavaScriptRegEx"},h="Disabled",E="DEFAULT"},12558:function(e,t,n){n.d(t,{XS:function(){return a.XS},o_:function(){return a.o_},y8:function(){return a.y8},GN:function(){return r.GN},BN:function(){return o.BN}});var r=n(30864),o=(n(5949),n(80726)),a=n(63706);n(85894),n(94727),n(81354),n(39737),n(63068)},85894:function(e,t,n){var r;n.d(t,{O:function(){return r}}),function(e){e.CONNECTION="connection",e.USER="user",e.GROUP="group",e.BASIC="basic"}(r||(r={}))},81354:function(e,t,n){n.r(t);var r=n(57002),o=n(88742),a=n(26278),s=n(96462),i=n(68905),l=n(64805),u=n(83913),c=n(12847),d=n(30864),m=n(5949),f=n(80726),p=n(63706),v=n(63068);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e.match,n=e["data-testid"],h=t.params.id,E=g((0,i.useState)(null),2),y=E[0],S=E[1],b=g((0,i.useState)(null),2),A=b[0],C=b[1],w=g((0,i.useState)(null),2),R=w[0],P=w[1],O=(0,u.I0)(),I=(0,l.$G)().t,U=function(){(0,d.YZ)(h).then((function(e){S(e)})).catch((function(e){O((0,a.addAlert)({description:(null===e||void 0===e?void 0:e.description)||I("console:manage.features.userstores.notifications.fetchUserstores.genericError.description"),level:o.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||I("console:manage.features.userstores.notifications.fetchUserstores.genericError.message")}))}))};(0,i.useEffect)((function(){U()}),[]),(0,i.useEffect)((function(){y&&(0,d.E4)(null===y||void 0===y?void 0:y.typeId,null).then((function(e){C(e)})).catch((function(e){O((0,a.addAlert)({description:(null===e||void 0===e?void 0:e.description)||I("console:manage.features.userstores.notifications.fetchUserstoreMetadata.genericError.description"),level:o.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||I("console:manage.features.userstores.notifications.fetchUserstoreMetadata.genericError.message")}))}))}),[y]),(0,i.useEffect)((function(){A&&P((0,v.Y)(A.properties,y.properties))}),[A]);var L=[{menuItem:I("console:manage.features.userstores.pageLayout.edit.tabs.general"),render:function(){return i.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},i.createElement(m.iq,{properties:null===R||void 0===R?void 0:R.basic,userStore:y,update:U,id:h,"data-testid":"".concat(n,"-userstore-basic-details-edit")}))}},{menuItem:h===p.kL?null:I("console:manage.features.userstores.pageLayout.edit.tabs.connection"),render:function(){return i.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},i.createElement(m.NY,{update:U,type:A,id:h,properties:null===R||void 0===R?void 0:R.connection,"data-testid":"".concat(n,"-userstore-connection-details-edit")}))}},{menuItem:I("console:manage.features.userstores.pageLayout.edit.tabs.user"),render:function(){return i.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},i.createElement(m.HD,{update:U,type:A,id:h,properties:null===R||void 0===R?void 0:R.user,"data-testid":"".concat(n,"-userstore-user-details-edit")}))}},{menuItem:I("console:manage.features.userstores.pageLayout.edit.tabs.group"),render:function(){return i.createElement(s.ResourceTab.Pane,{controlledSegmentation:!0,attached:!1},i.createElement(m.YV,{update:U,type:A,id:h,properties:null===R||void 0===R?void 0:R.group,"data-testid":"".concat(n,"-userstore-group-details-edit")}))}}];return i.createElement(s.PageLayout,{image:i.createElement(s.GenericIcon,{bordered:!0,defaultIcon:!0,size:"x60",relaxed:"very",shape:"rounded",hoverable:!1,icon:(0,f.jw)()}),title:(null===y||void 0===y?void 0:y.name)===p.XS?r.UserstoreConstants.CUSTOMER_USER_STORE_MAPPING:null===y||void 0===y?void 0:y.name,pageTitle:(null===y||void 0===y?void 0:y.name)===p.XS?r.UserstoreConstants.CUSTOMER_USER_STORE_MAPPING:null===y||void 0===y?void 0:y.name,description:I("console:manage.features.userstores.pageLayout.edit.description"),backButton:{onClick:function(){c.m8.push(c.$x.getPaths().get("USERSTORES"))},text:I("console:manage.features.userstores.pageLayout.edit.back")},titleTextAlign:"left",bottomMargin:!1,"data-testid":"".concat(n,"-page-layout")},i.createElement(s.ResourceTab,{panes:L,onTabChange:function(){U()},"data-testid":"".concat(n,"-tabs")}))};E.defaultProps={"data-testid":"userstores-edit"},t.default=E},94727:function(e,t,n){n.r(t);var r=n(8890),o=n(88742),a=n(26278),s=n(26776),i=n(96462),l=n(68905),u=n(64805),c=n(83913),d=n(70515),m=n(15409),f=n(12847),p=n(30864),v=n(5949);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t,n,h=e["data-testid"],E=(0,u.$G)().t,y=[{key:0,text:E("common:name"),value:"name"},{key:1,text:E("common:description"),value:"description"}],S=(0,c.v9)((function(e){return e.config.ui.features})),b=(0,c.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),A=g((0,l.useState)([]),2),C=A[0],w=A[1],R=g((0,l.useState)(0),2),P=R[0],O=R[1],I=g((0,l.useState)(f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),U=I[0],L=I[1],T=g((0,l.useState)(!0),2),M=T[0],Z=T[1],N=g((0,l.useState)([]),2),_=N[0],k=N[1],D=g((0,l.useState)(y[0]),2),q=D[0],x=D[1],j=g((0,l.useState)(!0),2),F=j[0],H=j[1],G=g((0,l.useState)(""),2),z=G[0],B=G[1],V=g((0,l.useState)(!1),2),$=V[0],W=V[1],Y=(0,c.I0)(),K=g((0,s.useTrigger)(),2),J=K[0],Q=K[1],X=function(e,t,n,r){var s={filter:r||null,limit:e||null,offset:n||null,sort:t||null};Z(!0),(0,p.GN)(s).then((function(e){w(e),k(e),Z(!1)})).catch((function(e){Z(!1),Y((0,a.addAlert)({description:(null===e||void 0===e?void 0:e.description)||E("console:manage.features.userstores.notifications.fetchUserstores.genericError.description"),level:o.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||E("console:manage.features.userstores.notifications.fetchUserstores.genericError.message")}))}))};(0,l.useEffect)((function(){X(null,null,null,null)}),[]),(0,l.useEffect)((function(){k((0,f.fS)(_,q.value,F))}),[q,F]);var ee=function(e){k((0,f.gQ)(C,e,"name",!0)),B(e),O(0),Q()};return l.createElement(i.PageLayout,{action:(M||!(!z&&(null===_||void 0===_?void 0:_.length)<=0))&&m.userstoresConfig.userstoreList.allowAddingUserstores&&(0,r.hasRequiredScopes)(null===S||void 0===S?void 0:S.userStores,null===S||void 0===S||null===(t=S.userStores)||void 0===t||null===(n=t.scopes)||void 0===n?void 0:n.create,b)&&l.createElement(i.PrimaryButton,{onClick:function(){f.m8.push(f.$x.getPaths().get("USERSTORE_TEMPLATES"))},"data-testid":"".concat(h,"-list-layout-add-button")},l.createElement(d.Z,{name:"add"}),E("console:manage.features.userstores.pageLayout.list.primaryAction")),isLoading:M,title:E("console:manage.features.userstores.pageLayout.list.title"),pageTitle:E("console:manage.features.userstores.pageLayout.list.title"),description:E("console:manage.features.userstores.pageLayout.list.description"),"data-testid":"".concat(h,"-page-layout")},l.createElement(i.ListLayout,{advancedSearch:l.createElement(f.nC,{onFilter:ee,filterAttributeOptions:[{key:0,text:E("common:name"),value:"name"},{key:1,text:E("common:description"),value:"description"}],filterAttributePlaceholder:E("console:manage.features.userstores.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:E("console:manage.features.userstores.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:E("console:manage.features.userstores.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:E("console:manage.features.userstores.advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:$,"data-testid":"".concat(h,"-advanced-search")}),currentListSize:U,listItemLimit:U,onItemsPerPageDropdownChange:function(e,t){L(t.value)},onPageChange:function(e,t){O((t.activePage-1)*U)},onSortStrategyChange:function(e,t){x(y.filter((function(e){return e.value===t.value}))[0])},onSortOrderChange:function(e){H(e)},resetPagination:J,leftActionPanel:null,showPagination:!0,sortOptions:y,sortStrategy:q,showTopActionPanel:M||!(!z&&(null===_||void 0===_?void 0:_.length)<=0),totalPages:Math.ceil((null===_||void 0===_?void 0:_.length)/U),totalListSize:null===_||void 0===_?void 0:_.length,"data-testid":"".concat(h,"-list-layout")},l.createElement(v.rO,{advancedSearch:l.createElement(f.nC,{onFilter:ee,filterAttributeOptions:[{key:0,text:E("common:name"),value:"name"},{key:1,text:E("common:description"),value:"description"}],filterAttributePlaceholder:E("console:manage.features.userstores.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:E("console:manage.features.userstores.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:E("console:manage.features.userstores.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:E("console:manage.features.userstores.advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:$,"data-testid":"".concat(h,"-advanced-search")}),isLoading:M,list:function(e,t,n){return null===e||void 0===e?void 0:e.slice(n,n+t)}(_,U,P),onEmptyListPlaceholderActionClick:function(){return f.m8.push(f.$x.getPaths().get("USERSTORE_TEMPLATES"))},onSearchQueryClear:function(){W(!$),B(""),k(C)},searchQuery:z,update:X,featureConfig:S,"data-testid":"".concat(h,"-list")})))};E.defaultProps={"data-testid":"userstores"},t.default=E},39737:function(e,t,n){n.r(t);var r=n(88742),o=n(26278),a=n(96462),s=n(68905),i=n(64805),l=n(83913),u=n(67897),c=n(12847),d=n(30864),m=n(5949),f=n(80726),p=n(63706);function v(e,t,n,r,o,a,s){try{var i=e[a](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=e["data-testid"],n=g((0,s.useState)([]),2),h=n[0],E=n[1],y=g((0,s.useState)([]),2),S=y[0],b=y[1],A=g((0,s.useState)(!1),2),C=A[0],w=A[1],R=g((0,s.useState)(null),2),P=R[0],O=R[1],I=g((0,s.useState)(!0),2),U=I[0],L=I[1],T=(0,l.I0)(),M=(0,i.$G)().t;return(0,s.useEffect)((function(){P&&w(!0)}),[P]),(0,s.useEffect)((function(){!C&&O(null)}),[C]),(0,s.useEffect)((function(){(0,d._V)().then(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,a,s,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),n=t.map((function(e){return(0,d.E4)(e.typeId,null)})),e.next=4,Promise.all(n.map((function(e){return e.catch((function(e){T((0,o.addAlert)({description:(null===e||void 0===e?void 0:e.description)||M("console:manage.features.userstores.notifications.fetchUserstoreTemplates.genericError.description"),level:r.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||M("console:manage.features.userstores.notifications.fetchUserstoreTemplates.genericError.message")}))}))})));case 4:a=e.sent,s=[],i=[],l=[],a.forEach((function(e){var t,n,r,o;e&&!u.userstoresConfig.shouldShowUserstore(e.typeName)&&(l.push(e),e.typeName.toLowerCase().includes("unique")?i.push({description:null!==(t=e.description)&&void 0!==t?t:p.ug[e.typeName],id:e.typeId,image:p.W5[e.typeName],name:p.Gw[e.typeName]}):s.push({description:null!==(n=p.ug[e.typeName])&&void 0!==n?n:p.ET,id:e.typeId,image:null!==(r=p.W5[e.typeName])&&void 0!==r?r:p.Lh,name:null!==(o=p.Gw[e.typeName])&&void 0!==o?o:e.typeName}))})),E(i.concat(s)),b(l);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){v(a,r,o,s,i,"next",e)}function i(e){v(a,r,o,s,i,"throw",e)}s(void 0)}))});return function(e){return t.apply(this,arguments)}}()).catch((function(e){T((0,o.addAlert)({description:(null===e||void 0===e?void 0:e.description)||M("console:manage.features.userstores.notifications.fetchUserstoreTypes.genericError.description"),level:r.AlertLevels.ERROR,message:(null===e||void 0===e?void 0:e.message)||M("console:manage.features.userstores.notifications.fetchUserstoreTypes.genericError.message")}))})).finally((function(){L(!1)}))}),[]),s.createElement(s.Fragment,null,C&&s.createElement(m.x7,{open:C,onClose:function(){w(!1)},type:P,"data-testid":"".concat(t,"-add-userstore-wizard")}),s.createElement(a.PageLayout,{isLoading:U,title:M("console:manage.features.userstores.pageLayout.templates.title"),pageTitle:M("console:manage.features.userstores.pageLayout.templates.title"),description:M("console:manage.features.userstores.pageLayout.templates.description"),contentTopMargin:!0,backButton:{onClick:function(){c.m8.push(c.$x.getPaths().get("USERSTORES"))},text:M("console:manage.features.userstores.pageLayout.templates.back")},titleTextAlign:"left",bottomMargin:!1,showBottomDivider:!0,"data-testid":"".concat(t,"-page-layout")},h&&s.createElement("div",{className:"quick-start-templates"},s.createElement(a.TemplateGrid,{type:"userstore",templates:h,heading:M("console:manage.features.userstores.pageLayout.templates.templateHeading"),subHeading:M("console:manage.features.userstores.pageLayout.templates.templateSubHeading"),onTemplateSelect:function(e,t){var n=t.id;O(S.find((function(e){return e.typeId===n})))},templateIcons:(0,f.wZ)(),templateIconOptions:{fill:"primary"},templateIconSize:"tiny",paginate:!0,paginationLimit:4,paginationOptions:{showLessButtonLabel:M("common:showLess"),showMoreButtonLabel:M("common:showMore")},emptyPlaceholder:!U&&s.createElement(a.EmptyPlaceholder,{image:(0,c.jF)().newList,imageSize:"tiny",title:M("console:manage.features.templates.emptyPlaceholder.title"),subtitle:[M("console:manage.features.templates.emptyPlaceholder.subtitles")],"data-testid":"".concat(t,"-grid-empty-placeholder")}),"data-testid":"".concat(t,"-grid")}))))};E.defaultProps={"data-testid":"userstore-templates"},t.default=E},63068:function(e,t,n){n.d(t,{Y:function(){return s}});var r=n(85894);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e,t){var n=[];n.push.apply(n,o(e.Advanced)),n.push.apply(n,o(e.Mandatory)),n.push.apply(n,o(e.Optional));var a=[],s=[],i=[],l=[],u=[],c=[],d=[],m=[],f=[],p=[],v=[],g=[],h=[],E=[],y=[],S=[],b=[],A=[],C=[],w=[],R=[],P=[],O=[],I=[];return n.forEach((function(e){var n,o,U,L,T,M,Z,N,_=null===(n=e.attributes)||void 0===n||null===(o=n.find((function(e){return"category"===e.name})))||void 0===o?void 0:o.value,k="true"===(null===(U=e.attributes)||void 0===U||null===(L=U.find((function(e){return"required"===e.name})))||void 0===L?void 0:L.value),D="sql"===(null===(T=e.attributes)||void 0===T||null===(M=T.find((function(e){return"type"===e.name})))||void 0===M?void 0:M.value),q=e.description.toLowerCase().includes("add"),x=e.description.toLowerCase().includes("delete"),j=e.description.toLowerCase().includes("update");t&&(e.value=null!==(Z=null===(N=t.find((function(t){return t.name===e.name})))||void 0===N?void 0:N.value)&&void 0!==Z?Z:"");switch(_){case r.O.CONNECTION:k?a.push(e):D?q?i.push(e):x?l.push(e):j?u.push(e):c.push(e):s.push(e);break;case r.O.GROUP:k?h.push(e):D?q?y.push(e):x?S.push(e):j?b.push(e):A.push(e):E.push(e);break;case r.O.USER:k?d.push(e):D?q?f.push(e):x?p.push(e):j?v.push(e):g.push(e):m.push(e);break;case r.O.BASIC:k?C.push(e):D?q?R.push(e):x?P.push(e):j?O.push(e):I.push(e):w.push(e)}})),{basic:{optional:{nonSql:w,sql:{delete:P,insert:R,select:I,update:O}},required:C},connection:{optional:{nonSql:s,sql:{delete:l,insert:i,select:c,update:u}},required:a},group:{optional:{nonSql:E,sql:{delete:S,insert:y,select:A,update:b}},required:h},user:{optional:{nonSql:m,sql:{delete:p,insert:f,select:g,update:v}},required:d}}}},64527:function(e,t,n){n.d(t,{q6:function(){return m},a9:function(){return d},op:function(){return f}});var r=n(19486),o=n(88742),a=n(12847),s=n(87356);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()).bind(r.AsgardeoSPAClient.getInstance()),d=function(e,t,n){var r={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.GET,params:{limit:e,offset:t,status:n},url:a.h.getState().config.endpoints.approvals};return n===s.K.ALL&&(r=l(l({},r),{},{params:l(l({},r.params),{},{status:null})})),c(r).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject("Failed to retrieve the pending approvals - ".concat(e))}))},m=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.GET,url:a.h.getState().config.endpoints.approvals+"/"+e};return c(t).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject("Failed to retrieve the pending approval details - ".concat(e))}))},f=function(e,t){var n={data:{action:t},headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:o.HttpMethods.PUT,url:a.h.getState().config.endpoints.approvals+"/"+e+"/state"};return c(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject("Failed to update the pending approval status - ".concat(e))}))}},51726:function(e,t,n){n.d(t,{r:function(){return T}});var r=n(88742),o=n(26278),a=n(96462),s=n(68905),i=n(64805),l=n(83913),u=n(82791),c=n(99104),d=n(70787),m=n.n(d),f=n(22946),p=n(58704),v=n(84504),g=n(34342),h=n(85027),E=n(23177),y=n(5554),S=n(87356),b=function(e){var t,n,r,o=e.approval,l=e.resolveApprovalTagColor,d=e.updateApprovalStatus,b=e.openApprovalTaskModal,A=e.onCloseApprovalTaskModal,C=e.isSubmitting,w=e["data-testid"],R=(0,i.$G)().t;return s.createElement(h.Z,{open:b,closeOnDimmerClick:!0,dimmer:!0},s.createElement(h.Z.Header,null,s.createElement(u.Z,{as:"h4",image:!0,"data-testid":"".concat(w,"-item-heading")},s.createElement(u.Z.Content,null,R("console:manage.features.approvals.modals.taskDetails.header"),s.createElement(u.Z.Subheader,null,s.createElement(c.Z,{circular:!0,size:"mini",className:"micro spaced-right",color:l(null===o||void 0===o?void 0:o.taskStatus)}),(null===o||void 0===o?void 0:o.id)+" "+(null===o||void 0===o?void 0:o.subject)+" ")))),s.createElement(h.Z.Content,null,s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(f.Z.Content,null,s.createElement(E.Z,{padded:!0},s.createElement(E.Z.Row,{columns:2},s.createElement(E.Z.Column,{width:5},R("common:createdOn")),s.createElement(E.Z.Column,{width:11},s.createElement(f.Z.Description,null,m()(parseInt(null===o||void 0===o?void 0:o.createdTimeInMillis,10)).format("lll")))))))),s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(f.Z.Content,null,s.createElement(E.Z,{padded:!0},s.createElement(E.Z.Row,{columns:2},s.createElement(E.Z.Column,{width:5},R("common:description")),s.createElement(E.Z.Column,{width:11},s.createElement(f.Z.Description,null,null!==o&&void 0!==o&&o.description?null===o||void 0===o?void 0:o.description:R("console:manage.features.approvals.modals.taskDetails.description")))))))),s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(f.Z.Content,null,s.createElement(E.Z,{padded:!0},s.createElement(E.Z.Row,{columns:2},s.createElement(E.Z.Column,{width:5},R("common:priority")),s.createElement(E.Z.Column,{width:11},s.createElement(f.Z.Description,null,null===o||void 0===o?void 0:o.priority))))))),s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(f.Z.Content,null,s.createElement(E.Z,{padded:!0},s.createElement(E.Z.Row,{columns:2},s.createElement(E.Z.Column,{width:5},R("common:initiator")),s.createElement(E.Z.Column,{width:11},s.createElement(f.Z.Description,null,null===o||void 0===o?void 0:o.initiator))))))),s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(f.Z.Content,null,s.createElement(E.Z,{padded:!0},s.createElement(E.Z.Row,{columns:2},s.createElement(E.Z.Column,{width:5},R("common:approvalStatus")),s.createElement(E.Z.Column,{width:11},s.createElement(f.Z.Description,null,null===o||void 0===o?void 0:o.approvalStatus))))))),null!==o&&void 0!==o&&o.assignees?s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(f.Z.Content,null,s.createElement(E.Z,{padded:!0},s.createElement(E.Z.Row,{columns:2},s.createElement(E.Z.Column,{width:5},R("common:assignees")),s.createElement(E.Z.Column,{mobile:16,computer:11},s.createElement(f.Z.Description,null,s.createElement(g.Z,{maxWidth:g.Z.onlyComputer.minWidth,as:y.Z,hidden:!0}),(r=null===o||void 0===o?void 0:o.assignees,s.createElement(p.Z,{celled:!0,compact:!0,className:"edit-segment-table"},s.createElement(p.Z.Header,null,s.createElement(p.Z.Row,null,s.createElement(p.Z.HeaderCell,null,R("common:type")),s.createElement(p.Z.HeaderCell,null,R("common:assignee")))),s.createElement(p.Z.Body,null,r.map((function(e,t){return s.createElement(p.Z.Row,{key:t},s.createElement(p.Z.Cell,{className:"key-cell"},e.key),s.createElement(p.Z.Cell,{className:"values-cell"},e.value))})))))))))))):null,null!==o&&void 0!==o&&o.properties?s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(f.Z.Content,null,s.createElement(E.Z,{padded:!0},s.createElement(E.Z.Row,{columns:2},s.createElement(E.Z.Column,{width:5},R("common:properties")),s.createElement(E.Z.Column,{mobile:16,computer:11},s.createElement(f.Z.Description,null,s.createElement(g.Z,{maxWidth:g.Z.onlyComputer.minWidth,as:y.Z,hidden:!0}),(n=null===o||void 0===o?void 0:o.properties,s.createElement(p.Z,{celled:!0,compact:!0,className:"edit-segment-table",verticalAlign:"top"},s.createElement(p.Z.Body,null,n.map((function(e,t){return e.key&&e.value?s.createElement(p.Z.Row,{key:t},s.createElement(p.Z.Cell,{className:"key-cell"},R("console:manage.features.approvals.modals.approvalProperties."+"".concat(e.key))),s.createElement(p.Z.Cell,{className:"values-cell"},function(e,t){if("Claims"===e){var n=t.split(",");return s.createElement(f.Z,{className:"values-list",items:n})}return","!==t.substr(t.length-1)?t:t.slice(0,-1)}(e.key,e.value))):null})))))))))))):null),s.createElement(h.Z.Actions,null,s.createElement(E.Z,null,s.createElement(E.Z.Row,null,s.createElement(E.Z.Column,null,s.createElement(a.LinkButton,{floated:"left",onClick:A},R("common:cancel")),(null===o||void 0===o?void 0:o.taskStatus)!==S.K.COMPLETED?s.createElement(s.Fragment,null,(t=o,s.createElement(s.Fragment,null,(null===t||void 0===t?void 0:t.taskStatus)===S.K.READY?s.createElement(v.Z,{default:!0,className:"mb-1x",fluid:window.innerWidth<=g.Z.onlyMobile.maxWidth,onClick:function(){d(t.id,S.K.CLAIM),A()}},R("common:claim")):s.createElement(v.Z,{default:!0,className:"mb-1x",fluid:window.innerWidth<=g.Z.onlyMobile.maxWidth,onClick:function(){d(t.id,S.K.RELEASE),A()}},R("common:release")),s.createElement(v.Z,{primary:!0,className:"mb-1x",fluid:window.innerWidth<=g.Z.onlyMobile.maxWidth,onClick:function(){d(t.id,S.K.APPROVE),A()},loading:C,disabled:C},R("common:approve")),s.createElement(v.Z,{negative:!0,className:"mb-1x",fluid:window.innerWidth<=g.Z.onlyMobile.maxWidth,onClick:function(){d(t.id,S.K.REJECT),A()}},R("common:reject"))))):null)))))},A=n(5091),C=n(73881),w=n(64527),R=n(29847);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){var t=(0,i.$G)().t,n=(0,l.I0)(),d=e.getApprovalsList,m=e.onChangeStatusFilter,f=e.resolveApprovalTagColor,p=e.updateApprovalStatus,v=e.defaultListItemLimit,g=e.filterStatus,h=e.isLoading,E=e.list,y=e.selection,P=e.searchResult,I=e.showListItemActions,L=e.isSubmitting,T=e["data-testid"],M=U((0,s.useState)(!1),2),Z=M[0],N=M[1],_=U((0,s.useState)(void 0),2),k=_[0],D=_[1],q=U((0,s.useState)(!1),2),x=q[0],j=q[1];(0,s.useEffect)((function(){void 0!==k&&j(!0)}),[k]);var F=function(e){!function(e){N(!0),(0,w.q6)(e.id).then((function(t){var n=t;n=O(O({},n),{},{taskStatus:null===e||void 0===e?void 0:e.status,createdTimeInMillis:e.createdTimeInMillis}),D(n)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?n((0,o.addAlert)({description:e.response.data.description,level:r.AlertLevels.ERROR,message:t("console:manage.features.approvals.notifications.fetchApprovalDetails.error.message")})):n((0,o.addAlert)({description:t("console:manage.features.approvals.notifications.fetchApprovalDetails.genericError.description"),level:r.AlertLevels.ERROR,message:t("console:manage.features.approvals.notifications.fetchApprovalDetails.genericError.message")}))})).finally((function(){N(!1)}))}(e)},H=function(){return 0===P?s.createElement(a.EmptyPlaceholder,{action:s.createElement(a.LinkButton,{onClick:d},t("console:manage.features.approvals.placeholders.emptySearchResults.action")),image:(0,A.jF)().emptySearch,imageSize:"tiny",title:t("console:manage.features.approvals.placeholders.emptySearchResults.title"),subtitle:[t("console:manage.features.approvals.placeholders.emptySearchResults.subtitles.0"),t("console:manage.features.approvals.placeholders.emptySearchResults.subtitles.1"),t("console:manage.features.approvals.placeholders.emptySearchResults.subtitles.2")],"data-testid":"".concat(T,"-empty-search-placeholder")}):0===(null===E||void 0===E?void 0:E.length)&&g!==S.K.ALL?s.createElement(a.EmptyPlaceholder,{action:s.createElement(a.LinkButton,{onClick:function(){return m(S.K.ALL)}},t("console:manage.features.approvals.placeholders.emptySearchResults.action")),image:(0,A.jF)().newList,imageSize:"tiny",title:t("console:manage.features.approvals.placeholders.emptyApprovalFilter.title"),subtitle:[t("console:manage.features.approvals.placeholders.emptyApprovalFilter.subtitles.0",{status:g}),t("console:manage.features.approvals.placeholders.emptyApprovalFilter.subtitles.1",{status:g}),t("console:manage.features.approvals.placeholders.emptyApprovalFilter.subtitles.2")],"data-testid":"".concat(T,"-empty-placeholder")}):0===(null===E||void 0===E?void 0:E.length)?s.createElement(a.EmptyPlaceholder,{image:(0,A.jF)().newList,imageSize:"tiny",title:t("console:manage.features.approvals.placeholders.emptyApprovalList.title"),subtitle:[t("console:manage.features.approvals.placeholders.emptyApprovalList.subtitles.0"),t("console:manage.features.approvals.placeholders.emptyApprovalList.subtitles.1"),t("console:manage.features.approvals.placeholders.emptyApprovalList.subtitles.2")],"data-testid":"".concat(T,"-empty-placeholder")}):null};return s.createElement(s.Fragment,null,s.createElement(a.DataTable,{className:"approvals-table",externalSearch:null,isLoading:h||Z,loadingStateOptions:{count:null!==v&&void 0!==v?v:C.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(I)return[{"data-testid":"".concat(T,"-item-claim-button"),hidden:function(e){return(null===e||void 0===e?void 0:e.status)===S.K.COMPLETED||(null===e||void 0===e?void 0:e.status)===S.K.RESERVED},icon:function(){return"hand pointer outline"},onClick:function(e,t){return p(null===t||void 0===t?void 0:t.id,S.K.CLAIM)},popupText:function(){return t("common:claim")},renderer:"semantic-icon"},{"data-testid":"".concat(T,"-item-release-button"),hidden:function(e){return(null===e||void 0===e?void 0:e.status)===S.K.COMPLETED||(null===e||void 0===e?void 0:e.status)===S.K.READY},icon:function(){return"paper plane"},onClick:function(e,t){return p(null===t||void 0===t?void 0:t.id,S.K.RELEASE)},popupText:function(){return t("common:release")},renderer:"semantic-icon"}]}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return s.createElement(u.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(T,"-item-heading")},s.createElement(a.GenericIcon,{bordered:!0,defaultIcon:!0,relaxed:"very",size:"micro",shape:"rounded",spaced:"right",hoverable:!1,icon:(0,R.o)().header.default}),s.createElement(u.Z.Content,null,e.id+" "+e.presentationSubject+" ",s.createElement(c.Z,{circular:!0,size:"tiny"},e.presentationName),s.createElement(u.Z.Subheader,{"data-testid":"".concat(T,"-item-sub-heading")},s.createElement("div",{className:"pb-2"},s.createElement(c.Z,{circular:!0,size:"mini",className:"micro mr-2 ml-0 vertical-aligned-baseline",color:f(e.status)}),e.status))))},title:t("console:manage.features.approvals.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:t("console:manage.features.approvals.list.columns.actions")}],data:E,onRowClick:function(e,t){F(t)},placeholders:H(),selectable:y,showHeader:!1,transparent:!(h||Z)&&null!==H(),"data-testid":T}),s.createElement(b,{resolveApprovalTagColor:f,onCloseApprovalTaskModal:function(){return j(!1)},openApprovalTaskModal:x,approval:k,updateApprovalStatus:p,isSubmitting:L}))};T.defaultProps={"data-testid":"approvals-list",selection:!0,showListItemActions:!0}},29847:function(e,t,n){n.d(t,{f:function(){return r},o:function(){return a}});var r=function(e){return{approvals:"".concat(e,"/api/users/v1/me/approval-tasks")}},o=n(88619),a=function(){return{header:{default:o.r}}}},16159:function(e,t,n){n.d(t,{fQ:function(){return r.f}});n(64527),n(51726);var r=n(29847);n(87356),n(22194)},87356:function(e,t,n){var r;n.d(t,{K:function(){return r}}),function(e){e.READY="READY",e.COMPLETED="COMPLETED",e.RESERVED="RESERVED",e.PENDING="PENDING",e.CLAIM="CLAIM",e.RELEASE="RELEASE",e.APPROVE="APPROVE",e.REJECT="REJECT",e.ALL="ALL"}(r||(r={}))},22194:function(e,t,n){n.r(t);var r=n(88742),o=n(26278),a=n(96462),s=n(68905),i=n(64805),l=n(83913),u=n(74364),c=n(1410),d=n(12847),m=n(64527),f=n(51726),p=n(87356);function v(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(i)throw o}}return a}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t,n=e["data-testid"],E=(0,i.$G)().t,y=(0,l.I0)(),S=(0,l.v9)((function(e){return e.config.ui.features})),b=h((0,s.useState)([]),2),A=b[0],C=b[1],w=h((0,s.useState)([]),2),R=w[0],P=w[1],O=h((0,s.useState)(!1),2),I=O[0],U=O[1],L=h((0,s.useState)(d.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),T=L[0],M=L[1],Z=h((0,s.useState)(0),2),N=Z[0],_=Z[1],k=h((0,s.useState)(p.K.ALL),2),D=k[0],q=k[1],x=h((0,s.useState)((g(t={},p.K.READY,!1),g(t,p.K.RESERVED,!1),g(t,p.K.COMPLETED,!1),g(t,p.K.ALL,!1),t)),2),j=x[0],F=(x[1],h((0,s.useState)(void 0),2)),H=F[0],G=F[1],z=h((0,s.useState)(!1),2),B=(z[0],z[1]),V=[{key:1,text:"All",value:p.K.ALL},{key:2,text:"Reserved",value:p.K.RESERVED},{key:3,text:"Ready",value:p.K.READY},{key:4,text:"Completed",value:p.K.COMPLETED}];(0,s.useEffect)((function(){C(A),P(A)}),[A]),(0,s.useEffect)((function(){G(void 0),$(!1)}),[D]),(0,s.useEffect)((function(){$(!1)}),[j]);var $=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];U(!0),(0,m.a9)(null,null,D).then((function(t){if(!e)return C(t),void P(t);var n=v(A),r=v(t),o=[];n.forEach((function(e){r.forEach((function(t){e.id===t.id&&(e.status=t.status,o.push(e))}))})),C(o),P(o)})).catch((function(e){e.response&&e.response.data&&e.response.detail&&y((0,o.addAlert)({description:E("console:manage.features.approvals.notifications.fetchPendingApprovals.error.description",{description:e.response.data.detail}),level:r.AlertLevels.ERROR,message:E("console:manage.features.approvals.notifications.fetchPendingApprovals.error.message")})),y((0,o.addAlert)({description:E("console:manage.features.approvals.notifications.fetchPendingApprovals.genericError.description"),level:r.AlertLevels.ERROR,message:E("console:manage.features.approvals.notifications.fetchPendingApprovals.genericError.message")}))})).finally((function(){U(!1)}))};return s.createElement(a.PageLayout,{title:E("console:manage.pages.approvalsPage.title"),pageTitle:E("console:manage.pages.approvalsPage.title"),description:E("console:manage.pages.approvalsPage.subTitle"),"data-testid":"".concat(n,"-page-layout")},s.createElement(a.ListLayout,{currentListSize:T,listItemLimit:T,onItemsPerPageDropdownChange:function(e,t){M(t.value)},onPageChange:function(e,t){_((t.activePage-1)*T)},showPagination:!0,showTopActionPanel:I||!(0==(null===A||void 0===A?void 0:A.length)),totalPages:Math.ceil(A.length/T),totalListSize:A.length,"data-testid":"".concat(n,"-list-layout"),rightActionPanel:s.createElement(u.Z,{"data-testid":"".concat(n,"-status-filter-dropdown"),selection:!0,options:V&&V,onChange:function(e,t){q(t.value)},defaultValue:p.K.ALL}),leftActionPanel:s.createElement("div",{className:"advanced-search-wrapper aligned-left fill-default"},s.createElement(c.Z,{className:"advanced-search with-add-on","data-testid":"".concat(n,"-list-search-input"),icon:"search",iconPosition:"left",onChange:function(e){var t=e.target.value;if(t.length>0){var n=A.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}));P(n),0===n.length&&G(0)}else P(A)},placeholder:"Search by workflow name",floated:"right",size:"small"}))},s.createElement(f.r,{filterStatus:D,onChangeStatusFilter:function(e){return q(e)},searchResult:H,getApprovalsList:$,updateApprovalStatus:function(e,t){B(!0),(0,m.op)(e,t).then((function(){$(!1)})).catch((function(e){e.response&&e.response.data&&e.response.detail?y((0,o.addAlert)({description:E("console:manage.features.approvals.notifications.updatePendingApprovals.error.description",{description:e.response.data.detail}),level:r.AlertLevels.ERROR,message:E("console:manage.features.approvals.notifications.updatePendingApprovals.error.message")})):y((0,o.addAlert)({description:E("console:manage.features.approvals.notifications.updatePendingApprovals.genericError.description"),level:r.AlertLevels.ERROR,message:E("console:manage.features.approvals.notifications.updatePendingApprovals.genericError.message")}))})).finally((function(){B(!1)}))},featureConfig:S,isLoading:I,list:function(e,t,n){return null===e||void 0===e?void 0:e.slice(n,n+t)}(R,T,N),resolveApprovalTagColor:function(e){switch(e){case p.K.READY:return"yellow";case p.K.RESERVED:return"orange";case p.K.COMPLETED:return"green";case p.K.ALL:return"blue";default:return"grey"}},"data-testid":"".concat(n,"-list")})))};S.defaultProps={"data-testid":"approvals"},t.default=S},99637:function(e,t,n){n(27259),n(72112),n(92981),n(89206),n(82861),n(55837),n(43876),n(36459),n(16160),n(13565),n(51418),n(99265),n(85075),n(48268),n(85224),n(79016),n(44326),n(31319),n(40650),n(39798),n(64864),n(35028),n(35855),n(50352),n(72252),n(57777),n(39156),n(22140),n(63198),n(99765),n(46298),n(10568),n(40384),n(24482),n(41159),n(26124),n(99648),n(38067),n(45435),n(98410),n(50138),n(52955),n(29651),n(84610),n(7593),n(99768),n(31857),n(6164),n(22250),n(79723),n(79134),n(63555),n(44041),n(24966),n(29675),n(90510),n(66210),n(40330),n(92614),n(12569),n(15314),n(71850),n(43083),n(11496),n(3136),n(57149),n(48012),n(80201),n(42834),n(95898),n(24480),n(88548),n(32342),n(67238),n(81553),n(83531),n(17792),n(78313),n(23322),n(84196),n(21876),n(53688),n(56538),n(48399),n(89573),n(76980),n(45218),n(51207),n(42967),n(35678),n(54718),n(69419),n(40877),n(58717),n(59476),n(61900),n(73352),n(22077),n(64726),n(64637),n(63413),n(2264),n(20932),n(99549),n(48067),n(98802),n(607),n(32144),n(76532),n(48607),n(54767),n(45951),n(24170),n(90599),n(45300),n(6979),n(47795),n(70310),n(57815),n(35612),n(46595),n(50866),n(36940),n(6398),n(99911),n(84625),n(3729),n(18089),n(76844),n(31633),n(31119),n(77687),n(50357),n(27536),n(32125),n(11983),n(85269),n(77007),n(50057),n(46115),n(31251),n(55961),n(76519),n(66134),n(65187),n(3509),n(97918),n(24070),n(91270),n(76413),n(41628),n(39222),n(96483),n(52177),n(86152),n(79840),n(40088),n(6503),n(83382),n(8059),n(38555),n(49559),n(40690),n(40221),n(37412),n(95717),n(40645),n(48539),n(558),n(62905),n(38304),n(19e3),n(60410),n(70413),n(52816),n(52993),n(52921),n(57756),n(82733),n(28793),n(72357),n(15961),n(80470),n(14763),n(94168),n(15287),n(80777),n(10387),n(39504),n(87669),n(55887),n(6263),n(83319),n(11492),n(25382),n(76529),n(22532),n(1556),n(61444);var r=n(19486),o=n(57002),a=n(95823),s=n(72932),i=n.n(s),l=n(68905),u=n(40422),c=n(83913),d=n(74749),m=n(97223),f=n(12847),p=n(10323);n(35458);a.ContextUtils.setRuntimeConfig(f.De.getDeploymentConfig()),window.location.pathname!==f.$x.getAppLoginPath()&&window.location.pathname!==f.$x.getPaths().get("UNAUTHORIZED")&&window.location.pathname!==f.$x.getPaths().get("PAGE_NOT_FOUND")&&window.location.pathname!==f.$x.getPaths().get("STORING_DATA_DISABLED")&&a.AuthenticateUtils.updateAuthenticationCallbackUrl(o.AppConstants.CONSOLE_APP,window.location.pathname+window.location.hash);u.render(l.createElement(c.zt,{store:f.h},l.createElement(d.Z,null,l.createElement(r.AuthProvider,{config:m.JM.initializeConfig,fallback:l.createElement(f.xq,null),getAuthParams:function(){if(!r.SPAUtils.hasAuthSearchParamsInURL()){var e=window.AppUtils.getConfig().appBase?"/".concat(window.AppUtils.getConfig().appBase):"";return i().get(e+"/auth").then((function(e){var t,n,r;return Promise.resolve({authorizationCode:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.authCode,sessionState:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.sessionState,state:null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.state})}))}}},l.createElement(p.t,null)))),document.getElementById("root"))}}]);